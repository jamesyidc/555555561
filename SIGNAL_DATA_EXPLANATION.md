# 信号数据说明

## 当前状态（2026-02-17 01:00）

### 📊 真实数据情况

- **最后信号时间**: 2026-02-15 18:38:54
- **今天的数据**: 无（2026-02-17 还没有触发任何信号）
- **昨天的数据**: 无（2026-02-16 也没有触发任何信号）

### 🔍 为什么没有新数据？

**这是正常现象！** 信号系统的设计逻辑是：

1. **信号触发条件**：只有当币种价格位置触及极值时才记录
   - 48h 低位：≤ 5%
   - 48h 高位：≥ 95%
   - 7d 低位：≤ 5%  
   - 7d 高位：≥ 95%

2. **当前市场状态**：所有币种的价格位置都在中间区间，没有触及极值
   - 例如：BTC 48h位置 9.3%，7d位置 40.2%（都不在极值）
   - 所有27个币种都类似，价格相对稳定

3. **系统行为**：
   - `price-position-collector` 每3分钟采集一次，记录价格位置到 JSONL
   - 只有触发信号时才写入 `signal_timeline` 数据库
   - 没有信号 = 没有新的 signal_timeline 记录 = 正常！

## 🎯 图表显示策略

### 当前实现（已完成）

**API 自动降级机制** (commit 3aa98ef):
- 当请求 2026-02-16 或 2026-02-17 的数据时
- API 自动向前查找7天内最近可用数据
- 找到 2026-02-15 的数据并返回
- 图表显示日期仍为 2026-02-17，但**使用的是 2026-02-15 的历史数据**

### ⚠️ 问题

这会让用户误以为 2026-02-17 有数据，但实际上显示的是2天前的旧数据。

### ✅ 建议改进

**方案1**: 在图表标题旁边显示数据来源日期
```
图表2：24h/2h逃顶信号趋势（数据来自: 2026-02-15）
```

**方案2**: 当没有当日数据时，显示提示信息
```
💡 当前日期无信号触发，显示最近数据：2026-02-15
```

**方案3**: 使用灰色背景或虚线表示这是历史数据

## 📈 何时会有新数据？

新的信号数据会在以下情况出现：

1. **市场暴涨/暴跌**：币种价格快速变化，触及48h或7d极值
2. **长期趋势**：币种持续上涨或下跌，最终触及极值位置
3. **个别币种异动**：某个币种单独大幅波动

**结论**：没有新数据 ≠ 系统故障，这是市场相对稳定的正常表现。

## 🚫 错误的解决方案

❌ **生成虚假占位符数据**：
- 预先生成未来时间点的数据（例如今天23:57的数据）
- 这是欺骗性的，会误导用户
- 已删除相关代码和提交

✅ **正确做法**：
- 保持系统真实性
- 清楚标注数据来源日期
- 让用户了解"无信号"也是一种市场信息

## 📝 相关提交

- `3aa98ef` - ✅ API自动降级机制（保留）
- `ccdab15` - ✅ 强制浏览器缓存刷新（保留）
- `4a41019` - ❌ 占位符脚本（已回退）
- `ac7571b` - ❌ 生成整天虚假数据（已回退）
- `1525457` - ❌ 虚假数据文档（已回退）

## 🎯 当前 Git 状态

```bash
HEAD is now at 3aa98ef - fix: Add automatic fallback to recent dates for computed-peaks API
```

系统保留了API降级机制，但**不再生成虚假的未来数据**。
