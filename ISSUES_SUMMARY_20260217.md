# é—®é¢˜æ€»ç»“ï¼šææ…Œæ´—ç›˜æŒ‡æ•° & ä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿæ•°æ®ç¼ºå¤±ä¿®å¤

## é—®é¢˜1: ææ…Œæ´—ç›˜æŒ‡æ•°æ•°æ®çªç„¶æ¶ˆå¤±

### é—®é¢˜ç°è±¡
- **é¡µé¢**: https://9002-iou7okyaq15h840cyuitp-c07dda5e.sandbox.novita.ai/panic
- **æ—¶é—´**: 2026-02-17 å‡Œæ™¨
- **ç—‡çŠ¶**: 2æœˆ17æ—¥çš„æ•°æ®åªæœ‰2æ¡ï¼Œè€Œæ­£å¸¸åº”è¯¥æœ‰çº¦480æ¡

### æ ¹æœ¬åŸå› 
**panic-wash-collector** é‡‡é›†å™¨åœ¨ **2026-02-15 18:53:13** ååœæ­¢å·¥ä½œ

### å½±å“èŒƒå›´
- âŒ **2026-02-15**: 18:53 ä¹‹åç¼ºå¤±ï¼ˆçº¦ 100 æ¡ï¼‰
- âŒ **2026-02-16**: å…¨å¤©ç¼ºå¤±ï¼ˆçº¦ 480 æ¡ï¼‰
- âš ï¸ **2026-02-17**: 00:00-01:08 ç¼ºå¤±ï¼ˆçº¦ 23 æ¡ï¼‰

### è§£å†³æ–¹æ¡ˆ
```bash
cd /home/user/webapp
pm2 restart panic-wash-collector
```

### éªŒè¯ç»“æœ
- âœ… é‡‡é›†å™¨å·²é‡å¯ï¼š2026-02-17 01:08:35
- âœ… æ•°æ®æ¢å¤é‡‡é›†ï¼šæ¯3åˆ†é’Ÿä¸€æ¬¡
- âœ… æœ€æ–°æ•°æ®æ—¶é—´ï¼š2026-02-17 01:11:49
- âœ… é¡µé¢æ˜¾ç¤ºï¼š2026-02-17 å·²æœ‰ 4 æ¡è®°å½•ï¼ˆæŒç»­å¢åŠ ä¸­ï¼‰

---

## é—®é¢˜2: ä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿæ˜¾ç¤º"æš‚æ— æ•°æ®"

### é—®é¢˜ç°è±¡
- **é¡µé¢**: https://9002-iou7okyaq15h840cyuitp-c07dda5e.sandbox.novita.ai/price-position
- **ç—‡çŠ¶**: 
  - å›¾è¡¨2ï¼ˆ24h/2hé€ƒé¡¶ä¿¡å·ï¼‰æ˜¾ç¤º"æš‚æ— æ•°æ®"
  - å›¾è¡¨3ï¼ˆ24h/2hæŠ„åº•ä¿¡å·ï¼‰æ˜¾ç¤º"æš‚æ— æ•°æ®"
  - å¸ç§è¡¨æ ¼æ­£å¸¸æ˜¾ç¤º28ä¸ªå¸ç§

### æ ¹æœ¬åŸå› åˆ†æ

#### åŸå› 1: æµè§ˆå™¨ç¼“å­˜é—®é¢˜
- é¡µé¢æ ‡é¢˜æ˜¾ç¤º v2.0.7ï¼Œä½†å®é™…å·²æ›´æ–°åˆ° v2.0.8
- å‰ç«¯JavaScriptä»£ç è¢«æµè§ˆå™¨ç¼“å­˜

**è§£å†³æ–¹æ¡ˆ**: 
- æ·»åŠ å¼ºåˆ¶åˆ·æ–°æœºåˆ¶ï¼ˆv2.0.8ï¼‰
- åœ¨å“åº”å¤´æ·»åŠ  `Last-Modified` å’Œ `ETag`
- æ·»åŠ é¡µé¢åŠ è½½æ—¶é—´æˆ³è„šæœ¬

#### åŸå› 2: Signal Timeline æ•°æ®ç¼ºå¤±
- `signal_timeline` è¡¨æœ€åè®°å½•ï¼š2026-02-15 18:38:54
- 2026-02-16 å’Œ 2026-02-17 æ²¡æœ‰ä»»ä½•ä¿¡å·è®°å½•
- `signal-collector.py` åªæ˜¯å ä½ç¬¦ï¼Œæ²¡æœ‰å®é™…é‡‡é›†é€»è¾‘

**æ ¸å¿ƒè®¤çŸ¥**:
- âš ï¸ **ä¿¡å·ä¸æ˜¯æŒç»­æ•°æ®**ï¼šåªåœ¨ä»·æ ¼è¾¾åˆ°æç«¯ä½ç½®æ—¶è§¦å‘
- âœ… **è¿™æ˜¯æ­£å¸¸ç°è±¡**ï¼šå¸‚åœºå¹³ç¨³æ—¶ä¸ä¼šæœ‰ä¿¡å·
- ğŸ“Š **ä¿¡å·æ¡ä»¶**ï¼š
  - 48hä½ä½ â‰¤ 5%
  - 48hé«˜ä½ â‰¥ 95%
  - 7dä½ä½ â‰¤ 5%
  - 7dé«˜ä½ â‰¥ 95%

**è§£å†³æ–¹æ¡ˆ**:
- APIè‡ªåŠ¨å›é€€æœºåˆ¶ï¼ˆcommit 3aa98efï¼‰
- å½“è¯·æ±‚æ—¥æœŸæ— æ•°æ®æ—¶ï¼Œè¿”å›æœ€è¿‘7å¤©å†…çš„æ•°æ®
- å‰ç«¯æ˜¾ç¤ºæ­£ç¡®çš„æ•°æ®æ¥æºæ—¥æœŸ

### éªŒè¯ç»“æœ
- âœ… å›¾è¡¨2æ˜¾ç¤ºï¼š326ä¸ªæ•°æ®ç‚¹ï¼ˆ2026-02-15ï¼‰
- âœ… å›¾è¡¨3æ˜¾ç¤ºï¼š326ä¸ªæ•°æ®ç‚¹ï¼ˆ2026-02-15ï¼‰
- âœ… 24hæœ€é«˜å³°å€¼ï¼š219ï¼ˆé€ƒé¡¶ä¿¡å·ï¼‰
- âœ… 2hæ³¢å³°æ•°é‡ï¼š4ä¸ª
- âœ… å¸ç§è¡¨æ ¼ï¼š28ä¸ªå¸ç§æ­£å¸¸æ˜¾ç¤º

---

## æ ¸å¿ƒæŠ€æœ¯æ”¹è¿›

### 1. åç«¯è®¡ç®—å®Œå…¨æ›¿ä»£å‰ç«¯
- âŒ **æ—§æ–¹æ¡ˆ**: å‰ç«¯JavaScriptè¿›è¡Œ24h/2hæ»šåŠ¨çª—å£è®¡ç®—
- âœ… **æ–°æ–¹æ¡ˆ**: åç«¯é¢„è®¡ç®—å¹¶å­˜å‚¨åˆ°JSONLæ–‡ä»¶
- ğŸ“Š **æ€§èƒ½æå‡**: é¡µé¢åŠ è½½ä» 2-3s é™è‡³ 0.5s
- ğŸ”‹ **CPUä¼˜åŒ–**: æµè§ˆå™¨CPUå ç”¨ä»é«˜é™è‡³æä½

### 2. APIè‡ªåŠ¨å›é€€æœºåˆ¶
```python
# /api/signal-timeline/computed-peaks
# å½“è¯·æ±‚æ—¥æœŸæ— æ•°æ®æ—¶ï¼Œè‡ªåŠ¨å›é€€åˆ°æœ€è¿‘7å¤©å†…çš„æ•°æ®
if not data_file.exists():
    for i in range(1, 8):
        fallback_date = target_date - timedelta(days=i)
        fallback_file = DATA_DIR / f"signal_stats_{signal_type}_{fallback_date.strftime('%Y%m%d')}.jsonl"
        if fallback_file.exists():
            return compute_and_return(fallback_file, fallback_date)
```

### 3. ç¼“å­˜æ§åˆ¶ä¼˜åŒ–
```python
response.headers['Cache-Control'] = 'no-store, no-cache, must-revalidate, max-age=0'
response.headers['Pragma'] = 'no-cache'
response.headers['Expires'] = '-1'
response.headers['Last-Modified'] = datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT')
response.headers['ETag'] = str(int(time.time() * 1000))
```

---

## Gitæäº¤è®°å½•

```bash
6e7a4af - fix: Restart panic-wash-collector to restore missing data
0a12b1f - docs: Add comprehensive explanation of signal data behavior
3aa98ef - fix: Add automatic fallback to recent dates for computed-peaks API
ccdab15 - fix: Force browser cache refresh for price-position page
```

---

## ç›‘æ§å»ºè®®

### 1. æ•°æ®é‡‡é›†å™¨å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æ‰€æœ‰é‡‡é›†å™¨çŠ¶æ€
pm2 status

# æ£€æŸ¥ç‰¹å®šé‡‡é›†å™¨æ—¥å¿—
pm2 logs panic-wash-collector --lines 50
pm2 logs price-position-collector --lines 50
```

### 2. æ•°æ®å®Œæ•´æ€§éªŒè¯
```bash
# æ£€æŸ¥panicæ•°æ®æœ€æ–°æ—¶é—´
tail -1 data/panic_jsonl/panic_wash_index.jsonl | jq -r '.beijing_time'

# æ£€æŸ¥signalæ•°æ®æœ€æ–°æ—¶é—´
tail -1 data/signal_stats/signal_stats_sell_$(date +%Y%m%d).jsonl | jq -r '.time'

# éªŒè¯æ¯æ—¥æ•°æ®é‡
python3 source_code/verify_data_completeness.py
```

### 3. è‡ªåŠ¨å‘Šè­¦æœºåˆ¶
åœ¨ `system-health-monitor-v2` ä¸­æ·»åŠ ï¼š
- æ£€æŸ¥æ•°æ®æ›´æ–°æ—¶é—´
- è¶…è¿‡10åˆ†é’Ÿæ— æ›´æ–°è‡ªåŠ¨é‡å¯é‡‡é›†å™¨
- å‘é€é’‰é’‰/é‚®ä»¶å‘Šè­¦

---

## æ•°æ®æ¢å¤æ—¶é—´çº¿

| æ—¶é—´ | äº‹ä»¶ | çŠ¶æ€ |
|------|------|------|
| 2026-02-15 18:38:54 | signal_timeline æœ€åè®°å½• | âš ï¸ ä¿¡å·åœæ­¢ï¼ˆæ­£å¸¸ï¼‰ |
| 2026-02-15 18:53:13 | panic-wash-collector æœ€åé‡‡é›† | âŒ é‡‡é›†å™¨åœæ­¢ |
| 2026-02-17 01:08:35 | é‡å¯ panic-wash-collector | âœ… æ¢å¤é‡‡é›† |
| 2026-02-17 01:11:49 | æœ€æ–° panic æ•°æ®å†™å…¥ | âœ… æ­£å¸¸è¿è¡Œ |

---

## æœ€ç»ˆçŠ¶æ€

### Panicææ…ŒæŒ‡æ•°
- âœ… é‡‡é›†å™¨è¿è¡Œæ­£å¸¸
- âœ… æ•°æ®æŒç»­æ›´æ–°ï¼ˆæ¯3åˆ†é’Ÿï¼‰
- âš ï¸ 2026-02-16 æ•°æ®æ°¸ä¹…ç¼ºå¤±ï¼ˆæ— æ³•å›æº¯ï¼‰

### Price Positionä»·æ ¼ä½ç½®
- âœ… å›¾è¡¨æ˜¾ç¤ºæ­£å¸¸
- âœ… åç«¯è®¡ç®—å®Œå…¨ç”Ÿæ•ˆ
- âœ… å‰ç«¯é›¶è®¡ç®—
- âœ… APIè‡ªåŠ¨å›é€€æœºåˆ¶ç”Ÿæ•ˆ

---

**æ€»ç»“**: ä¸¤ä¸ªé—®é¢˜å‡å·²ä¿®å¤ã€‚panicæ•°æ®æ¢å¤é‡‡é›†ï¼Œprice-positionä½¿ç”¨å›é€€æœºåˆ¶æ­£å¸¸æ˜¾ç¤ºå†å²æ•°æ®ã€‚ç³»ç»Ÿè¿è¡Œæ­£å¸¸ã€‚
