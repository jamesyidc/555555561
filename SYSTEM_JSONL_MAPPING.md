# 首页系统与JSONL数据文件对应关系

本文档说明首页各系统对应的JSONL数据文件及其存储的数据信息。

---

## 1. 📈 SAR斜率系统 / SAR趋势系统

**首页名称**: SAR斜率系统  
**JSONL系统名**: SAR趋势系统

### 对应的JSONL目录

#### 1.1 sar_jsonl
- **文件数**: 29个（每个币种一个文件）
- **记录数**: 81,781条
- **存储内容**: 27个币种的SAR指标数据
  - 每5分钟一条记录
  - 包含SAR值、多空位置、持续时间
  - 币种包括: BTC, ETH, BNB, XRP, DOGE, SOL, DOT, LTC, LINK等27个主流币种

#### 1.2 sar_slope_jsonl  
- **文件数**: 3个
- **记录数**: 412,426条
- **存储内容**: SAR斜率分析数据
  - `sar_slope_data.jsonl`: 详细的斜率数据 (405,086条)
  - `sar_slope_summary.jsonl`: 斜率统计摘要 (7,313条)
  - `latest_sar_slope.jsonl`: 最新的斜率数据 (27条，每币种一条)

#### 1.3 sar_1min
- **文件数**: 2个
- **记录数**: 30,878条
- **存储内容**: 1分钟粒度SAR数据
  - 按天存储: `sar_1min_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-02-01 ~ 2026-02-02

#### 1.4 sar_bias_stats
- **文件数**: 16个
- **记录数**: 11,729条
- **存储内容**: SAR乖离率统计
  - 按天存储: `bias_stats_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-02-01 ~ 2026-02-16 (16天)

**系统总计**:
- **文件数**: 50个
- **记录数**: 536,814条
- **数据大小**: 148.01 MB
- **数据天数**: 16天
- **日期范围**: 2026-02-01 ~ 2026-02-16

---

## 2. 🎯 锚点系统（实盘）

**首页名称**: 锚点系统（实盘）  
**数据位置**: 此系统不存储JSONL数据，直接调用OKX API实时监控

---

## 3. 💹 OKX实盘交易 / OKX全生态

**首页名称**: OKX实盘交易  
**JSONL系统名**: OKX全生态

### 对应的JSONL目录

#### 3.1 okx_trading_jsonl
- **文件数**: 1个
- **记录数**: 11,353条
- **存储内容**: OKX日涨跌幅数据
  - `okx_day_change.jsonl`: 27个币种的24小时涨跌幅
  - 每5分钟采集一次

#### 3.2 okx_trading_history
- **文件数**: 15个
- **记录数**: 1,320条
- **存储内容**: 交易历史记录
  - 按天存储: `okx_trades_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-02-01 ~ 2026-02-16 (15天)
  - 每条记录包含: 交易对、方向、价格、数量、时间等

#### 3.3 okx_trading_logs
- **文件数**: 16个
- **记录数**: 1,242条
- **存储内容**: 交易操作日志
  - 按天存储: `trading_log_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-01-21 ~ 2026-02-16
  - 记录所有交易操作和系统事件

#### 3.4 okx_angle_analysis
- **文件数**: 13个
- **记录数**: 264条
- **存储内容**: 角度分析数据
  - 按天存储: `okx_angles_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-02-01 ~ 2026-02-13
  - 分析价格走势的角度变化

#### 3.5 okx_auto_strategy
- **文件数**: 2个
- **记录数**: 7条
- **存储内容**: 自动交易策略历史
  - `account_main_history.jsonl`: 主账户策略 (3条)
  - `account_poit_history.jsonl`: POIT账户策略 (4条)

#### 3.6 okx_tpsl_settings
- **文件数**: 若干个
- **记录数**: 具体数量视账户而定
- **存储内容**: 止盈止损设置历史
  - 按账户存储: `account_XXX_history.jsonl`

**系统总计**:
- **文件数**: 51个
- **记录数**: 14,226条
- **数据大小**: 25.87 MB
- **数据天数**: 17天
- **日期范围**: 2026-01-21 ~ 2026-02-16

---

## 4. 📊 OKX日涨跌幅标记

**首页名称**: OKX日涨跌幅标记  
**数据位置**: 数据存储在 `OKX全生态` 系统的 `okx_trading_jsonl/okx_day_change.jsonl` 中

---

## 5. 📊 OKX利润分析

**首页名称**: OKX利润分析  
**数据位置**: 此系统不单独存储JSONL数据，从OKX API实时获取账户信息和交易历史进行分析

---

## 6. 🗄️ 数据管理与备份

**首页名称**: 数据管理与备份  
**数据位置**: 此系统是管理工具，不存储业务数据，仅管理其他系统的JSONL文件

---

## 7. ⚡ 恐慌清洗指数 / 恐慌监控洗盘

**首页名称**: 恐慌清洗指数  
**JSONL系统名**: 恐慌监控洗盘

### 对应的JSONL目录

#### 7.1 panic_jsonl
- **文件数**: 暂无独立文件统计
- **记录数**: 部分记录
- **存储内容**: 实时恐慌指数数据
  - 0-100分数
  - 综合爆仓率和持仓量数据

#### 7.2 panic_daily
- **文件数**: 25个
- **记录数**: 24,427条
- **存储内容**: 每日恐慌指数统计
  - 按天存储
  - 覆盖日期: 2026-01-15 ~ 2026-02-10 (23天)

**系统总计**:
- **文件数**: 25个
- **记录数**: 24,427条
- **数据大小**: 14.95 MB
- **数据天数**: 23天
- **日期范围**: 2026-01-15 ~ 2026-02-10

---

## 8. 📊 1H爆仓月线图

**首页名称**: 1H爆仓月线图  
**JSONL系统名**: 11信号日线总

### 对应的JSONL目录

#### 8.1 signal_stats
- **文件数**: 10个
- **记录数**: 2,846条
- **存储内容**: 信号统计数据
  - 1小时爆仓金额统计
  - 30分钟K线数据
  - 标记≥1.5亿高点
  - 按天存储
  - 覆盖日期: 2026-02-11 ~ 2026-02-15 (5天)

**系统总计**:
- **文件数**: 10个
- **记录数**: 2,846条
- **数据大小**: 0.59 MB
- **数据天数**: 5天
- **日期范围**: 2026-02-11 ~ 2026-02-15

---

## 9. 🚨 重大事件监控

**首页名称**: 重大事件监控  
**数据位置**: 此系统聚合其他系统数据，不单独存储JSONL。监控数据来源:
- 2h逃顶信号 → `逃顶信号系统`
- 27币涨跌幅 → `27币涨跌幅追踪系统`
- 1h爆仓金额 → `11信号日线总`

---

## 10. 📊 数据采集健康监控

**首页名称**: 数据采集健康监控  
**数据位置**: 此系统是监控工具，不存储业务JSONL数据，只监控其他采集器状态

---

## 11. 📈 27币涨跌幅追踪系统

**首页名称**: 27币涨跌幅追踪系统  
**JSONL系统名**: (未找到映射)

### 对应的JSONL目录

根据最近的更新记录,该系统应该有自己的JSONL目录:

#### coin_change_tracker (推测)
- **存储内容**: 27个币种的实时涨跌幅追踪
  - 按天存储: `coin_change_YYYYMMDD.jsonl`
  - 每分钟采集一次
  - 使用日线开盘价(0点)作为基准
  - 每条记录包含:
    - timestamp: 时间戳
    - beijing_time: 北京时间
    - cumulative_pct: 累计涨跌幅百分比
    - total_change: 总涨跌幅
    - up_ratio: 上涨占比 (%)
    - up_coins: 上涨币种数
    - down_coins: 下跌币种数
    - changes: 各币种详细数据 {current_price, baseline_price, change_pct}
    - count: 币种数量

---

## 12. 🚨 逃顶信号系统

**首页名称**: 已删除（2026-02-12）  
**JSONL系统名**: 逃顶信号系统

### 对应的JSONL目录

#### 12.1 escape_signal_jsonl
- **文件数**: 3个
- **记录数**: 56,142条
- **存储内容**: 逃顶信号数据
  - 2小时周期的逃顶信号
  - 仅有2026-01-28一天的数据

**系统总计**:
- **文件数**: 3个
- **记录数**: 56,142条
- **数据大小**: 11.97 MB
- **数据天数**: 1天
- **日期范围**: 2026-01-28

---

## 13. 📈 支撑压力线系统 / 支撑压力(大盘)

**首页名称**: 支撑压力线系统  
**JSONL系统名**: 支撑压力(大盘)

### 对应的JSONL目录

#### 13.1 support_resistance_jsonl
- **文件数**: 4个
- **记录数**: 739,246条
- **存储内容**: 支撑压力线数据
  - `support_resistance_levels.jsonl`: 支撑压力位数据 (708,895条)
  - `support_resistance_snapshots.jsonl`: 快照数据 (30,349条)
  - `okex_kline_ohlc.jsonl`: K线OHLC数据 (1条大文件)
  - `daily_baseline_prices.jsonl`: 每日基准价格 (1条大文件)

#### 13.2 support_resistance_daily
- **文件数**: 41个
- **记录数**: 901,992条
- **存储内容**: 每日支撑压力线数据
  - 按天存储: `support_resistance_YYYYMMDD.jsonl`
  - 覆盖日期: 2025-12-25 ~ 2026-02-07 (41天)
  - 27币种永续合约的7天/48小时双周期监控

**📸 数据管理页面截图示例**:

![支撑压力系统数据](https://www.genspark.ai/api/files/s/BkdF4Ptb)

**截图说明**：
- **目录**: `support_resistance_daily` (41文件, 901,992条记录, 976.51 MB)
- **可见文件**: 2026-02-07 ~ 2026-01-19 的每日数据
- **文件命名**: `support_resistance_YYYYMMDD.jsonl`

**📊 数据用途**：
1. **支撑压力位计算**: 
   - 支撑线1 (7天周期): 过去7天的最低价支撑位
   - 支撑线2 (48小时周期): 近48小时的最低价支撑位
   - 压力线1 (7天周期): 过去7天的最高价压力位
   - 压力线2 (48小时周期): 近48小时的最高价压力位

2. **价格位置判断**:
   - `position_7d`: 当前价格在支撑线1和压力线1之间的百分比位置 (0-100%)
   - `position_48h`: 当前价格在支撑线2和压力线2之间的百分比位置 (0-100%)

3. **4种预警场景**:
   - **情况1** (接近支撑2): 当`position_48h ≤ 5%` → 币价接近48小时支撑位，可能反弹
   - **情况2** (接近支撑1): 当`position_7d ≤ 5%` → 币价接近7天支撑位，买入机会
   - **情况3** (接近压力2): 当`position_48h ≥ 95%` → 币价接近48小时压力位，可能回调
   - **情况4** (接近压力1): 当`position_7d ≥ 95%` → 币价接近7天压力位，卖出警告

**📝 数据示例** (ETC币种):
```json
{
  "symbol": "ETCUSDT",
  "current_price": 11.98,           // 当前价格
  "support_line_1": 11.83,          // 7天支撑位
  "support_line_2": 11.83,          // 48小时支撑位
  "resistance_line_1": 12.49,       // 7天压力位
  "resistance_line_2": 12.07,       // 48小时压力位
  "position_7d": 22.73,             // 7天位置 (22.73%)
  "position_48h": 62.50,            // 48小时位置 (62.50%)
  "distance_to_support_1": 1.27,    // 距离支撑1的百分比
  "distance_to_resistance_1": 4.26, // 距离压力1的百分比
  "alert_scenario_1": 0,            // 预警场景1状态
  "alert_scenario_2": 0,            // 预警场景2状态
  "alert_scenario_3": 0,            // 预警场景3状态
  "alert_scenario_4": 0             // 预警场景4状态
}
```

**💡 实战应用**:
- 当币价接近支撑位 (≤5%) 时，可能是买入机会
- 当币价接近压力位 (≥95%) 时，可能是卖出时机
- 首页"支撑压力线系统"卡片实时显示各场景下的币种数量

**系统总计**:
- **文件数**: 45个
- **记录数**: 1,641,238条
- **数据大小**: 1,715.78 MB (1.67 GB)
- **数据天数**: 41天
- **日期范围**: 2025-12-25 ~ 2026-02-07

---

## 14. 📱 TG消息推送

**首页名称**: TG消息推送  
**数据位置**: 此系统不存储JSONL数据,直接通过Telegram API推送消息

---

## 15. 📍 价格位置预警系统 (新版 v2.0.5)

**首页名称**: 未在首页显示（独立系统）  
**系统名称**: 价格位置预警系统 v2.0.5  
**访问URL**: `/price-position`

⚠️ **注意**: 这是**新版价格位置预警系统**，与老版"支撑压力(大盘)"系统不同！

### 📊 新版 vs 老版对比

| 特性 | 老版 (支撑压力大盘) | 新版 (价格位置预警) |
|------|-------------------|-------------------|
| 系统名称 | 支撑压力(大盘) | 价格位置预警系统 v2.0.5 |
| URL路径 | `/support-resistance` | `/price-position` |
| 数据目录 | `support_resistance_daily` | `price_position` |
| 截图示例 | 📸 [老版截图](https://www.genspark.ai/api/files/s/BkdF4Ptb) | 📸 [新版截图](https://www.genspark.ai/api/files/s/42Grjqud) |
| 数据量 | 41天, 901,992条, 976.51 MB | 2天, 791,761条, ~3.6 MB |
| 更新状态 | 停止更新 (截止2026-02-07) | ✅ 正在运行 (最新2026-02-16) |

### 对应的JSONL目录

#### 15.1 price_speed_jsonl
- **文件数**: 2个
- **记录数**: 大量历史数据
- **存储内容**: 价格速度历史数据
  - `price_speed_history.jsonl`: 历史价格速度记录 (173 MB)
  - `latest_price_speed.jsonl`: 最新价格速度快照 (6.1 KB)

#### 15.2 price_speed_10m
- **文件数**: 2个（按天存储）
- **记录数**: 大量实时数据
- **存储内容**: 10分钟粒度价格速度统计
  - 按天存储: `price_speed_10m_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-02-15 ~ 2026-02-16
  - 文件大小: 
    - 2026-02-15: 805 KB
    - 2026-02-16: 1.5 MB

#### 15.3 price_position ⭐ **核心数据**
- **文件数**: 2个（按天存储）
- **记录数**: 791,761条
- **存储内容**: 价格位置预警数据（与老版支撑压力系统相似但独立）
  - 按天存储: `price_position_YYYYMMDD.jsonl`
  - 覆盖日期: 2026-02-15 ~ 2026-02-16 (2天)
  - 文件大小:
    - 2026-02-15: 889 KB
    - 2026-02-16: 2.7 MB

**📝 数据示例** (BTC币种, 新版格式):
```json
{
  "inst_id": "BTC-USDT-SWAP",
  "snapshot_time": "2026-02-16 18:38:35",
  "current_price": 68878.8,          // 当前价格
  "high_48h": 70527.7,               // 48小时最高价
  "low_48h": 68036.4,                // 48小时最低价
  "position_48h": 33.81,             // 48h位置百分比 (33.81%)
  "high_7d": 71097.7,                // 7天最高价
  "low_7d": 65080.0,                 // 7天最低价
  "position_7d": 63.13,              // 7天位置百分比 (63.13%)
  "alert_48h_low": 0,                // 48h低位预警 (0=未触发, 1=已触发)
  "alert_48h_high": 0,               // 48h高位预警
  "alert_7d_low": 0,                 // 7天低位预警
  "alert_7d_high": 0                 // 7天高位预警
}
```

**🔍 字段说明**:
- `position_48h`: 当前价格在48小时区间的位置 (0-100%)
  - 计算公式: `(current_price - low_48h) / (high_48h - low_48h) × 100%`
  - ≤5% → 接近48h最低价，买入机会
  - ≥95% → 接近48h最高价，卖出警告
- `position_7d`: 当前价格在7天区间的位置 (0-100%)
  - 计算公式: `(current_price - low_7d) / (high_7d - low_7d) × 100%`
  - ≤5% → 接近7天最低价，强买入信号
  - ≥95% → 接近7天最高价，强卖出信号

**系统总计**:
- **文件数**: 6个
- **记录数**: 791,761条
- **数据大小**: ~177.89 MB
- **数据天数**: 2天
- **日期范围**: 2026-02-15 ~ 2026-02-16
- **更新状态**: ✅ 正在实时更新

**📸 新版数据管理页面截图**:

![新版价格位置预警系统](https://www.genspark.ai/api/files/s/42Grjqud)

**截图说明**:
- 展示的是**老版支撑压力系统** (`support_resistance_daily`) 的数据
- 新版系统数据在 `price_position` 目录
- 两个系统并存，但新版正在使用中

---

## 📊 总体统计

### 有JSONL数据的系统 (8个)

1. **SAR趋势系统**: 50文件, 536,814条, 148.01MB, 16天
2. **支撑压力(大盘)**: 45文件, 1,641,238条, 1,715.78MB, 41天  
3. **OKX全生态**: 51文件, 14,226条, 25.87MB, 17天
4. **恐慌监控洗盘**: 25文件, 24,427条, 14.95MB, 23天
5. **11信号日线总**: 10文件, 2,846条, 0.59MB, 5天
6. **逃顶信号系统**: 3文件, 56,142条, 11.97MB, 1天
7. **价格位置预警系统**: 6文件, 791,761条, 177.89MB, 2天
8. **27币涨跌幅追踪系统**: (新增系统,数据正在累积)

### 无JSONL数据的系统 (6个)

1. **锚点系统（实盘）**: API实时数据
2. **OKX利润分析**: API实时数据
3. **数据管理与备份**: 管理工具
4. **重大事件监控**: 聚合其他系统数据
5. **数据采集健康监控**: 监控工具
6. **TG消息推送**: 推送工具

### 全局统计

- **总JSONL文件数**: 196个
- **总记录数**: 3,067,454条
- **总数据大小**: ~2.08 GB
- **最早数据**: 2025-12-25
- **最新数据**: 2026-02-16
- **跨度**: 53天

---

## 📝 JSONL文件命名规范

1. **按天存储**: `{prefix}_YYYYMMDD.jsonl`
   - 例: `sar_1min_20260201.jsonl`, `okx_trades_20260201.jsonl`

2. **按币种存储**: `{SYMBOL}.jsonl`
   - 例: `BTC.jsonl`, `ETH.jsonl`

3. **聚合文件**: `{功能描述}.jsonl`
   - 例: `okx_day_change.jsonl`, `latest_sar_slope.jsonl`

---

## 🔍 如何查看JSONL数据

### 方法1: 数据管理页面
访问: https://9002-xxx.sandbox.novita.ai/data-management

### 方法2: 命令行
```bash
# 查看文件记录数
cd /home/user/webapp/data
wc -l {directory}/{file}.jsonl

# 查看文件内容
cat {directory}/{file}.jsonl | jq '.'

# 查看最新几条
tail -n 5 {directory}/{file}.jsonl | jq '.'
```

### 方法3: Python脚本
```python
import json
with open('/home/user/webapp/data/{directory}/{file}.jsonl', 'r') as f:
    for line in f:
        data = json.loads(line)
        print(json.dumps(data, indent=2, ensure_ascii=False))
```

---

**文档生成时间**: 2026-02-16  
**数据统计截止**: 2026-02-16 16:50
