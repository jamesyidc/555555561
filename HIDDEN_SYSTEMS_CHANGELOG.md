# 系统隐藏变更记录

## 变更日期：2026-02-16

## 变更原因

根据系统迭代和功能合并，部分旧系统已停止运行并被新系统替代，为避免用户混淆，将已停用系统从数据管理界面隐藏。

---

## 🔴 已隐藏的系统

### 1. 支撑压力(大盘) 🎯

**停止日期**: 2026-02-07  
**停止原因**: 已被"价格位置预警系统 v2.0.5"完全替代  

**数据存储目录**:
- `support_resistance_jsonl/` (708,895 条记录)
- `support_resistance_daily/` (901,992 条记录，41天数据)

**历史数据量**:
- 文件数: 45个
- 记录数: 1,641,238 条 (~164万)
- 数据大小: 1,715.78 MB (~1.67 GB)
- 时间跨度: 2025-12-25 ~ 2026-02-07 (41天)

**功能说明**:
- 监控27个币种的支撑位和阻力位
- 7天和48小时双周期计算
- 4种预警场景（position ≤5% 或 ≥95%）
- 每5分钟采集一次数据

**替代方案**: 
使用新版"价格位置预警系统"，访问地址：
- https://9002-xxx.sandbox.novita.ai/price-position

---

### 2. 逃顶信号系统 🚨

**停止日期**: 2026-01-28  
**停止原因**: 功能已合并到"价格位置预警系统"  

**数据存储目录**:
- `escape_signal_jsonl/` 

**历史数据量**:
- 文件数: 3个
- 记录数: 56,142 条
- 数据大小: 11.97 MB
- 时间跨度: 2026-01-28 (1天)

**功能说明**:
- 2小时顶部逃离信号监控
- 价格突破检测
- 与重大事件监控系统联动

**替代方案**: 
功能已整合到"价格位置预警系统"和"重大事件监控"系统中

---

## ✅ 当前活跃系统（共6个）

数据管理界面现在只显示以下正在运行的系统：

### 1. 📈 SAR趋势系统
- **文件数**: 50
- **记录数**: 537,535 (~54万)
- **大小**: 148.20 MB
- **时间跨度**: 2026-02-01 ~ 2026-02-16 (16天)
- **状态**: ✅ 运行中

### 2. 💹 OKX全生态
- **文件数**: 51
- **记录数**: 14,250 (~1.4万)
- **大小**: 26.01 MB
- **时间跨度**: 2026-01-21 ~ 2026-02-16 (17天)
- **状态**: ✅ 运行中

### 3. ⚠️ 恐慌监控洗盘
- **文件数**: 25
- **记录数**: 24,465 (~2.4万)
- **大小**: 14.98 MB
- **时间跨度**: 2026-01-15 ~ 2026-02-10 (23天)
- **状态**: ✅ 运行中

### 4. 🔔 11信号日线总
- **文件数**: 10
- **记录数**: 2,846
- **大小**: 0.59 MB
- **时间跨度**: 2026-02-11 ~ 2026-02-15 (5天)
- **状态**: ✅ 运行中

### 5. 📍 价格位置预警系统
- **文件数**: 6
- **记录数**: 791,835 (~79万)
- **大小**: 178.34 MB
- **时间跨度**: 2026-02-15 ~ 2026-02-16 (2天)
- **状态**: ✅ 运行中（新版v2.0.5）
- **访问**: https://9002-xxx.sandbox.novita.ai/price-position

### 6. 📉 27币涨跌幅追踪系统
- **文件数**: 20
- **记录数**: 22,496 (~2.2万)
- **大小**: 58.08 MB
- **时间跨度**: 2026-01-28 ~ 2026-02-16 (20天)
- **状态**: ✅ 运行中

---

## 📊 数据对比

### 隐藏前
- 显示系统: 8个
- 总文件数: 196个
- 总记录数: 3,067,454 条 (~307万)
- 总大小: 2.08 GB

### 隐藏后
- 显示系统: 6个 ✅
- 总文件数: 162个
- 总记录数: 1,393,427 条 (~139万)
- 总大小: 426.20 MB

### 已归档数据
- 归档系统: 2个
- 文件数: 48个
- 记录数: 1,697,380 条 (~170万)
- 大小: 1,727.75 MB (~1.69 GB)

---

## 🔧 技术实现

### 修改的文件

**1. `generate_system_grouped_data.py`**
```python
# 移除了两个系统的映射
# 添加了 ARCHIVED_SYSTEMS 区域用于记录

ARCHIVED_SYSTEMS = {
    "支撑压力(大盘)_已停用": {
        "dirs": ["support_resistance_jsonl", "support_resistance_daily"],
        "stopped_date": "2026-02-07",
        "reason": "已被价格位置预警系统v2.0.5替代",
        "icon": "🎯"
    },
    "逃顶信号系统_已停用": {
        "dirs": ["escape_signal_jsonl"],
        "stopped_date": "2026-01-28",
        "reason": "已合并到价格位置预警系统",
        "icon": "🚨"
    }
}
```

**2. `data/system_grouped_data.json`**
- 重新生成，移除了已停用系统的数据
- 数据管理界面读取此文件显示系统列表

### 命令执行

```bash
# 重新生成系统分组数据
python3 generate_system_grouped_data.py

# 输出结果
✅ 数据已保存到: /home/user/webapp/data/system_grouped_data.json

# 显示6个活跃系统
📈 SAR趋势系统
💹 OKX全生态
⚠️ 恐慌监控洗盘
🔔 11信号日线总
📍 价格位置预警系统
📉 27币涨跌幅追踪系统
```

---

## 📁 数据归档说明

### 历史数据保留

虽然从界面隐藏，但**所有历史数据文件仍然保留在磁盘上**，位于：

```
/home/user/webapp/data/
├── support_resistance_jsonl/      # 保留 ✅
├── support_resistance_daily/       # 保留 ✅
└── escape_signal_jsonl/            # 保留 ✅
```

### 数据用途

这些历史数据可用于：
1. ✅ 回测分析
2. ✅ 算法验证
3. ✅ 模型训练
4. ✅ 数据对比
5. ✅ 系统迁移验证

### 访问方式

如需访问历史数据，可通过以下方式：

**1. 命令行**
```bash
cd /home/user/webapp/data/support_resistance_daily
ls -lah
tail -n 1 support_resistance_20260207.jsonl | python3 -m json.tool
```

**2. Python脚本**
```python
import json

# 读取支撑压力历史数据
with open('/home/user/webapp/data/support_resistance_daily/support_resistance_20260207.jsonl', 'r') as f:
    for line in f:
        data = json.loads(line)
        # 处理数据
```

**3. 数据管理页面 (文件浏览器)**
- 访问: https://9002-xxx.sandbox.novita.ai/data-management
- 虽然不在系统列表显示，但文件仍存在于服务器

---

## 🔄 恢复方法

如果需要重新显示已隐藏的系统，修改 `generate_system_grouped_data.py`:

```python
# 将 ARCHIVED_SYSTEMS 中的系统移回 SYSTEM_MAPPING
SYSTEM_MAPPING = {
    # ... 现有系统 ...
    "支撑压力(大盘)": {
        "dirs": ["support_resistance_jsonl", "support_resistance_daily"],
        "icon": "🎯",
        "color": "#3B82F6"
    },
    # ...
}
```

然后重新生成数据：
```bash
python3 generate_system_grouped_data.py
```

---

## 📝 相关文档

- **系统映射说明**: `SYSTEM_JSONL_MAPPING.md`
- **活跃系统列表**: `ACTIVE_SYSTEMS_JSONL_DATA.md`
- **支撑压力系统说明**: `SUPPORT_RESISTANCE_EXPLANATION.md`
- **价格位置对比**: `PRICE_POSITION_VS_SUPPORT_RESISTANCE.md`

---

## ⚡ 影响范围

### ✅ 不受影响的功能
- 首页系统卡片显示
- 实时数据采集
- API接口调用
- Telegram通知
- 其他活跃系统的数据展示

### 🔄 受影响的功能
- 数据管理页面系统列表（减少2个系统）
- 系统统计数字（减少约170万条记录）
- 备份文件大小（减少约1.7GB）

---

## 🎯 用户体验改进

### 优点
✅ 界面更简洁，只显示运行中的系统  
✅ 避免用户查看已停用系统的过时数据  
✅ 减少数据扫描时间  
✅ 降低备份文件大小  
✅ 统计数据更准确反映当前状态  

### 历史数据保护
✅ 所有历史文件完整保留  
✅ 可随时通过代码恢复显示  
✅ 支持数据导出和分析  
✅ 归档系统独立记录便于追溯  

---

**变更执行人**: AI Assistant  
**变更审核**: 待确认  
**Git Commit**: `99f886f`  
**生效时间**: 2026-02-16 11:05:00  
**文档版本**: v1.0  
