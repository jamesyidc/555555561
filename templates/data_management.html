<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®ç®¡ç†ä¸å¤‡ä»½ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: #fff;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .panel {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .panel h2 {
            font-size: 1.4em;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-icon {
            font-size: 1.5em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-card h3 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.secondary {
            background: #6c757d;
        }
        
        .btn.danger {
            background: #dc3545;
        }
        
        .systems-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .system-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .system-item h3 {
            font-size: 1.1em;
            margin-bottom: 8px;
            color: #333;
        }
        
        .system-info {
            font-size: 0.9em;
            color: #666;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .system-info span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .backup-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .backup-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .backup-info h4 {
            font-size: 1em;
            margin-bottom: 5px;
            color: #333;
        }
        
        .backup-info p {
            font-size: 0.85em;
            color: #666;
            margin: 3px 0;
        }
        
        .backup-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85em;
        }
        
        .loading {
            text-align: center;
            padding: 30px;
            color: #666;
        }
        
        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .hidden {
            display: none;
        }
        
        .system-card {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .system-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .system-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 8px;
            font-size: 0.95em;
            color: #555;
        }
        
        .toggle-icon {
            font-size: 1.2em;
            color: #999;
            transition: transform 0.3s;
        }
        
        .system-details {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .directory-section {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .daily-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .day-stat {
            background: #fff;
            padding: 12px;
            border-radius: 6px;
            border-left: 3px solid #667eea;
        }
        
        .day-date {
            font-weight: bold;
            color: #333;
            margin-bottom: 6px;
            font-size: 0.95em;
        }
        
        .day-info {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.85em;
            color: #666;
        }
        
        .file-list {
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 15px;
            color: #fff;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .back-link:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: #fff;
            transform: translateY(-2px);
        }
        
        .tech-doc-panel {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .tech-doc-header {
            cursor: pointer;
            user-select: none;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .tech-doc-header:hover {
            opacity: 0.95;
        }
        
        .tech-doc-content {
            display: none;
            margin-top: 20px;
        }
        
        details {
            margin: 15px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        details summary {
            padding: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #667eea;
        }
        
        details[open] summary {
            margin-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
        }
        
        code {
            background: rgba(102, 126, 234, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #764ba2;
        }
        
        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #e0e0e0;
            line-height: 1.5;
        }
        
        .doc-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .doc-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 12px;
            text-align: left;
        }
        
        .doc-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
        
        <div class="header">
            <h1>ğŸ—„ï¸ æ•°æ®ç®¡ç†ä¸å¤‡ä»½ç³»ç»Ÿ</h1>
            <p>ç»Ÿè®¡ã€å¤‡ä»½ã€æ¢å¤æ‚¨çš„æ‰€æœ‰JSONLæ•°æ®</p>
        </div>
        
        <!-- ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£ -->
        <div class="tech-doc-panel">
            <div class="tech-doc-header" onclick="toggleTechDoc()">
                <h2 style="margin: 0;">ğŸ“š ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£</h2>
                <span id="tech-doc-toggle">â–¼ å±•å¼€</span>
            </div>
            <div class="tech-doc-content" id="tech-doc-content">
                
                <!-- ç³»ç»Ÿè¿è¡Œé€»è¾‘ -->
                <details open>
                    <summary>ğŸ”„ ç³»ç»Ÿè¿è¡Œé€»è¾‘</summary>
                    <div style="padding: 15px; line-height: 1.8;">
                        <p><strong>1. æ•°æ®ç»Ÿè®¡å±‚</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>æ‰«æ <code>/home/user/webapp/data/</code> ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•</li>
                            <li>ç»Ÿè®¡æ¯ä¸ªç›®å½•çš„æ–‡ä»¶æ•°é‡ã€JSONLè®°å½•æ•°ã€æ–‡ä»¶å¤§å°</li>
                            <li>è®¡ç®—æ€»è®¡æ•°æ®ï¼ˆç›®å½•æ•°ã€æ–‡ä»¶æ•°ã€è®°å½•æ•°ã€å­˜å‚¨å¤§å°ï¼‰</li>
                            <li>é€šè¿‡API <code>/api/data-management/stats</code> è¿”å›JSONæ•°æ®</li>
                        </ul>
                        
                        <p><strong>2. å¤‡ä»½ç®¡ç†å±‚</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>åˆ›å»ºå¤‡ä»½ï¼šPOST <code>/api/data-management/backup</code></li>
                            <li>é€‰æ‹©ç³»ç»Ÿï¼ˆæ”¯æŒå¤šé€‰ï¼‰ï¼Œåˆ›å»ºtar.gzå‹ç¼©åŒ…</li>
                            <li>å¤‡ä»½æ–‡ä»¶ä¿å­˜åˆ° <code>/home/user/webapp/backups/</code></li>
                            <li>å‘½åè§„åˆ™ï¼š<code>backup_YYYYMMDD_HHMMSS.tar.gz</code></li>
                        </ul>
                        
                        <p><strong>3. æ¢å¤ç®¡ç†å±‚</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>è§£å‹å¤‡ä»½æ–‡ä»¶åˆ°ä¸´æ—¶ç›®å½•</li>
                            <li>éªŒè¯æ–‡ä»¶å®Œæ•´æ€§</li>
                            <li>æ¢å¤åˆ°åŸå§‹ç›®å½•ï¼ˆå¯é€‰æ‹©è¦†ç›–æˆ–ä¿ç•™åŸæ–‡ä»¶ï¼‰</li>
                            <li>è‡ªåŠ¨å¤‡ä»½åŸæ–‡ä»¶ï¼ˆæ·»åŠ .backupåç¼€ï¼‰</li>
                        </ul>
                        
                        <p><strong>4. å‰ç«¯å±•ç¤ºå±‚</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>å®æ—¶ç»Ÿè®¡å¡ç‰‡ï¼šæ˜¾ç¤ºæ€»ç›®å½•æ•°ã€æ–‡ä»¶æ•°ã€è®°å½•æ•°ã€å¤§å°</li>
                            <li>ç³»ç»Ÿè¯¦æƒ…åˆ—è¡¨ï¼šæ¯ä¸ªç³»ç»Ÿçš„æ–‡ä»¶åˆ†å¸ƒå’Œæœ€è¿‘7å¤©æ•°æ®</li>
                            <li>å¤‡ä»½åˆ—è¡¨ï¼šæ˜¾ç¤ºæ‰€æœ‰å†å²å¤‡ä»½ï¼Œæ”¯æŒä¸‹è½½å’Œæ¢å¤</li>
                            <li>è‡ªåŠ¨åˆ·æ–°ï¼šé¡µé¢æ¯60ç§’è‡ªåŠ¨æ›´æ–°æ•°æ®</li>
                        </ul>
                    </div>
                </details>
                
                <!-- æ•°æ®æµç¨‹å›¾ -->
                <details>
                    <summary>ğŸ“Š æ•°æ®æµç¨‹å›¾</summary>
                    <pre style="font-family: monospace; color: #333;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å„ç³»ç»Ÿæ•°æ®é‡‡é›†å™¨ (PM2)                          â”‚
â”‚  (price-position, signal, sar, panic, financial, etc.)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ æ¯3-5åˆ†é’Ÿå†™å…¥JSONLæ–‡ä»¶
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ•°æ®å­˜å‚¨å±‚ (/home/user/webapp/data/)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€â”€ new_high_low/           # åˆ›æ–°é«˜ä½æ•°æ®                      â”‚
â”‚  â”œâ”€â”€ price_position/         # ä»·æ ¼ä½ç½®æ•°æ®                      â”‚
â”‚  â”œâ”€â”€ price_comparison_jsonl/ # æ”¯æ’‘å‹åŠ›æ•°æ®                      â”‚
â”‚  â”œâ”€â”€ signal_stats/           # ä¿¡å·ç»Ÿè®¡æ•°æ®                      â”‚
â”‚  â”œâ”€â”€ sar_jsonl/              # SARæŒ‡æ ‡æ•°æ®                       â”‚
â”‚  â”œâ”€â”€ sar_bias_stats/         # SARåå‘ç»Ÿè®¡                       â”‚
â”‚  â”œâ”€â”€ panic_jsonl/            # ææ…Œæ´—ç›˜æŒ‡æ•°                      â”‚
â”‚  â”œâ”€â”€ financial_indicators/   # è´¢ç»æŒ‡æ ‡                          â”‚
â”‚  â”œâ”€â”€ coin_change_tracker/    # å¸ç§æ¶¨è·Œè¿½è¸ª                      â”‚
â”‚  â”œâ”€â”€ price_speed_10m/        # ä»·æ ¼å˜åŒ–é€Ÿåº¦                      â”‚
â”‚  â””â”€â”€ (29+ ä¸ªæ•°æ®ç›®å½•)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ APIè¯»å–
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Flask API - æ•°æ®ç®¡ç†ä¸å¤‡ä»½ç³»ç»Ÿ                          â”‚
â”‚              /api/data-management/*                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GET  /stats        # ç»Ÿè®¡æ‰€æœ‰æ•°æ®                               â”‚
â”‚  POST /backup       # åˆ›å»ºå¤‡ä»½                                  â”‚
â”‚  GET  /backups      # åˆ—å‡ºæ‰€æœ‰å¤‡ä»½                               â”‚
â”‚  POST /restore      # æ¢å¤å¤‡ä»½                                  â”‚
â”‚  DELETE /backup     # åˆ é™¤å¤‡ä»½                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTP JSON
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å‰ç«¯é¡µé¢ (HTML + JavaScript)                     â”‚
â”‚                /data-management                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ•°æ®ç»Ÿè®¡é¢æ¿] å®æ—¶æ˜¾ç¤ºæ€»è®¡å’Œåˆ†ç³»ç»Ÿç»Ÿè®¡                          â”‚
â”‚  [å¤‡ä»½ç®¡ç†é¢æ¿] åˆ›å»ºæ–°å¤‡ä»½ï¼Œé€‰æ‹©ç³»ç»Ÿ                              â”‚
â”‚  [å¤‡ä»½åˆ—è¡¨] æ˜¾ç¤ºæ‰€æœ‰å†å²å¤‡ä»½ï¼Œæ“ä½œ(æ¢å¤/åˆ é™¤/ä¸‹è½½)                â”‚
â”‚  [ç³»ç»Ÿè¯¦æƒ…] æŠ˜å å±•å¼€å„ç³»ç»Ÿæ•°æ®è¯¦æƒ…                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
                </details>
                
                <!-- JSONLæ–‡ä»¶æ ¼å¼è¯¦è§£ -->
                <details>
                    <summary>ğŸ“„ JSONLæ–‡ä»¶æ ¼å¼è¯¦è§£</summary>
                    <div style="padding: 15px;">
                        <p><strong>JSONL (JSON Lines) æ ¼å¼è¯´æ˜ï¼š</strong></p>
                        <p style="color: #666; margin-bottom: 15px;">æ¯è¡Œä¸€ä¸ªå®Œæ•´çš„JSONå¯¹è±¡ï¼Œä¾¿äºè¿½åŠ å†™å…¥å’Œæµå¼è¯»å–ã€‚</p>
                        
                        <p><strong>1. åˆ›æ–°é«˜ä½äº‹ä»¶ (new_high_low_events_*.jsonl)</strong></p>
                        <pre>{
  "time": "2026-02-16 23:30:00",
  "timestamp": 1771253400.0,
  "symbol": "BTC",
  "event_type": "new_high",
  "price": 68900.5,
  "previous_high": 68589.1,
  "previous_time": "2026-02-16 22:22:26"
}</pre>
                        
                        <p><strong>2. æ”¯æ’‘å‹åŠ›çªç ´ (price_breakthrough_events.jsonl)</strong></p>
                        <pre>{
  "symbol": "SOL-USDT-SWAP",
  "event_type": "new_low",
  "price": 92.11,
  "previous_extreme_price": 92.33,
  "event_time": "2026-02-05 00:24:01"
}</pre>
                        
                        <p><strong>3. SARåå‘ç»Ÿè®¡ (bias_stats_*.jsonl)</strong></p>
                        <pre>{
  "beijing_time": "2026-02-16 23:00:00",
  "symbols_above_80": ["BTC-USDT-SWAP", "ETH-USDT-SWAP"],
  "bullish_ratio": 85.5,
  "bearish_ratio": 14.5
}</pre>
                        
                        <p><strong>4. å¸ç§æ¶¨è·Œè¿½è¸ª (coin_change_*.jsonl)</strong></p>
                        <pre>{
  "snapshot_time": "2026-02-16 23:00:00",
  "BTC-USDT": {
    "current_price": 68900.5,
    "change_24h": 2.5,
    "change_percent": 3.77
  }
}</pre>
                    </div>
                </details>
                
                <!-- æ ¸å¿ƒåŠŸèƒ½è¯¦è§£ -->
                <details>
                    <summary>âš™ï¸ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</summary>
                    <div style="padding: 15px; line-height: 1.8;">
                        <p><strong>åŠŸèƒ½1: æ•°æ®ç»Ÿè®¡</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li><strong>å®æ—¶æ‰«æ</strong>: éå†dataç›®å½•æ‰€æœ‰å­ç›®å½•</li>
                            <li><strong>æ™ºèƒ½ç»Ÿè®¡</strong>: è‡ªåŠ¨è¯†åˆ«JSONLæ–‡ä»¶ï¼Œé€è¡Œè®¡æ•°</li>
                            <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: ä»…ç»Ÿè®¡å…ƒæ•°æ®ï¼Œä¸åŠ è½½å®Œæ•´å†…å®¹</li>
                            <li><strong>åˆ†çº§å±•ç¤º</strong>: æ€»è®¡â†’ç³»ç»Ÿâ†’ç›®å½•â†’æ–‡ä»¶å››çº§ç»“æ„</li>
                        </ul>
                        
                        <p><strong>åŠŸèƒ½2: ç³»ç»Ÿå¤‡ä»½</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li><strong>å¤šé€‰å¤‡ä»½</strong>: æ”¯æŒé€‰æ‹©å¤šä¸ªç³»ç»ŸåŒæ—¶å¤‡ä»½</li>
                            <li><strong>å‹ç¼©å­˜å‚¨</strong>: ä½¿ç”¨tar.gzæ ¼å¼ï¼ŒèŠ‚çœç©ºé—´</li>
                            <li><strong>å®Œæ•´æ€§ä¿è¯</strong>: å¤‡ä»½åŒ…å«æ‰€æœ‰ç›¸å…³æ–‡ä»¶</li>
                            <li><strong>å‘½åè§„èŒƒ</strong>: æ—¶é—´æˆ³å‘½åï¼Œä¾¿äºè¿½æº¯</li>
                        </ul>
                        
                        <p><strong>åŠŸèƒ½3: æ•°æ®æ¢å¤</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li><strong>å®‰å…¨æ¢å¤</strong>: æ¢å¤å‰è‡ªåŠ¨å¤‡ä»½åŸæ–‡ä»¶</li>
                            <li><strong>é€‰æ‹©æ€§æ¢å¤</strong>: å¯é€‰æ‹©è¦†ç›–æˆ–è·³è¿‡</li>
                            <li><strong>éªŒè¯æœºåˆ¶</strong>: è§£å‹åéªŒè¯æ–‡ä»¶å®Œæ•´æ€§</li>
                            <li><strong>å›æ»šæ”¯æŒ</strong>: ä¿ç•™.backupåç¼€æ–‡ä»¶</li>
                        </ul>
                        
                        <p><strong>åŠŸèƒ½4: æœ€è¿‘7å¤©æ•°æ®</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li><strong>æŒ‰æ—¥ç»Ÿè®¡</strong>: æ˜¾ç¤ºæ¯å¤©çš„æ–‡ä»¶æ•°å’Œè®°å½•æ•°</li>
                            <li><strong>è¶‹åŠ¿åˆ†æ</strong>: å¿«é€Ÿäº†è§£æ•°æ®å¢é•¿æƒ…å†µ</li>
                            <li><strong>å¼‚å¸¸æ£€æµ‹</strong>: è¯†åˆ«æ•°æ®ç©ºç¼ºæˆ–å¼‚å¸¸</li>
                        </ul>
                    </div>
                </details>
                
                <!-- ç³»ç»Ÿä¾èµ–æ¸…å• -->
                <details>
                    <summary>ğŸ”§ ç³»ç»Ÿä¾èµ–æ¸…å•</summary>
                    <div style="padding: 15px;">
                        <p><strong>1. PM2å®ˆæŠ¤è¿›ç¨‹ (22ä¸ª)</strong></p>
                        <table class="doc-table">
                            <tr>
                                <th>è¿›ç¨‹åç§°</th>
                                <th>è„šæœ¬</th>
                                <th>åŠŸèƒ½</th>
                            </tr>
                            <tr>
                                <td>price-position-collector</td>
                                <td>price_position_collector.py</td>
                                <td>ä»·æ ¼ä½ç½®æ•°æ®é‡‡é›†ï¼ˆæ¯5åˆ†é’Ÿï¼‰</td>
                            </tr>
                            <tr>
                                <td>new-high-low-collector</td>
                                <td>new_high_low_collector.py</td>
                                <td>åˆ›æ–°é«˜ä½æ£€æµ‹ï¼ˆæ¯3åˆ†é’Ÿï¼‰</td>
                            </tr>
                            <tr>
                                <td>signal-collector</td>
                                <td>signal_collector.py</td>
                                <td>ä¿¡å·æ•°æ®é‡‡é›†</td>
                            </tr>
                            <tr>
                                <td>sar-slope-collector</td>
                                <td>sar_jsonl_collector.py</td>
                                <td>SARæŒ‡æ ‡é‡‡é›†ï¼ˆæ¯5åˆ†é’Ÿï¼‰</td>
                            </tr>
                            <tr>
                                <td>sar-bias-stats-collector</td>
                                <td>sar_bias_stats_collector.py</td>
                                <td>SARåå‘ç»Ÿè®¡ï¼ˆæ¯5åˆ†é’Ÿï¼‰</td>
                            </tr>
                            <tr>
                                <td>panic-wash-collector</td>
                                <td>panic_wash_collector.py</td>
                                <td>ææ…Œæ´—ç›˜æŒ‡æ•°é‡‡é›†</td>
                            </tr>
                            <tr>
                                <td>financial-indicators-collector</td>
                                <td>financial_indicators_collector.py</td>
                                <td>è´¢ç»æŒ‡æ ‡é‡‡é›†</td>
                            </tr>
                            <tr>
                                <td>coin-change-tracker</td>
                                <td>coin_change_tracker.py</td>
                                <td>å¸ç§æ¶¨è·Œè¿½è¸ªï¼ˆæ¯5åˆ†é’Ÿï¼‰</td>
                            </tr>
                            <tr>
                                <td>price-speed-collector</td>
                                <td>price_speed_collector.py</td>
                                <td>ä»·æ ¼å˜åŒ–é€Ÿåº¦</td>
                            </tr>
                            <tr>
                                <td colspan="3" style="text-align: center; color: #999;">...ä»¥åŠå…¶ä»–13ä¸ªé‡‡é›†å™¨</td>
                            </tr>
                        </table>
                        
                        <p><strong>2. Pythonä¾èµ–åŒ…</strong></p>
                        <pre>flask>=2.0.0              # Webæ¡†æ¶
pytz                      # æ—¶åŒºå¤„ç†
requests                  # HTTPè¯·æ±‚
json, os, pathlib         # æ ‡å‡†åº“
tarfile                   # å¤‡ä»½å‹ç¼©
shutil                    # æ–‡ä»¶æ“ä½œ</pre>
                        
                        <p><strong>3. Flask APIè·¯ç”±</strong></p>
                        <table class="doc-table">
                            <tr>
                                <th>è·¯ç”±</th>
                                <th>æ–¹æ³•</th>
                                <th>åŠŸèƒ½</th>
                            </tr>
                            <tr>
                                <td>/data-management</td>
                                <td>GET</td>
                                <td>æ¸²æŸ“ç®¡ç†é¡µé¢</td>
                            </tr>
                            <tr>
                                <td>/api/data-management/stats</td>
                                <td>GET</td>
                                <td>è·å–æ•°æ®ç»Ÿè®¡</td>
                            </tr>
                            <tr>
                                <td>/api/data-management/backup</td>
                                <td>POST</td>
                                <td>åˆ›å»ºå¤‡ä»½</td>
                            </tr>
                            <tr>
                                <td>/api/data-management/backups</td>
                                <td>GET</td>
                                <td>åˆ—å‡ºæ‰€æœ‰å¤‡ä»½</td>
                            </tr>
                            <tr>
                                <td>/api/data-management/restore</td>
                                <td>POST</td>
                                <td>æ¢å¤å¤‡ä»½</td>
                            </tr>
                            <tr>
                                <td>/api/data-management/backup/&lt;file&gt;</td>
                                <td>DELETE</td>
                                <td>åˆ é™¤å¤‡ä»½</td>
                            </tr>
                        </table>
                        
                        <p><strong>4. æ•°æ®ç›®å½•ç»“æ„ (29+ä¸ªç³»ç»Ÿ)</strong></p>
                        <pre>/home/user/webapp/
â”œâ”€â”€ data/                           # æ•°æ®æ ¹ç›®å½•
â”‚   â”œâ”€â”€ new_high_low/              # åˆ›æ–°é«˜ä½ç³»ç»Ÿ
â”‚   â”œâ”€â”€ price_position/            # ä»·æ ¼ä½ç½®é¢„è­¦
â”‚   â”œâ”€â”€ price_comparison_jsonl/    # æ”¯æ’‘å‹åŠ›ç³»ç»Ÿ
â”‚   â”œâ”€â”€ signal_stats/              # ä¿¡å·ç»Ÿè®¡
â”‚   â”œâ”€â”€ sar_jsonl/                 # SARæŒ‡æ ‡ï¼ˆ29ä¸ªå¸ç§ï¼‰
â”‚   â”œâ”€â”€ sar_bias_stats/            # SARåå‘ç»Ÿè®¡
â”‚   â”œâ”€â”€ panic_jsonl/               # ææ…Œæ´—ç›˜æŒ‡æ•°
â”‚   â”œâ”€â”€ financial_indicators/      # è´¢ç»æŒ‡æ ‡
â”‚   â”œâ”€â”€ coin_change_tracker/       # å¸ç§æ¶¨è·Œè¿½è¸ª
â”‚   â”œâ”€â”€ price_speed_10m/           # ä»·æ ¼å˜åŒ–é€Ÿåº¦
â”‚   â”œâ”€â”€ liquidation_1h/            # 1å°æ—¶çˆ†ä»“æ•°æ®
â”‚   â”œâ”€â”€ okx_trading_jsonl/         # OKXäº¤æ˜“æ•°æ®
â”‚   â””â”€â”€ ... (20+ æ›´å¤šç³»ç»Ÿ)
â”‚
â”œâ”€â”€ backups/                        # å¤‡ä»½ç›®å½•
â”‚   â””â”€â”€ backup_*.tar.gz
â”‚
â””â”€â”€ templates/
    â””â”€â”€ data_management.html        # ç®¡ç†é¡µé¢</pre>
                        
                        <p><strong>5. ç¯å¢ƒå˜é‡</strong></p>
                        <pre>TZ=Asia/Shanghai          # åŒ—äº¬æ—¶åŒº
FLASK_ENV=production      # Flaskç¯å¢ƒ
FLASK_PORT=9002           # æœåŠ¡ç«¯å£</pre>
                    </div>
                </details>
                
                <!-- ç»´æŠ¤æŒ‡å— -->
                <details>
                    <summary>ğŸ”¨ ç»´æŠ¤æŒ‡å—</summary>
                    <div style="padding: 15px; line-height: 1.8;">
                        <p><strong>æŸ¥çœ‹æ•°æ®ç»Ÿè®¡</strong></p>
                        <pre>curl http://127.0.0.1:9002/api/data-management/stats | jq</pre>
                        
                        <p><strong>åˆ›å»ºå®Œæ•´å¤‡ä»½</strong></p>
                        <pre># é€šè¿‡é¡µé¢æ“ä½œï¼ˆæ¨èï¼‰ï¼šé€‰æ‹©æ‰€æœ‰ç³»ç»Ÿ â†’ ç‚¹å‡»"åˆ›å»ºå¤‡ä»½"
# æˆ–é€šè¿‡APIï¼š
curl -X POST http://127.0.0.1:9002/api/data-management/backup \
  -H "Content-Type: application/json" \
  -d '{"systems": ["all"]}'</pre>
                        
                        <p><strong>æ¢å¤å¤‡ä»½</strong></p>
                        <pre># é€šè¿‡é¡µé¢ï¼šåœ¨å¤‡ä»½åˆ—è¡¨ä¸­ç‚¹å‡»"æ¢å¤"æŒ‰é’®
# æ‰‹åŠ¨æ¢å¤ï¼š
tar -xzf backups/backup_20260216_153000.tar.gz -C /tmp/
cp -r /tmp/data/* data/
pm2 restart all</pre>
                        
                        <p><strong>æ¸…ç†æ—§å¤‡ä»½</strong></p>
                        <pre># åˆ é™¤30å¤©å‰çš„å¤‡ä»½
find backups/ -name "backup_*.tar.gz" -mtime +30 -delete</pre>
                        
                        <p><strong>ç›‘æ§ç£ç›˜ç©ºé—´</strong></p>
                        <pre># æŸ¥çœ‹dataç›®å½•å¤§å°
du -sh data/

# æŸ¥çœ‹backupsç›®å½•å¤§å°
du -sh backups/

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h</pre>
                        
                        <p><strong>é‡å¯æ‰€æœ‰é‡‡é›†å™¨</strong></p>
                        <pre>pm2 restart all</pre>
                    </div>
                </details>
                
                <!-- Gitæäº¤è®°å½• -->
                <details>
                    <summary>ğŸ“ Gitæäº¤è®°å½•</summary>
                    <pre>20fd5cc - feat: Include support/resistance system data in backup
57dcde7 - feat: Add data backup button and API endpoint
4b54231 - feat: æ·»åŠ å®Œæ•´çš„æ•°æ®ç®¡ç†å’Œå¤‡ä»½æ¢å¤ç³»ç»Ÿ
471dcdc - feat: Add sender and receiver address fields to backup</pre>
                </details>
                
            </div>
        </div>
        
        <div id="alertContainer"></div>
        
        <div class="panels">
            <!-- æ•°æ®ç»Ÿè®¡é¢æ¿ -->
            <div class="panel">
                <h2><span class="panel-icon">ğŸ“Š</span> æ•°æ®ç»Ÿè®¡æ¦‚è§ˆ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>æ€»ç›®å½•æ•°</h3>
                        <div class="value" id="totalDirs">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>æ€»æ–‡ä»¶æ•°</h3>
                        <div class="value" id="totalFiles">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>æ€»è®°å½•æ•°</h3>
                        <div class="value" id="totalRecords">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>æ€»å¤§å° (MB)</h3>
                        <div class="value" id="totalSize">-</div>
                    </div>
                </div>
                
                <button class="btn" onclick="scanData()">
                    ğŸ” é‡æ–°æ‰«ææ•°æ®
                </button>
            </div>
            
            <!-- å¤‡ä»½ç®¡ç†é¢æ¿ -->
            <div class="panel">
                <h2><span class="panel-icon">ğŸ’¾</span> å¤‡ä»½ç®¡ç†</h2>
                
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button class="btn" onclick="createBackup('full')">
                        ğŸ“¦ åˆ›å»ºå®Œæ•´å¤‡ä»½
                    </button>
                    <button class="btn secondary" onclick="createBackup('incremental')">
                        ğŸ“¥ åˆ›å»ºå¢é‡å¤‡ä»½
                    </button>
                </div>
                
                <!-- å‘é€æ–¹å’Œæ¥æ”¶æ–¹åœ°å€è¾“å…¥æ¡† -->
                <div style="margin-bottom: 20px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 500;">
                            ğŸ“¤ å‘é€æ–¹åœ°å€
                        </label>
                        <input type="text" 
                               id="senderAddress" 
                               placeholder="è¯·è¾“å…¥å‘é€æ–¹åœ°å€ (ä¾‹å¦‚: user@example.com æˆ– æœåŠ¡å™¨è·¯å¾„)"
                               style="width: 100%; padding: 10px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.95em; transition: border-color 0.3s;"
                               onfocus="this.style.borderColor='#667eea'"
                               onblur="this.style.borderColor='#e0e0e0'">
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 500;">
                            ğŸ“¥ æ¥æ”¶æ–¹åœ°å€
                        </label>
                        <input type="text" 
                               id="receiverAddress" 
                               placeholder="è¯·è¾“å…¥æ¥æ”¶æ–¹åœ°å€ (ä¾‹å¦‚: backup@server.com æˆ– /backup/path)"
                               style="width: 100%; padding: 10px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.95em; transition: border-color 0.3s;"
                               onfocus="this.style.borderColor='#667eea'"
                               onblur="this.style.borderColor='#e0e0e0'">
                    </div>
                </div>
                
                <div id="backupList" class="backup-list">
                    <div class="loading">åŠ è½½å¤‡ä»½åˆ—è¡¨</div>
                </div>
            </div>
        </div>
        
        <!-- å„ç³»ç»Ÿè¯¦ç»†æ•°æ® -->
        <div class="panel">
            <h2><span class="panel-icon">ğŸ“‚</span> å„ç³»ç»Ÿæ•°æ®è¯¦æƒ…</h2>
            
            <div id="systemsList" class="systems-list">
                <div class="loading">åŠ è½½ç³»ç»Ÿæ•°æ®</div>
            </div>
        </div>
    </div>
    
    <script>
        let statsData = null;
        
        // æŠ€æœ¯æ–‡æ¡£æŠ˜å æ§åˆ¶
        function toggleTechDoc() {
            const content = document.getElementById('tech-doc-content');
            const toggle = document.getElementById('tech-doc-toggle');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                toggle.textContent = 'â–² æ”¶èµ·';
            } else {
                content.style.display = 'none';
                toggle.textContent = 'â–¼ å±•å¼€';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶è·å–ç»Ÿè®¡æ•°æ®
        window.addEventListener('DOMContentLoaded', async () => {
            await loadStatistics();
            await loadBackupList();
        });
        
        // åŠ è½½ç»Ÿè®¡æ•°æ®
        async function loadStatistics() {
            try {
                const response = await fetch('/api/data-management/statistics');
                const result = await response.json();
                
                if (result.success) {
                    statsData = result.data;
                    displayStatistics(statsData);
                } else {
                    // å¦‚æœæ²¡æœ‰ç»Ÿè®¡æ•°æ®ï¼Œè‡ªåŠ¨æ‰«æ
                    showAlert('æš‚æ— ç»Ÿè®¡æ•°æ®ï¼Œæ­£åœ¨æ‰«æ...', 'info');
                    await scanData();
                }
            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
                showAlert('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
        function displayStatistics(data) {
            const summary = data.summary;
            
            document.getElementById('totalDirs').textContent = summary.total_directories;
            document.getElementById('totalFiles').textContent = summary.total_files.toLocaleString();
            document.getElementById('totalRecords').textContent = summary.total_records.toLocaleString();
            document.getElementById('totalSize').textContent = summary.total_size_mb.toFixed(2);
            
            // åŠ è½½ç³»ç»Ÿåˆ†ç»„æ•°æ®
            loadSystemsGrouped();
        }
        
        // åŠ è½½ç³»ç»Ÿåˆ†ç»„æ•°æ®
        async function loadSystemsGrouped() {
            try {
                const response = await fetch('/api/data-management/systems-grouped');
                const result = await response.json();
                
                if (result.success) {
                    displaySystemsGrouped(result.data);
                } else {
                    document.getElementById('systemsList').innerHTML = '<div style="padding: 20px; color: #999;">åŠ è½½ç³»ç»Ÿæ•°æ®å¤±è´¥</div>';
                }
            } catch (error) {
                console.error('åŠ è½½ç³»ç»Ÿæ•°æ®å¤±è´¥:', error);
                document.getElementById('systemsList').innerHTML = '<div style="padding: 20px; color: #999;">åŠ è½½ç³»ç»Ÿæ•°æ®å¤±è´¥</div>';
            }
        }
        
        // JSONLç›®å½•è¯´æ˜æ˜ å°„
        const dirDescriptions = {
            // ä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿ
            'price_position': 'ğŸ“Š å®æ—¶ä»·æ ¼ä½ç½®æ•°æ®ï¼ˆ48å°æ—¶/7å¤©é«˜ä½ç‚¹ã€é¢„è­¦ä¿¡å·ï¼‰ | ç”¨äºï¼šä»·æ ¼ä½ç½®é¢„è­¦ã€é‡å¤§äº‹ä»¶ç›‘æ§',
            'price_speed_jsonl': 'âš¡ ä»·æ ¼é€Ÿåº¦æ•°æ®ï¼ˆ1/5/15/60åˆ†é’Ÿæ¶¨è·Œé€Ÿåº¦ï¼‰ | ç”¨äºï¼šä»·æ ¼ä½ç½®é¢„è­¦ã€æ€¥æ¶¨æ€¥è·Œç›‘æ§',
            'price_speed_10m': 'ğŸ“ˆ 10åˆ†é’Ÿä»·æ ¼é€Ÿåº¦ç»Ÿè®¡ï¼ˆå¹³å‡/æœ€å¤§/æœ€å°/æ³¢åŠ¨ç‡ï¼‰ | ç”¨äºï¼šä»·æ ¼ä½ç½®é¢„è­¦ã€æ³¢åŠ¨ç‡åˆ†æ',
            
            // SARè¶‹åŠ¿ç³»ç»Ÿ
            'sar_jsonl': 'ğŸ¯ SARæŒ‡æ ‡æ•°æ®ï¼ˆæŠ›ç‰©çº¿è½¬å‘ã€è¶‹åŠ¿çŠ¶æ€ï¼‰ | ç”¨äºï¼šSARè¶‹åŠ¿ã€é‡å¤§äº‹ä»¶ã€OKXè‡ªåŠ¨äº¤æ˜“',
            'sar_slope_jsonl': 'ğŸ“ SARæ–œç‡æ•°æ®ï¼ˆè¶‹åŠ¿å¼ºåº¦ã€å˜åŒ–é€Ÿåº¦ï¼‰ | ç”¨äºï¼šSARè¶‹åŠ¿ã€OKXè‡ªåŠ¨äº¤æ˜“å…¥åœºåˆ¤æ–­',
            'sar_1min': 'â±ï¸ 1åˆ†é’Ÿç²’åº¦SARæ•°æ®ï¼ˆç²¾ç»†è¶‹åŠ¿åˆ¤æ–­ï¼‰ | ç”¨äºï¼šSARè¶‹åŠ¿ç²¾ç»†åˆ†æã€é«˜é¢‘äº¤æ˜“',
            'sar_bias_stats': 'ğŸ“Š SARä¹–ç¦»ç‡ç»Ÿè®¡ï¼ˆä»·æ ¼åç¦»SARç¨‹åº¦ï¼‰ | ç”¨äºï¼šSARè¶‹åŠ¿ã€æç«¯ä¹–ç¦»é¢„è­¦',
            
            // OKXå…¨ç”Ÿæ€
            'okx_trading_jsonl': 'ğŸ’¹ 24å°æ—¶æ¶¨è·Œå¹…æ•°æ®ï¼ˆä»·æ ¼/æ¶¨è·Œå¹…/æˆäº¤é‡ï¼‰ | ç”¨äºï¼šOKXå…¨ç”Ÿæ€ã€æ—¥æ¶¨è·Œå¹…æ ‡è®°ã€é‡å¤§äº‹ä»¶',
            'okx_trading_history': 'ğŸ“ äº¤æ˜“è®°å½•æ˜ç»†ï¼ˆå¼€ä»“/å¹³ä»“/æ­¢ç›ˆæ­¢æŸï¼‰ | ç”¨äºï¼šOKXå…¨ç”Ÿæ€ã€å®ç›˜äº¤æ˜“ã€åˆ©æ¶¦åˆ†æ',
            'okx_trading_logs': 'ğŸ“‹ äº¤æ˜“ç³»ç»Ÿæ—¥å¿—ï¼ˆç­–ç•¥æ‰§è¡Œ/é£æ§/å¼‚å¸¸ï¼‰ | ç”¨äºï¼šOKXå…¨ç”Ÿæ€ã€ç³»ç»Ÿè°ƒè¯•ç›‘æ§',
            'okx_angle_analysis': 'ğŸ“ Kçº¿è§’åº¦åˆ†æï¼ˆè¶‹åŠ¿å¼ºåº¦/æ”¯æ’‘é˜»åŠ›ï¼‰ | ç”¨äºï¼šOKXå…¨ç”Ÿæ€ã€è§’åº¦çªç ´ç­–ç•¥',
            'okx_auto_strategy': 'ğŸ¤– è‡ªåŠ¨äº¤æ˜“ç­–ç•¥é…ç½®ï¼ˆæ æ†/æ­¢ç›ˆæ­¢æŸ/ä»“ä½ï¼‰ | ç”¨äºï¼šOKXå…¨ç”Ÿæ€ã€ç­–ç•¥ç®¡ç†',
            'okx_tpsl_settings': 'ğŸšï¸ æ­¢ç›ˆæ­¢æŸè®¾ç½®å†å²ï¼ˆå‚æ•°å˜æ›´è®°å½•ï¼‰ | ç”¨äºï¼šOKXå…¨ç”Ÿæ€ã€é£æ§ç®¡ç†',
            
            // ææ…Œç›‘æ§
            'panic_jsonl': 'âš ï¸ ææ…ŒæŒ‡æ•°æ•°æ®ï¼ˆçˆ†ä»“é‡/æŒä»“é‡/èµ„é‡‘è´¹ç‡ï¼‰ | ç”¨äºï¼šææ…Œç›‘æ§ã€é‡å¤§äº‹ä»¶ã€OKXäº¤æ˜“',
            'panic_daily': 'ğŸ“… æ¯æ—¥ææ…ŒæŒ‡æ•°ç»Ÿè®¡ï¼ˆæ¯å°æ—¶è®°å½•ï¼‰ | ç”¨äºï¼šææ…Œç›‘æ§ã€å¸‚åœºæƒ…ç»ªåˆ†æ',
            
            // 11ä¿¡å·æ—¥çº¿æ€»
            'signal_stats': 'ğŸ”” æ¯æ—¥ä¿¡å·ç»Ÿè®¡æ±‡æ€»ï¼ˆ11ä¸ªä¿¡å·è§¦å‘æ¬¡æ•°ï¼‰ | ç”¨äºï¼š11ä¿¡å·æ—¥çº¿ã€é‡å¤§äº‹ä»¶ã€æ¯æ—¥å›é¡¾',
            
            // 27å¸æ¶¨è·Œå¹…è¿½è¸ª
            'coin_change_tracker': 'ğŸ“‰ å®æ—¶æ¶¨è·Œå¹…è¿½è¸ªï¼ˆåŸºäºæ—¥å¼€ç›˜ä»·ï¼‰ | ç”¨äºï¼š27å¸æ¶¨è·Œå¹…è¿½è¸ªã€é‡å¤§äº‹ä»¶ã€å¸‚åœºçƒ­åº¦',
            
            // å·²å½’æ¡£
            'support_resistance_jsonl': 'ğŸ¯ æ”¯æ’‘å‹åŠ›ä½æ•°æ®ï¼ˆå·²åœç”¨ 2026-02-07ï¼‰ | æ›¿ä»£ï¼šä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿv2.0.5',
            'support_resistance_daily': 'ğŸ¯ æ¯æ—¥æ”¯æ’‘å‹åŠ›æ•°æ®ï¼ˆå·²åœç”¨ 2026-02-07ï¼‰ | æ›¿ä»£ï¼šä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿv2.0.5',
            'escape_signal_jsonl': 'ğŸš¨ é€ƒé¡¶ä¿¡å·æ•°æ®ï¼ˆå·²åœç”¨ 2026-01-28ï¼‰ | å·²åˆå¹¶åˆ°ä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿ'
        };
        
        // æ˜¾ç¤ºç³»ç»Ÿåˆ†ç»„æ•°æ®
        function displaySystemsGrouped(systemsData) {
            const systemsList = document.getElementById('systemsList');
            systemsList.innerHTML = '';
            
            // æŒ‰è®°å½•æ•°æ’åº
            const sortedSystems = Object.entries(systemsData).sort((a, b) => b[1].total_records - a[1].total_records);
            
            sortedSystems.forEach(([systemName, system]) => {
                const systemCard = document.createElement('div');
                systemCard.className = 'system-card';
                systemCard.style.borderLeft = `4px solid ${system.color}`;
                
                // ç³»ç»Ÿå¤´éƒ¨
                let headerHTML = `
                    <div class="system-header" style="cursor: pointer;" onclick="toggleSystem('${systemName}')">
                        <div>
                            <h3 style="font-size: 1.3em; margin-bottom: 8px;">
                                ${system.icon} ${system.name}
                            </h3>
                            <div class="system-summary">
                                <span>ğŸ“„ ${system.total_files} ä¸ªæ–‡ä»¶</span>
                                <span>ğŸ“ ${system.total_records.toLocaleString()} æ¡è®°å½•</span>
                                <span>ğŸ’¾ ${(system.total_size / 1024 / 1024).toFixed(2)} MB</span>
                                <span>ğŸ“… ${system.total_days} å¤©æ•°æ®</span>
                            </div>
                            ${system.date_range.min ? `
                                <div style="font-size: 0.9em; color: #666; margin-top: 4px;">
                                    æ—¥æœŸèŒƒå›´: ${system.date_range.min} ~ ${system.date_range.max}
                                </div>
                            ` : ''}
                        </div>
                        <div class="toggle-icon" id="toggle-${systemName}">â–¼</div>
                    </div>
                `;
                
                // ç³»ç»Ÿè¯¦æƒ…ï¼ˆé»˜è®¤éšè—ï¼‰
                let detailsHTML = `<div class="system-details" id="details-${systemName}" style="display: none;">`;
                
                // éå†æ¯ä¸ªå­ç›®å½•
                Object.entries(system.directories).forEach(([dirName, dirInfo]) => {
                    const description = dirDescriptions[dirName] || '';
                    detailsHTML += `
                        <div class="directory-section">
                            <h4 style="font-size: 1.1em; margin-bottom: 10px; color: #555;">
                                ğŸ“ ${dirName}
                                <span style="font-size: 0.9em; color: #999; margin-left: 10px;">
                                    (${dirInfo.files.length} æ–‡ä»¶, ${dirInfo.total_records.toLocaleString()} è®°å½•, ${(dirInfo.total_size / 1024 / 1024).toFixed(2)} MB)
                                </span>
                            </h4>
                            ${description ? `
                                <div style="font-size: 0.9em; color: #666; background: #f8f9fa; padding: 8px 12px; border-radius: 6px; margin-bottom: 12px; border-left: 3px solid ${system.color};">
                                    ğŸ’¡ ${description}
                                </div>
                            ` : ''}
                    `;
                    
                    // å¦‚æœæœ‰æ¯æ—¥ç»Ÿè®¡ï¼ŒæŒ‰æ—¥æœŸæ˜¾ç¤º
                    if (Object.keys(dirInfo.daily_stats).length > 0) {
                        const sortedDates = Object.keys(dirInfo.daily_stats).sort().reverse();
                        
                        detailsHTML += '<div class="daily-stats">';
                        sortedDates.forEach(date => {
                            const dayStats = dirInfo.daily_stats[date];
                            detailsHTML += `
                                <div class="day-stat">
                                    <div class="day-date">${date}</div>
                                    <div class="day-info">
                                        <span>ğŸ“„ ${dayStats.files.length} æ–‡ä»¶</span>
                                        <span>ğŸ“ ${dayStats.records.toLocaleString()} æ¡</span>
                                        <span>ğŸ’¾ ${(dayStats.size / 1024).toFixed(2)} KB</span>
                                    </div>
                                </div>
                            `;
                        });
                        detailsHTML += '</div>';
                    } else {
                        // å¦‚æœæ²¡æœ‰æ—¥æœŸç»Ÿè®¡ï¼Œåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶
                        detailsHTML += '<div class="file-list">';
                        dirInfo.files.forEach(file => {
                            detailsHTML += `
                                <div style="padding: 5px 0; font-size: 0.9em; color: #666;">
                                    ğŸ“„ ${file.filename} - ${file.records.toLocaleString()} æ¡è®°å½•
                                </div>
                            `;
                        });
                        detailsHTML += '</div>';
                    }
                    
                    detailsHTML += '</div>';
                });
                
                detailsHTML += '</div>';
                
                systemCard.innerHTML = headerHTML + detailsHTML;
                systemsList.appendChild(systemCard);
            });
        }
        
        // åˆ‡æ¢ç³»ç»Ÿè¯¦æƒ…æ˜¾ç¤º
        function toggleSystem(systemName) {
            const details = document.getElementById(`details-${systemName}`);
            const toggle = document.getElementById(`toggle-${systemName}`);
            
            if (details.style.display === 'none') {
                details.style.display = 'block';
                toggle.textContent = 'â–²';
            } else {
                details.style.display = 'none';
                toggle.textContent = 'â–¼';
            }
        }
        
        // æ‰«ææ•°æ®
        async function scanData() {
            showAlert('æ­£åœ¨æ‰«ææ•°æ®ï¼Œè¯·ç¨å€™...', 'info');
            
            try {
                const response = await fetch('/api/data-management/scan', {
                    method: 'POST'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    statsData = result.data;
                    displayStatistics(statsData);
                    showAlert('âœ… æ•°æ®æ‰«æå®Œæˆï¼', 'success');
                } else {
                    showAlert('âŒ æ‰«æå¤±è´¥: ' + result.error, 'error');
                }
            } catch (error) {
                showAlert('âŒ æ‰«æå¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // åŠ è½½å¤‡ä»½åˆ—è¡¨
        async function loadBackupList() {
            try {
                const response = await fetch('/api/data-backup/list');
                const result = await response.json();
                
                const backupList = document.getElementById('backupList');
                
                if (result.success) {
                    if (result.output.includes('æ‰¾åˆ° 0 ä¸ªå¤‡ä»½')) {
                        backupList.innerHTML = '<div style="text-align: center; padding: 30px; color: #999;">æš‚æ— å¤‡ä»½</div>';
                    } else {
                        // è§£æè¾“å‡ºæ˜¾ç¤ºå¤‡ä»½åˆ—è¡¨
                        backupList.innerHTML = `<pre style="font-size: 0.9em; white-space: pre-wrap;">${result.output}</pre>`;
                    }
                } else {
                    backupList.innerHTML = '<div class="alert alert-error">åŠ è½½å¤‡ä»½åˆ—è¡¨å¤±è´¥</div>';
                }
            } catch (error) {
                console.error('åŠ è½½å¤‡ä»½åˆ—è¡¨å¤±è´¥:', error);
            }
        }
        
        // åˆ›å»ºå¤‡ä»½
        async function createBackup(type) {
            const typeName = type === 'full' ? 'å®Œæ•´å¤‡ä»½' : 'å¢é‡å¤‡ä»½';
            
            // è·å–å‘é€æ–¹å’Œæ¥æ”¶æ–¹åœ°å€
            const senderAddress = document.getElementById('senderAddress').value.trim();
            const receiverAddress = document.getElementById('receiverAddress').value.trim();
            
            // éªŒè¯åœ°å€æ˜¯å¦å¡«å†™ï¼ˆå¯é€‰ï¼Œæ ¹æ®éœ€æ±‚å†³å®šæ˜¯å¦å¿…å¡«ï¼‰
            if (senderAddress && !receiverAddress) {
                showAlert('è¯·å¡«å†™æ¥æ”¶æ–¹åœ°å€', 'error');
                return;
            }
            
            if (!senderAddress && receiverAddress) {
                showAlert('è¯·å¡«å†™å‘é€æ–¹åœ°å€', 'error');
                return;
            }
            
            let confirmMessage = `ç¡®è®¤åˆ›å»º${typeName}ï¼Ÿ\n\n${type === 'full' ? 'å®Œæ•´å¤‡ä»½å°†æ‰“åŒ…æ‰€æœ‰æ•°æ®ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿã€‚' : 'å¢é‡å¤‡ä»½åªå¤‡ä»½ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œé€Ÿåº¦è¾ƒå¿«ã€‚'}`;
            
            if (senderAddress && receiverAddress) {
                confirmMessage += `\n\nğŸ“¤ å‘é€æ–¹: ${senderAddress}\nğŸ“¥ æ¥æ”¶æ–¹: ${receiverAddress}`;
            }
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            showAlert(`æ­£åœ¨åˆ›å»º${typeName}ï¼Œè¯·ç¨å€™...`, 'info');
            
            try {
                const requestBody = { 
                    type,
                    sender_address: senderAddress || null,
                    receiver_address: receiverAddress || null
                };
                
                const response = await fetch('/api/data-backup/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    let successMessage = `âœ… ${typeName}åˆ›å»ºæˆåŠŸï¼`;
                    if (result.backup_file) {
                        successMessage += `\næ–‡ä»¶: ${result.backup_file}`;
                    }
                    showAlert(successMessage, 'success');
                    await loadBackupList();
                } else {
                    showAlert(`âŒ åˆ›å»ºå¤±è´¥: ${result.error}`, 'error');
                }
            } catch (error) {
                showAlert(`âŒ åˆ›å»ºå¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        // æ˜¾ç¤ºæç¤º
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type === 'success' ? 'success' : 'error'}`;
            alert.textContent = message;
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alert);
            
            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                alert.classList.add('hidden');
            }, 3000);
        }
    </script>
</body>
</html>
