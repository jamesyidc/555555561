<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿ v2.0 - ç»Ÿä¸€ç›‘æ§</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #1a1a2e;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .header p {
            font-size: 1.1em;
            color: #a0a0a0;
        }
        
        /* æ—¥æœŸå¯¼èˆª */
        .date-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .date-nav button {
            background: #2d2d44;
            color: #fff;
            border: 1px solid #444;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .date-nav button:hover:not(:disabled) {
            background: #3d3d54;
            border-color: #667eea;
        }
        
        .date-nav button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .date-nav input[type="date"] {
            background: #2d2d44;
            color: #fff;
            border: 1px solid #444;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 1em;
        }
        
        /* é¢„è­¦æ¡†åŒºåŸŸ - 2x2ç½‘æ ¼ */
        .alert-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .alert-box {
            background: #16213e;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid;
            min-height: 200px;
        }
        
        .alert-box.green {
            border-color: #52c41a;
        }
        
        .alert-box.red {
            border-color: #ff4d4f;
        }
        
        .alert-box h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-box h3 .icon {
            font-size: 1.2em;
        }
        
        .alert-box .description {
            color: #a0a0a0;
            font-size: 0.9em;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .alert-box .timeline {
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .alert-box .timeline-item {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 6px;
            border-left: 3px solid;
        }
        
        .alert-box.green .timeline-item {
            border-left-color: #52c41a;
        }
        
        .alert-box.red .timeline-item {
            border-left-color: #ff4d4f;
        }
        
        .alert-box .timeline-item .time {
            font-size: 0.9em;
            color: #a0a0a0;
            margin-bottom: 5px;
        }
        
        .alert-box .timeline-item .coins {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .alert-box .timeline-item .coin-tag {
            background: rgba(255,255,255,0.1);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            border: 1px solid;
        }
        
        .alert-box.green .coin-tag {
            border-color: #52c41a;
            color: #52c41a;
        }
        
        .alert-box.red .coin-tag {
            border-color: #ff4d4f;
            color: #ff4d4f;
        }
        
        .alert-box .empty {
            color: #666;
            font-style: italic;
            text-align: center;
            padding: 30px 0;
        }
        
        .alert-box .count {
            color: #667eea;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        /* ä¿¡å·åˆ¤å®šè¯´æ˜åŒºåŸŸ */
        .signal-rules {
            background: #16213e;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #667eea;
        }
        
        .signal-rules h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #667eea;
            text-align: center;
        }
        
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .rule-box {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid;
        }
        
        .rule-box.buy {
            border-left-color: #52c41a;
        }
        
        .rule-box.sell {
            border-left-color: #ff4d4f;
        }
        
        .rule-box h3 {
            font-size: 1.2em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .rule-box .formula {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.8;
        }
        
        .rule-box .current-data {
            background: rgba(102,126,234,0.2);
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 0.9em;
            line-height: 1.8;
        }
        
        .rule-box .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
        }
        
        .rule-box .result.triggered {
            background: rgba(255,77,79,0.2);
            color: #ff4d4f;
        }
        
        .rule-box .result.not-triggered {
            background: rgba(160,160,160,0.2);
            color: #a0a0a0;
        }
        
        /* ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #16213e;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid #2d2d44;
        }
        
        .stat-card h3 {
            font-size: 0.9em;
            color: #a0a0a0;
            margin-bottom: 10px;
        }
        
        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-card.green .value {
            color: #52c41a;
        }
        
        .stat-card.red .value {
            color: #ff4d4f;
        }
        
        .stat-card.orange .value {
            color: #faad14;
        }
        
        /* å›¾è¡¨åŒºåŸŸ */
        .charts-row {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: #16213e;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #2d2d44;
            width: 100%;
        }
        
        .chart-container h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chart-nav {
            display: flex;
            gap: 10px;
        }
        
        .chart-nav button {
            background: #2d2d44;
            color: #fff;
            border: 1px solid #444;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .chart-nav button:hover:not(:disabled) {
            background: #3d3d54;
            border-color: #667eea;
        }
        
        .chart-nav button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .chart-container .chart {
            width: 100%;
            height: 550px;
        }
        
        /* æ—¶é—´è½´åŒºåŸŸ */
        .timeline-section {
            background: #16213e;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #2d2d44;
        }
        
        .timeline-section h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #fff;
            text-align: center;
        }
        
        .timeline-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .timeline-box {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .timeline-box.buy {
            border-color: #52c41a;
        }
        
        .timeline-box.sell {
            border-color: #ff4d4f;
        }
        
        .timeline-box h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .timeline-box .count-badge {
            background: rgba(102,126,234,0.3);
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            color: #667eea;
        }
        
        .timeline-item {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 6px;
            border-left: 3px solid;
        }
        
        .timeline-box.buy .timeline-item {
            border-left-color: #52c41a;
        }
        
        .timeline-box.sell .timeline-item {
            border-left-color: #ff4d4f;
        }
        
        .timeline-item .time {
            font-size: 1em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .timeline-item .time .icon {
            font-size: 0.9em;
        }
        
        .timeline-item .coins {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
        }
        
        .timeline-item .coin-badge {
            background: rgba(255,255,255,0.1);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            border: 1px solid;
            color: #fff;
        }
        
        .timeline-box.buy .coin-badge {
            border-color: #52c41a;
        }
        
        .timeline-box.sell .coin-badge {
            border-color: #ff4d4f;
        }
        
        .timeline-item .details {
            margin-top: 8px;
            font-size: 0.85em;
            color: #a0a0a0;
        }
        
        .timeline-box .empty-timeline {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-style: italic;
        }
        
        /* è¡¨æ ¼åŒºåŸŸ */
        .table-container {
            background: #16213e;
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #2d2d44;
            overflow-x: auto;
        }
        
        .table-container h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #fff;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        th {
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            color: #fff;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #2d2d44;
            font-weight: 500;
        }
        
        tbody tr {
            background: #1a1a2e;
            transition: background 0.2s;
        }
        
        tbody tr:nth-child(even) {
            background: #16213e;
        }
        
        tbody tr:hover {
            background: #2d2d44;
        }
        
        .green-text {
            color: #52c41a;
        }
        
        .red-text {
            color: #ff4d4f;
        }
        
        .yellow-text {
            color: #faad14;
        }
        
        .white-text {
            color: #fff;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 1200px) {
            .alert-grid {
                grid-template-columns: 1fr;
            }
            
            .rules-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="header">
            <h1>ğŸ’° ä»·æ ¼ä½ç½®é¢„è­¦ç³»ç»Ÿ v2.0</h1>
            <p>4æ¡çº¿é¢„è­¦ + é€ƒé¡¶ç»Ÿè®¡ + 27å¸ç§å®æ—¶ç›‘æ§ | æ¯60ç§’æ›´æ–°</p>
        </div>

        <!-- æ—¥æœŸå¯¼èˆª -->
        <div class="date-nav">
            <button id="prevDay">â† å‰ä¸€å¤©</button>
            <input type="date" id="dateInput" />
            <button id="nextDay">åä¸€å¤© â†’</button>
            <button id="todayBtn">ä»Šå¤©</button>
        </div>

        <!-- 4ä¸ªé¢„è­¦æ¡†ï¼ˆ2x2ç½‘æ ¼ï¼‰-->
        <div class="alert-grid">
            <!-- 48hä½ä½é¢„è­¦ -->
            <div class="alert-box green">
                <h3>
                    <span class="icon">ğŸŸ¢</span>
                    <span>48hä½ä½é¢„è­¦</span>
                </h3>
                <div class="description">
                    <strong>åˆ¤å®šæ¡ä»¶ï¼š</strong>48hä½ç½® â‰¤ 5%ï¼ˆæ¥è¿‘48å°æ—¶æœ€ä½ç‚¹ï¼‰<br>
                    <strong>å¸‚åœºå«ä¹‰ï¼š</strong>çŸ­æœŸè¶…è·Œï¼Œå¯èƒ½åå¼¹<br>
                    <strong>æ“ä½œå»ºè®®ï¼š</strong>å…³æ³¨æŠ„åº•æœºä¼š
                </div>
                <div id="alert48hLow" class="coins">
                    <div class="empty">æš‚æ— é¢„è­¦</div>
                </div>
            </div>

            <!-- 7å¤©ä½ä½é¢„è­¦ -->
            <div class="alert-box green">
                <h3>
                    <span class="icon">ğŸ”µ</span>
                    <span>7å¤©ä½ä½é¢„è­¦</span>
                </h3>
                <div class="description">
                    <strong>åˆ¤å®šæ¡ä»¶ï¼š</strong>7å¤©ä½ç½® â‰¤ 5%ï¼ˆæ¥è¿‘7å¤©æœ€ä½ç‚¹ï¼‰<br>
                    <strong>å¸‚åœºå«ä¹‰ï¼š</strong>ä¸­æœŸæ”¯æ’‘ä½ï¼Œå¼ºæ”¯æ’‘åŒºåŸŸ<br>
                    <strong>æ“ä½œå»ºè®®ï¼š</strong>æˆ˜ç•¥æ€§å»ºä»“æœºä¼š
                </div>
                <div id="alert7dLow" class="coins">
                    <div class="empty">æš‚æ— é¢„è­¦</div>
                </div>
            </div>

            <!-- 48hé«˜ä½é¢„è­¦ -->
            <div class="alert-box red">
                <h3>
                    <span class="icon">ğŸŸ </span>
                    <span>48hé«˜ä½é¢„è­¦</span>
                </h3>
                <div class="description">
                    <strong>åˆ¤å®šæ¡ä»¶ï¼š</strong>48hä½ç½® â‰¥ 95%ï¼ˆæ¥è¿‘48å°æ—¶æœ€é«˜ç‚¹ï¼‰<br>
                    <strong>å¸‚åœºå«ä¹‰ï¼š</strong>çŸ­æœŸè¶…ä¹°ï¼Œå¯èƒ½å›è°ƒ<br>
                    <strong>æ“ä½œå»ºè®®ï¼š</strong>è€ƒè™‘å‡ä»“æˆ–æ­¢ç›ˆ
                </div>
                <div id="alert48hHigh" class="coins">
                    <div class="empty">æš‚æ— é¢„è­¦</div>
                </div>
            </div>

            <!-- 7å¤©é«˜ä½é¢„è­¦ -->
            <div class="alert-box red">
                <h3>
                    <span class="icon">ğŸ”´</span>
                    <span>7å¤©é«˜ä½é¢„è­¦</span>
                </h3>
                <div class="description">
                    <strong>åˆ¤å®šæ¡ä»¶ï¼š</strong>7å¤©ä½ç½® â‰¥ 95%ï¼ˆæ¥è¿‘7å¤©æœ€é«˜ç‚¹ï¼‰<br>
                    <strong>å¸‚åœºå«ä¹‰ï¼š</strong>ä¸­æœŸå‹åŠ›ä½ï¼Œå¼ºå‹åŠ›åŒºåŸŸ<br>
                    <strong>æ“ä½œå»ºè®®ï¼š</strong>é‡ç‚¹å…³æ³¨é€ƒé¡¶ä¿¡å·
                </div>
                <div id="alert7dHigh" class="coins">
                    <div class="empty">æš‚æ— é¢„è­¦</div>
                </div>
            </div>
        </div>

        <!-- ä¿¡å·åˆ¤å®šè¯´æ˜ -->
        <div class="signal-rules">
            <h2>ğŸ“‹ ä¿¡å·åˆ¤å®šè§„åˆ™ä¸å®æ—¶è®¡ç®—</h2>
            <div class="rules-grid">
                <!-- æŠ„åº•ä¿¡å· -->
                <div class="rule-box buy">
                    <h3>ğŸŸ¢ æŠ„åº•ä¿¡å·ï¼ˆä¹°å…¥ï¼‰</h3>
                    <div class="formula">
                        <strong>åˆ¤å®šæ¡ä»¶ï¼š</strong><br>
                        1ï¸âƒ£ æ”¯æ’‘çº¿1ï¼ˆ48hâ‰¤5%ï¼‰â‰¥ 1 ä¸ªå¸ç§<br>
                        2ï¸âƒ£ æ”¯æ’‘çº¿2ï¼ˆ7dâ‰¤5%ï¼‰â‰¥ 1 ä¸ªå¸ç§<br>
                        3ï¸âƒ£ æ”¯æ’‘çº¿1 + æ”¯æ’‘çº¿2 â‰¥ 20<br>
                        <br>
                        <strong>å…¬å¼ï¼š</strong><br>
                        IF (æ”¯æ’‘çº¿1 â‰¥ 1) AND (æ”¯æ’‘çº¿2 â‰¥ 1) AND (æ”¯æ’‘çº¿1 + æ”¯æ’‘çº¿2 â‰¥ 20)<br>
                        THEN è§¦å‘æŠ„åº•ä¿¡å·
                    </div>
                    <div class="current-data" id="buySignalData">
                        <strong>å½“å‰æ•°æ®ï¼š</strong><br>
                        æ”¯æ’‘çº¿1ï¼ˆ48hâ‰¤5%ï¼‰= <span id="currentSupport48h">-</span> ä¸ªå¸ç§<br>
                        æ”¯æ’‘çº¿2ï¼ˆ7dâ‰¤5%ï¼‰= <span id="currentSupport7d">-</span> ä¸ªå¸ç§<br>
                        æ€»å’Œ = <span id="currentSupportSum">-</span><br>
                        <br>
                        <strong>åˆ¤å®šç»“æœï¼š</strong>
                    </div>
                    <div class="result not-triggered" id="buySignalResult">
                        æœªè§¦å‘
                    </div>
                </div>

                <!-- é€ƒé¡¶ä¿¡å· -->
                <div class="rule-box sell">
                    <h3>ğŸ”´ é€ƒé¡¶ä¿¡å·ï¼ˆå–å‡ºï¼‰</h3>
                    <div class="formula">
                        <strong>åˆ¤å®šæ¡ä»¶ï¼š</strong><br>
                        1ï¸âƒ£ å‹åŠ›çº¿1ï¼ˆ48hâ‰¥95%ï¼‰â‰¥ 1 ä¸ªå¸ç§<br>
                        2ï¸âƒ£ å‹åŠ›çº¿2ï¼ˆ7dâ‰¥95%ï¼‰â‰¥ 1 ä¸ªå¸ç§<br>
                        3ï¸âƒ£ å‹åŠ›çº¿1 + å‹åŠ›çº¿2 â‰¥ 8<br>
                        <br>
                        <strong>å…¬å¼ï¼š</strong><br>
                        IF (å‹åŠ›çº¿1 â‰¥ 1) AND (å‹åŠ›çº¿2 â‰¥ 1) AND (å‹åŠ›çº¿1 + å‹åŠ›çº¿2 â‰¥ 8)<br>
                        THEN è§¦å‘é€ƒé¡¶ä¿¡å·
                    </div>
                    <div class="current-data" id="sellSignalData">
                        <strong>å½“å‰æ•°æ®ï¼š</strong><br>
                        å‹åŠ›çº¿1ï¼ˆ48hâ‰¥95%ï¼‰= <span id="currentPressure48h">-</span> ä¸ªå¸ç§<br>
                        å‹åŠ›çº¿2ï¼ˆ7dâ‰¥95%ï¼‰= <span id="currentPressure7d">-</span> ä¸ªå¸ç§<br>
                        æ€»å’Œ = <span id="currentPressureSum">-</span><br>
                        <br>
                        <strong>åˆ¤å®šç»“æœï¼š</strong>
                    </div>
                    <div class="result not-triggered" id="sellSignalResult">
                        æœªè§¦å‘
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="stats-grid">
            <div class="stat-card green">
                <h3>ğŸŸ¢ æŠ„åº•ä¿¡å·è§¦å‘æ¬¡æ•°</h3>
                <div class="value" id="statBuySignals">-</div>
            </div>
            <div class="stat-card red">
                <h3>ğŸ”´ é€ƒé¡¶ä¿¡å·è§¦å‘æ¬¡æ•°</h3>
                <div class="value" id="statSellSignals">-</div>
            </div>
            <div class="stat-card orange">
                <h3>ğŸ“Š 24hé€ƒé¡¶è§¦å‘æ¬¡æ•°</h3>
                <div class="value" id="stat24h">-</div>
            </div>
            <div class="stat-card orange">
                <h3>âš¡ 2hé€ƒé¡¶è§¦å‘æ¬¡æ•°</h3>
                <div class="value" id="stat2h">-</div>
            </div>
            <div class="stat-card">
                <h3>ğŸ’ å½“å‰ç¬¦åˆå¸ç§</h3>
                <div class="value" id="statCurrent">-</div>
            </div>
            <div class="stat-card">
                <h3>ğŸ“ˆ æ•°æ®ç‚¹æ•°</h3>
                <div class="value" id="statPoints">-</div>
            </div>
        </div>

        <!-- å›¾è¡¨åŒºåŸŸ -->
        <div class="charts-row">
            <div class="chart-container">
                <h2>ğŸ“ˆ å›¾è¡¨1ï¼š4æ¡çº¿ + æŠ„åº•é€ƒé¡¶ä¿¡å·</h2>
                <div id="chart4Lines" class="chart"></div>
            </div>
            <div class="chart-container">
                <h2>ğŸ“Š å›¾è¡¨2ï¼š24h/2h é€ƒé¡¶ç»Ÿè®¡</h2>
                <div id="chartEscape" class="chart"></div>
            </div>
        </div>

        <!-- æ—¶é—´è½´åŒºåŸŸ -->
        <div class="timeline-section">
            <h2>â° ä¿¡å·è§¦å‘æ—¶é—´è½´ï¼ˆä»Šæ—¥æ‰€æœ‰è§¦å‘è®°å½•ï¼‰</h2>
            <div class="timeline-grid">
                <!-- æŠ„åº•ä¿¡å·æ—¶é—´è½´ -->
                <div class="timeline-box buy">
                    <h3>
                        ğŸŸ¢ æŠ„åº•ä¿¡å·æ—¶é—´è½´
                        <span class="count-badge" id="buyTimelineCount">0æ¬¡</span>
                    </h3>
                    <div id="buyTimeline">
                        <div class="empty-timeline">ä»Šæ—¥æš‚æ— æŠ„åº•ä¿¡å·è§¦å‘</div>
                    </div>
                </div>

                <!-- é€ƒé¡¶ä¿¡å·æ—¶é—´è½´ -->
                <div class="timeline-box sell">
                    <h3>
                        ğŸ”´ é€ƒé¡¶ä¿¡å·æ—¶é—´è½´
                        <span class="count-badge" id="sellTimelineCount">0æ¬¡</span>
                    </h3>
                    <div id="sellTimeline">
                        <div class="empty-timeline">ä»Šæ—¥æš‚æ— é€ƒé¡¶ä¿¡å·è§¦å‘</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ€»æ—¶é—´è½´åŒºåŸŸï¼ˆæ— è®ºæ˜¯å¦è§¦å‘éƒ½æ˜¾ç¤ºï¼‰-->
        <div class="timeline-section">
            <h2>ğŸ“… æ€»æ—¶é—´è½´ï¼ˆä»Šæ—¥æ‰€æœ‰é‡‡é›†è®°å½•ï¼Œå…± <span id="totalTimelineCount">0</span> æ¡ï¼‰</h2>
            <div class="timeline-box" style="border-color: #667eea; max-height: 600px;">
                <div id="totalTimeline">
                    <div class="empty-timeline">åŠ è½½ä¸­...</div>
                </div>
            </div>
        </div>

        <!-- 27ä¸ªå¸ç§å®æ—¶ä½ç½®è¡¨æ ¼ -->
        <div class="table-container">
            <h2>ğŸ’° 27ä¸ªå¸ç§å®æ—¶ä½ç½®</h2>
            <table>
                <thead>
                    <tr>
                        <th>å¸ç§</th>
                        <th>å½“å‰ä»·æ ¼</th>
                        <th style="color: #52c41a;">æ”¯æ’‘çº¿1<br>(7å¤©ä½ä½)</th>
                        <th style="color: #ff4d4f;">å‹åŠ›çº¿1<br>(7å¤©é«˜ä½)</th>
                        <th style="color: #52c41a;">7å¤©ä½ç½®%</th>
                        <th style="color: #52c41a;">æ”¯æ’‘çº¿2<br>(48hä½ä½)</th>
                        <th style="color: #ff4d4f;">å‹åŠ›çº¿2<br>(48hé«˜ä½)</th>
                        <th style="color: #faad14;">48hä½ç½®%</th>
                        <th>é¢„è­¦</th>
                    </tr>
                </thead>
                <tbody id="coinTableBody">
                    <tr>
                        <td colspan="9" style="text-align: center; padding: 30px;">åŠ è½½ä¸­...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–å›¾è¡¨
        const chart4Lines = echarts.init(document.getElementById('chart4Lines'), 'dark');
        const chartEscape = echarts.init(document.getElementById('chartEscape'), 'dark');
        
        // å½“å‰æ—¥æœŸ
        let currentDate = new Date().toISOString().split('T')[0];
        document.getElementById('dateInput').value = currentDate;
        
        // æ—¥æœŸå¯¼èˆªäº‹ä»¶
        document.getElementById('prevDay').addEventListener('click', () => {
            const date = new Date(currentDate);
            date.setDate(date.getDate() - 1);
            currentDate = date.toISOString().split('T')[0];
            document.getElementById('dateInput').value = currentDate;
            loadAllData();
        });
        
        document.getElementById('nextDay').addEventListener('click', () => {
            const today = new Date().toISOString().split('T')[0];
            if (currentDate >= today) return;
            
            const date = new Date(currentDate);
            date.setDate(date.getDate() + 1);
            currentDate = date.toISOString().split('T')[0];
            document.getElementById('dateInput').value = currentDate;
            loadAllData();
        });
        
        document.getElementById('todayBtn').addEventListener('click', () => {
            currentDate = new Date().toISOString().split('T')[0];
            document.getElementById('dateInput').value = currentDate;
            loadAllData();
        });
        
        document.getElementById('dateInput').addEventListener('change', (e) => {
            currentDate = e.target.value;
            loadAllData();
        });
        
        // åŠ è½½æ‰€æœ‰æ•°æ®
        async function loadAllData() {
            try {
                // åŠ è½½4æ¡çº¿æ—¶é—´çº¿æ•°æ®
                const timelineResp = await fetch(`/api/signal-timeline/data?date=${currentDate}`);
                const timelineData = await timelineResp.json();
                
                // åŠ è½½é€ƒé¡¶ç»Ÿè®¡æ•°æ®
                const escapeResp = await fetch(`/api/escape-stats/data?date=${currentDate}`);
                const escapeData = await escapeResp.json();
                
                // åŠ è½½æ€»æ—¶é—´è½´æ•°æ®ï¼ˆJSONLï¼‰
                const jsonlResp = await fetch(`/api/signal-timeline/jsonl?date=${currentDate}`);
                const jsonlData = await jsonlResp.json();
                
                // æ›´æ–°å›¾è¡¨
                updateChart4Lines(timelineData);
                updateChartEscape(escapeData);
                
                // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
                updateStats(timelineData.data || [], escapeData.data || []);
                
                // æ›´æ–°æ€»æ—¶é—´è½´
                renderTotalTimeline(jsonlData.data || []);
                
                // åŠ è½½å¸ç§è¯¦æƒ…ï¼ˆä»…ä»Šå¤©æ‰åŠ è½½ï¼‰
                if (currentDate === new Date().toISOString().split('T')[0]) {
                    await loadCoinDetails();
                }
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }
        
        // æ›´æ–°4æ¡çº¿å›¾è¡¨
        function updateChart4Lines(data) {
            if (!data.success || !data.data || data.data.length === 0) {
                chart4Lines.setOption({
                    title: { text: 'æš‚æ— æ•°æ®', left: 'center', top: 'center' }
                });
                return;
            }
            
            const times = data.data.map(d => d.time);
            const support48h = data.data.map(d => d.support_48h || 0);
            const support7d = data.data.map(d => d.support_7d || 0);
            const pressure48h = data.data.map(d => d.pressure_48h || 0);
            const pressure7d = data.data.map(d => d.pressure_7d || 0);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'cross' }
                },
                legend: {
                    data: ['æ”¯æ’‘çº¿1 (48hâ‰¤5%)', 'æ”¯æ’‘çº¿2 (7dâ‰¤5%)', 'å‹åŠ›çº¿1 (48hâ‰¥95%)', 'å‹åŠ›çº¿2 (7dâ‰¥95%)'],
                    textStyle: { color: '#fff' },
                    top: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: times,
                    axisLabel: { color: '#a0a0a0' },
                    axisLine: { lineStyle: { color: '#444' } }
                },
                yAxis: {
                    type: 'value',
                    name: 'å¸ç§æ•°é‡',
                    nameTextStyle: { color: '#a0a0a0' },
                    axisLabel: { color: '#a0a0a0' },
                    axisLine: { lineStyle: { color: '#444' } },
                    splitLine: { lineStyle: { color: '#2d2d44' } }
                },
                series: [
                    {
                        name: 'æ”¯æ’‘çº¿1 (48hâ‰¤5%)',
                        type: 'line',
                        data: support48h,
                        itemStyle: { color: '#52c41a' },
                        areaStyle: { color: 'rgba(82, 196, 26, 0.1)' }
                    },
                    {
                        name: 'æ”¯æ’‘çº¿2 (7dâ‰¤5%)',
                        type: 'line',
                        data: support7d,
                        itemStyle: { color: '#1890ff' },
                        areaStyle: { color: 'rgba(24, 144, 255, 0.1)' }
                    },
                    {
                        name: 'å‹åŠ›çº¿1 (48hâ‰¥95%)',
                        type: 'line',
                        data: pressure48h,
                        itemStyle: { color: '#faad14' },
                        areaStyle: { color: 'rgba(250, 173, 20, 0.1)' }
                    },
                    {
                        name: 'å‹åŠ›çº¿2 (7dâ‰¥95%)',
                        type: 'line',
                        data: pressure7d,
                        itemStyle: { color: '#ff4d4f' },
                        areaStyle: { color: 'rgba(255, 77, 79, 0.1)' }
                    }
                ]
            };
            
            chart4Lines.setOption(option);
        }
        
        // æ›´æ–°é€ƒé¡¶ç»Ÿè®¡å›¾è¡¨
        function updateChartEscape(data) {
            if (!data.success || !data.data || data.data.length === 0) {
                chartEscape.setOption({
                    title: { text: 'æš‚æ— æ•°æ®', left: 'center', top: 'center' }
                });
                return;
            }
            
            const times = data.data.map(d => d.time);
            const escape24h = data.data.map(d => d.escape_24h_count || 0);
            const escape2h = data.data.map(d => d.escape_2h_count || 0);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'cross' }
                },
                legend: {
                    data: ['24hé€ƒé¡¶', '2hé€ƒé¡¶'],
                    textStyle: { color: '#fff' },
                    top: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: times,
                    axisLabel: { color: '#a0a0a0' },
                    axisLine: { lineStyle: { color: '#444' } }
                },
                yAxis: {
                    type: 'value',
                    name: 'å¸ç§æ•°é‡',
                    nameTextStyle: { color: '#a0a0a0' },
                    axisLabel: { color: '#a0a0a0' },
                    axisLine: { lineStyle: { color: '#444' } },
                    splitLine: { lineStyle: { color: '#2d2d44' } }
                },
                series: [
                    {
                        name: '24hé€ƒé¡¶',
                        type: 'line',
                        data: escape24h,
                        itemStyle: { color: '#ff4d4f' },
                        areaStyle: { color: 'rgba(255, 77, 79, 0.2)' },
                        smooth: true
                    },
                    {
                        name: '2hé€ƒé¡¶',
                        type: 'line',
                        data: escape2h,
                        itemStyle: { color: '#faad14' },
                        areaStyle: { color: 'rgba(250, 173, 20, 0.2)' },
                        smooth: true
                    }
                ]
            };
            
            chartEscape.setOption(option);
        }
        
        // æ›´æ–°ç»Ÿè®¡å¡ç‰‡å’Œä¿¡å·åˆ¤å®š
        function updateStats(timelineData, escapeData) {
            // è·å–æœ€æ–°æ•°æ®ç‚¹
            const latest = timelineData[timelineData.length - 1];
            
            if (latest) {
                // æ›´æ–°å½“å‰4æ¡çº¿æ•°æ®
                const support48h = latest.support_48h || 0;
                const support7d = latest.support_7d || 0;
                const pressure48h = latest.pressure_48h || 0;
                const pressure7d = latest.pressure_7d || 0;
                
                // æ›´æ–°æŠ„åº•ä¿¡å·åˆ¤å®š
                document.getElementById('currentSupport48h').textContent = support48h;
                document.getElementById('currentSupport7d').textContent = support7d;
                document.getElementById('currentSupportSum').textContent = support48h + support7d;
                
                const buyTriggered = (support48h >= 1) && (support7d >= 1) && (support48h + support7d >= 20);
                const buyResultEl = document.getElementById('buySignalResult');
                if (buyTriggered) {
                    buyResultEl.textContent = 'âœ… å·²è§¦å‘æŠ„åº•ä¿¡å·ï¼';
                    buyResultEl.className = 'result triggered';
                    buyResultEl.style.background = 'rgba(82, 196, 26, 0.2)';
                    buyResultEl.style.color = '#52c41a';
                } else {
                    buyResultEl.textContent = 'âŒ æœªè§¦å‘ï¼ˆéœ€åŒæ—¶æ»¡è¶³3ä¸ªæ¡ä»¶ï¼‰';
                    buyResultEl.className = 'result not-triggered';
                }
                
                // æ›´æ–°é€ƒé¡¶ä¿¡å·åˆ¤å®š
                document.getElementById('currentPressure48h').textContent = pressure48h;
                document.getElementById('currentPressure7d').textContent = pressure7d;
                document.getElementById('currentPressureSum').textContent = pressure48h + pressure7d;
                
                const sellTriggered = (pressure48h >= 1) && (pressure7d >= 1) && (pressure48h + pressure7d >= 8);
                const sellResultEl = document.getElementById('sellSignalResult');
                if (sellTriggered) {
                    sellResultEl.textContent = 'âœ… å·²è§¦å‘é€ƒé¡¶ä¿¡å·ï¼';
                    sellResultEl.className = 'result triggered';
                } else {
                    sellResultEl.textContent = 'âŒ æœªè§¦å‘ï¼ˆéœ€åŒæ—¶æ»¡è¶³3ä¸ªæ¡ä»¶ï¼‰';
                    sellResultEl.className = 'result not-triggered';
                }
            }
            
            // ç»Ÿè®¡æŠ„åº•å’Œé€ƒé¡¶ä¿¡å·è§¦å‘æ¬¡æ•°
            const buySignals = timelineData.filter(d => d.signal_type === 'buy').length;
            const sellSignals = timelineData.filter(d => d.signal_type === 'sell').length;
            
            document.getElementById('statBuySignals').textContent = buySignals;
            document.getElementById('statSellSignals').textContent = sellSignals;
            
            // ç»Ÿè®¡24hå’Œ2hé€ƒé¡¶è§¦å‘æ¬¡æ•°
            const escape24hCount = escapeData.filter(d => d.escape_24h_count > 0).length;
            const escape2hCount = escapeData.filter(d => d.escape_2h_count > 0).length;
            
            document.getElementById('stat24h').textContent = escape24hCount;
            document.getElementById('stat2h').textContent = escape2hCount;
            
            // å½“å‰ç¬¦åˆå¸ç§
            const latestEscape = escapeData[escapeData.length - 1];
            if (latestEscape) {
                const currentSymbols = new Set([
                    ...(latestEscape.escape_24h_symbols || []),
                    ...(latestEscape.escape_2h_symbols || [])
                ]);
                document.getElementById('statCurrent').textContent = currentSymbols.size;
            } else {
                document.getElementById('statCurrent').textContent = 0;
            }
            
            // æ•°æ®ç‚¹æ•°
            document.getElementById('statPoints').textContent = timelineData.length;
            
            // æ›´æ–°æ—¶é—´è½´
            renderBuyTimeline(timelineData);
            renderSellTimeline(timelineData);
        }
        
        // æ¸²æŸ“æŠ„åº•ä¿¡å·æ—¶é—´è½´
        function renderBuyTimeline(timelineData) {
            const buySignals = timelineData.filter(d => d.signal_type === 'buy');
            const container = document.getElementById('buyTimeline');
            const countBadge = document.getElementById('buyTimelineCount');
            
            countBadge.textContent = `${buySignals.length}æ¬¡`;
            
            if (buySignals.length === 0) {
                container.innerHTML = '<div class="empty-timeline">ä»Šæ—¥æš‚æ— æŠ„åº•ä¿¡å·è§¦å‘</div>';
                return;
            }
            
            const html = buySignals.map((signal, index) => {
                const detailData = signal.detail_data ? JSON.parse(signal.detail_data) : {};
                const coins = detailData.symbols || [];
                
                const coinsHtml = coins.map(coin => 
                    `<span class="coin-badge">${coin}</span>`
                ).join('');
                
                return `
                    <div class="timeline-item">
                        <div class="time">
                            <span class="icon">ğŸ•</span>
                            <span>${signal.time}</span>
                        </div>
                        <div class="details">
                            æ”¯æ’‘çº¿1: ${signal.support_48h || 0} ä¸ªå¸ç§ | 
                            æ”¯æ’‘çº¿2: ${signal.support_7d || 0} ä¸ªå¸ç§ | 
                            æ€»å’Œ: ${(signal.support_48h || 0) + (signal.support_7d || 0)}
                        </div>
                        ${coinsHtml ? `<div class="coins">${coinsHtml}</div>` : ''}
                        ${signal.trigger_reason ? `<div class="details">${signal.trigger_reason}</div>` : ''}
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html;
        }
        
        // æ¸²æŸ“é€ƒé¡¶ä¿¡å·æ—¶é—´è½´
        function renderSellTimeline(timelineData) {
            const sellSignals = timelineData.filter(d => d.signal_type === 'sell');
            const container = document.getElementById('sellTimeline');
            const countBadge = document.getElementById('sellTimelineCount');
            
            countBadge.textContent = `${sellSignals.length}æ¬¡`;
            
            if (sellSignals.length === 0) {
                container.innerHTML = '<div class="empty-timeline">ä»Šæ—¥æš‚æ— é€ƒé¡¶ä¿¡å·è§¦å‘</div>';
                return;
            }
            
            const html = sellSignals.map((signal, index) => {
                const detailData = signal.detail_data ? JSON.parse(signal.detail_data) : {};
                const coins = detailData.symbols || [];
                
                const coinsHtml = coins.map(coin => 
                    `<span class="coin-badge">${coin}</span>`
                ).join('');
                
                return `
                    <div class="timeline-item">
                        <div class="time">
                            <span class="icon">ğŸ•</span>
                            <span>${signal.time}</span>
                        </div>
                        <div class="details">
                            å‹åŠ›çº¿1: ${signal.pressure_48h || 0} ä¸ªå¸ç§ | 
                            å‹åŠ›çº¿2: ${signal.pressure_7d || 0} ä¸ªå¸ç§ | 
                            æ€»å’Œ: ${(signal.pressure_48h || 0) + (signal.pressure_7d || 0)}
                        </div>
                        ${coinsHtml ? `<div class="coins">${coinsHtml}</div>` : ''}
                        ${signal.trigger_reason ? `<div class="details">${signal.trigger_reason}</div>` : ''}
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html;
        }
        
        // æ¸²æŸ“æ€»æ—¶é—´è½´ï¼ˆæ‰€æœ‰è®°å½•ï¼‰
        function renderTotalTimeline(data) {
            const container = document.getElementById('totalTimeline');
            const countEl = document.getElementById('totalTimelineCount');
            
            countEl.textContent = data.length;
            
            if (data.length === 0) {
                container.innerHTML = '<div class="empty-timeline">ä»Šæ—¥æš‚æ— æ•°æ®é‡‡é›†</div>';
                return;
            }
            
            const html = data.map((record, index) => {
                const detailData = record.detail_data || {};
                
                // ä¿¡å·ç±»å‹æ ‡è®°
                let signalIcon = 'âšª';
                let signalText = 'æ— ä¿¡å·';
                let signalColor = '#666';
                
                if (record.signal_type === 'buy') {
                    signalIcon = 'ğŸŸ¢';
                    signalText = 'æŠ„åº•ä¿¡å·';
                    signalColor = '#52c41a';
                } else if (record.signal_type === 'sell') {
                    signalIcon = 'ğŸ”´';
                    signalText = 'é€ƒé¡¶ä¿¡å·';
                    signalColor = '#ff4d4f';
                }
                
                // æ„å»ºå¸ç§æ ‡ç­¾
                const allSymbols = [
                    ...(detailData.support_48h_symbols || []),
                    ...(detailData.support_7d_symbols || []),
                    ...(detailData.pressure_48h_symbols || []),
                    ...(detailData.pressure_7d_symbols || [])
                ];
                const uniqueSymbols = [...new Set(allSymbols)];
                
                const coinsHtml = uniqueSymbols.length > 0 ? 
                    uniqueSymbols.map(coin => `<span class="coin-badge" style="border-color: ${signalColor};">${coin}</span>`).join('') :
                    '';
                
                return `
                    <div class="timeline-item" style="border-left-color: ${signalColor};">
                        <div class="time">
                            <span class="icon">${signalIcon}</span>
                            <span>${record.time}</span>
                            <span style="color: ${signalColor}; margin-left: 10px;">${signalText}</span>
                        </div>
                        <div class="details">
                            ğŸŸ¢ æ”¯æ’‘çº¿1: ${record.support_48h} ä¸ª | 
                            ğŸŸ¢ æ”¯æ’‘çº¿2: ${record.support_7d} ä¸ª | 
                            ğŸ”´ å‹åŠ›çº¿1: ${record.pressure_48h} ä¸ª | 
                            ğŸ”´ å‹åŠ›çº¿2: ${record.pressure_7d} ä¸ª
                        </div>
                        ${coinsHtml ? `<div class="coins" style="margin-top: 8px;">${coinsHtml}</div>` : ''}
                        ${record.trigger_reason ? `<div class="details" style="margin-top: 5px; color: ${signalColor};">${record.trigger_reason}</div>` : ''}
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html;
        }
        
        // åŠ è½½å¸ç§è¯¦æƒ…ï¼ˆä»…ä»Šå¤©ï¼‰
        async function loadCoinDetails() {
            try {
                const resp = await fetch('/api/price-position/list-detailed');
                const result = await resp.json();
                
                if (result.success && result.data) {
                    renderCoinTable(result.data);
                    updateAlertBoxes(result.data);
                }
            } catch (error) {
                console.error('Error loading coin details:', error);
            }
        }
        
        // æ›´æ–°4ä¸ªé¢„è­¦æ¡†
        function updateAlertBoxes(coins) {
            const alert48hLow = coins.filter(c => c.position_48h <= 5);
            const alert7dLow = coins.filter(c => c.position_7d <= 5);
            const alert48hHigh = coins.filter(c => c.position_48h >= 95);
            const alert7dHigh = coins.filter(c => c.position_7d >= 95);
            
            renderAlertBox('alert48hLow', alert48hLow);
            renderAlertBox('alert7dLow', alert7dLow);
            renderAlertBox('alert48hHigh', alert48hHigh);
            renderAlertBox('alert7dHigh', alert7dHigh);
        }
        
        // æ¸²æŸ“é¢„è­¦æ¡†
        function renderAlertBox(elementId, coins) {
            const element = document.getElementById(elementId);
            
            if (coins.length === 0) {
                element.innerHTML = '<div class="empty">æš‚æ— é¢„è­¦</div>';
                return;
            }
            
            const html = coins.map(coin => {
                const symbol = coin.symbol || coin.inst_id.replace('-USDT-SWAP', '');
                return `<span class="coin-tag">${symbol}</span>`;
            }).join('');
            
            element.innerHTML = html;
        }
        
        // æ¸²æŸ“å¸ç§è¡¨æ ¼
        function renderCoinTable(coins) {
            if (!coins || coins.length === 0) {
                document.getElementById('coinTableBody').innerHTML = 
                    '<tr><td colspan="9" style="text-align: center; padding: 30px;">æš‚æ— æ•°æ®</td></tr>';
                return;
            }
            
            // æŒ‰48hä½ç½®é™åºæ’åº
            coins.sort((a, b) => (b.position_48h || 0) - (a.position_48h || 0));
            
            const html = coins.map(coin => {
                // æ ¼å¼åŒ–ä»·æ ¼
                const formatPrice = (price) => {
                    if (price < 0.01) return price.toFixed(6);
                    if (price < 1) return price.toFixed(4);
                    return price.toFixed(2);
                };
                
                // å¸ç§åç§°
                const symbol = coin.symbol || coin.inst_id.replace('-USDT-SWAP', '');
                
                // å½“å‰ä»·æ ¼
                const currentPrice = formatPrice(coin.current_price);
                
                // 7å¤©ä½ä½å’Œé«˜ä½
                const low7d = formatPrice(coin.low_7d);
                const high7d = formatPrice(coin.high_7d);
                const pos7d = coin.position_7d.toFixed(1) + '%';
                
                // 48hä½ä½å’Œé«˜ä½
                const low48h = formatPrice(coin.low_48h);
                const high48h = formatPrice(coin.high_48h);
                const pos48h = coin.position_48h.toFixed(1) + '%';
                
                // é¢„è­¦çŠ¶æ€
                let alertText = '-';
                if (coin.position_48h >= 95) {
                    alertText = '48hé«˜ä½';
                } else if (coin.position_48h <= 5) {
                    alertText = '48hä½ä½';
                } else if (coin.position_7d >= 95) {
                    alertText = '7dé«˜ä½';
                } else if (coin.position_7d <= 5) {
                    alertText = '7dä½ä½';
                }
                
                return `
                    <tr>
                        <td class="white-text"><strong>${symbol}</strong></td>
                        <td class="green-text"><strong>${currentPrice}</strong></td>
                        <td class="green-text">${low7d}</td>
                        <td class="red-text">${high7d}</td>
                        <td class="green-text">${pos7d}</td>
                        <td class="green-text">${low48h}</td>
                        <td class="red-text">${high48h}</td>
                        <td class="yellow-text">${pos48h}</td>
                        <td class="white-text">${alertText}</td>
                    </tr>
                `;
            }).join('');
            
            document.getElementById('coinTableBody').innerHTML = html;
        }
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡ç»˜å›¾è¡¨
        window.addEventListener('resize', () => {
            chart4Lines.resize();
            chartEscape.resize();
        });
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadAllData();
            
            // ä»…å¯¹ä»Šå¤©çš„æ•°æ®å¯ç”¨è‡ªåŠ¨åˆ·æ–°ï¼ˆæ¯60ç§’ï¼‰
            setInterval(() => {
                const today = new Date().toISOString().split('T')[0];
                if (currentDate === today) {
                    loadAllData();
                }
            }, 60000);
        });
    </script>
</body>
</html>
