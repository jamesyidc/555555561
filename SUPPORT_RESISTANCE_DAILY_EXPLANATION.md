# 📂 support_resistance_daily 目录数据说明

## 📸 数据管理页面截图

![support_resistance_daily目录](https://www.genspark.ai/api/files/s/mFpWzL8O)

---

## 🎯 目录信息

**目录名称**: `support_resistance_daily`  
**所属系统**: 支撑压力(大盘) - 老版系统  
**数据状态**: 🔴 已停止更新 (最后更新: 2026-02-07)

### 基本统计
- **文件数**: 41个（每天一个文件）
- **记录数**: 901,992条（90万+）
- **数据大小**: 976.51 MB (~1GB)
- **日期范围**: 2025-12-25 ~ 2026-02-07
- **数据天数**: 41天

---

## 📝 截图内容解读

### 展开的文件夹结构
```
📁 各系统数据详情
  └── 📂 support_resistance_daily (41文件, 901,992条, 976.51 MB)
       ├── 📄 2026-02-07  (1文件, 518条, 287 KB)
       ├── 📄 2026-02-06  (1文件, 1,324条, 682 KB)
       ├── 📄 2026-02-05  (1文件, 1,284条, 662 KB)
       ├── 📄 2026-02-04  (1文件, 1,372条, 707 KB)
       ├── 📄 2026-02-03  (1文件, 699条, 360 KB)
       ├── 📄 2026-02-02  (1文件, 18,837条, 20.3 MB)
       ├── 📄 2026-02-01  (1文件, 23,246条, 24.5 MB)
       ├── 📄 2026-01-31  (1文件, 33,452条, 38.1 MB)
       ├── 📄 2026-01-30  (1文件, 37,364条, 41.6 MB)
       ├── 📄 2026-01-29  (1文件, 37,456条, 41.2 MB)
       ├── 📄 2026-01-28  (1文件, 37,520条, 43.2 MB)
       ├── ...
       └── 📄 更多历史文件
```

### 文件命名规则
```
support_resistance_YYYYMMDD.jsonl

例如:
- support_resistance_20260207.jsonl  ← 2026年2月7日
- support_resistance_20260206.jsonl  ← 2026年2月6日
- support_resistance_20260205.jsonl  ← 2026年2月5日
```

---

## 💾 这个目录存储了什么数据？

### 核心功能
存储**27个加密货币的每日支撑压力线数据**，用于判断币价在支撑和压力之间的相对位置。

### 数据内容
每个文件包含当天所有时刻（每5分钟采集一次）的27个币种的支撑压力数据：

1. **支撑线1** (7天周期): 过去7天的最低价
2. **支撑线2** (48小时周期): 近48小时的最低价
3. **压力线1** (7天周期): 过去7天的最高价
4. **压力线2** (48小时周期): 近48小时的最高价
5. **位置百分比**: 当前价格在支撑压力区间的百分比位置

---

## 📊 数据结构示例

### 单条记录格式
```json
{
  "type": "coin",
  "symbol": "BTCUSDT",
  "current_price": 68500.0,
  
  // 支撑压力位
  "support_line_1": 65080.0,      // 7天支撑位
  "support_line_2": 68036.4,      // 48h支撑位
  "resistance_line_1": 71097.7,   // 7天压力位
  "resistance_line_2": 70527.7,   // 48h压力位
  
  // 位置百分比 (0-100%)
  "position_7d": 56.78,           // 在7天区间的位置
  "position_48h": 33.81,          // 在48h区间的位置
  "position_s2_r1": 56.78,        // 支撑2到压力1的位置
  "position_s1_r2": 72.34,        // 支撑1到压力2的位置
  
  // 距离百分比
  "distance_to_support_1": 5.12,  // 距离7天支撑位 5.12%
  "distance_to_resistance_1": 3.79, // 距离7天压力位 3.79%
  "distance_to_support_2": 0.68,  // 距离48h支撑位 0.68%
  "distance_to_resistance_2": 2.96, // 距离48h压力位 2.96%
  
  // 预警状态 (0=未触发, 1=已触发)
  "alert_scenario_1": 0,          // 场景1: 接近48h支撑 (≤5%)
  "alert_scenario_2": 0,          // 场景2: 接近7天支撑 (≤5%)
  "alert_scenario_3": 0,          // 场景3: 接近48h压力 (≥95%)
  "alert_scenario_4": 0,          // 场景4: 接近7天压力 (≥95%)
  
  "alert_triggered": 0,           // 总预警状态
  "alert_7d_low": 0,              // 7天低位预警
  "alert_7d_high": 0,             // 7天高位预警
  "alert_48h_low": 0,             // 48h低位预警
  "alert_48h_high": 0,            // 48h高位预警
  
  // 时间信息
  "record_time": "2026-02-07 15:30:00",
  "record_time_beijing": "2026-02-07 23:30:00",
  
  // 24小时涨跌幅
  "price_change_24h": -150.5,
  "change_percent_24h": -0.22,
  "baseline_price_24h": 68650.5
}
```

### 快照记录格式
每个文件还包含定期的"快照"记录，汇总所有币种的预警情况：
```json
{
  "type": "snapshot",
  "timestamp": "2026-02-07T15:30:00+08:00",
  "date": "20260207",
  "time": "15:30:00",
  "data": {
    "snapshot_time": "2026-02-07 15:30:00",
    "snapshot_date": "2026-02-07",
    
    // 4种场景的币种数量
    "scenario_1_count": 2,        // 场景1触发的币种数
    "scenario_2_count": 3,        // 场景2触发的币种数
    "scenario_3_count": 1,        // 场景3触发的币种数
    "scenario_4_count": 0,        // 场景4触发的币种数
    
    // 触发预警的具体币种
    "scenario_1_coins": ["SOL", "DOT"],
    "scenario_2_coins": ["BTC", "ETH", "BNB"],
    "scenario_3_coins": ["DOGE"],
    "scenario_4_coins": [],
    
    "total_coins": 27,
    "created_at": "2026-02-07 15:30:00"
  }
}
```

---

## 🚨 4种预警场景说明

### 场景1: 接近48小时支撑位 ✅
- **触发条件**: `position_48h ≤ 5%`
- **含义**: 币价跌到近48小时最低点附近
- **信号**: 短线买入机会（可能反弹）

### 场景2: 接近7天支撑位 ✅✅
- **触发条件**: `position_7d ≤ 5%`
- **含义**: 币价跌到近7天最低点附近
- **信号**: 强买入信号（支撑力度更强）

### 场景3: 接近48小时压力位 ⚠️
- **触发条件**: `position_48h ≥ 95%`
- **含义**: 币价涨到近48小时最高点附近
- **信号**: 短线卖出警告（可能回调）

### 场景4: 接近7天压力位 ⚠️⚠️
- **触发条件**: `position_7d ≥ 95%`
- **含义**: 币价涨到近7天最高点附近
- **信号**: 强卖出警告（压力较大）

---

## 📈 位置百分比计算公式

### position_7d (7天位置)
```
position_7d = (当前价格 - 支撑线1) / (压力线1 - 支撑线1) × 100%

例: BTC当前价格 $68,500
    支撑线1 (7天最低) = $65,080
    压力线1 (7天最高) = $71,097
    
    position_7d = (68,500 - 65,080) / (71,097 - 65,080) × 100%
                = 3,420 / 6,017 × 100%
                = 56.84%

解读: BTC价格位于7天支撑压力区间的56.84%位置（中间偏上）
```

### position_48h (48小时位置)
```
position_48h = (当前价格 - 支撑线2) / (压力线2 - 支撑线2) × 100%

例: BTC当前价格 $68,500
    支撑线2 (48h最低) = $68,036.4
    压力线2 (48h最高) = $70,527.7
    
    position_48h = (68,500 - 68,036.4) / (70,527.7 - 68,036.4) × 100%
                 = 463.6 / 2,491.3 × 100%
                 = 18.60%

解读: BTC价格位于48h支撑压力区间的18.60%位置（偏下方）
```

---

## 📊 每日记录数量差异分析

从截图可以看到，不同日期的记录数差异很大：

| 日期 | 文件数 | 记录数 | 大小 | 分析 |
|------|-------|--------|------|------|
| 2026-02-07 | 1 | 518 | 287 KB | 很少，系统即将停止 |
| 2026-02-06 | 1 | 1,324 | 682 KB | 较少 |
| 2026-02-05 | 1 | 1,284 | 662 KB | 较少 |
| 2026-02-04 | 1 | 1,372 | 707 KB | 较少 |
| 2026-02-03 | 1 | 699 | 360 KB | 很少 |
| 2026-02-02 | 1 | 18,837 | 20.3 MB | 正常 |
| 2026-02-01 | 1 | 23,246 | 24.5 MB | 正常 |
| 2026-01-31 | 1 | 33,452 | 38.1 MB | 较多 |
| 2026-01-30 | 1 | 37,364 | 41.6 MB | 很多 |
| 2026-01-29 | 1 | 37,456 | 41.2 MB | 很多 |
| 2026-01-28 | 1 | 37,520 | 43.2 MB | 很多 |

### 记录数差异原因
1. **2026-02-03之后记录数骤减**: 系统可能在准备停止，采集频率降低
2. **2026-01-28 ~ 2026-02-02**: 正常运行期，记录数稳定在 18,000 ~ 37,000 条/天
3. **每5分钟采集一次**: 一天最多 288 次（24小时×60分钟÷5分钟）× 27币种 = 7,776条基础数据
4. **实际记录更多**: 因为除了币种数据，还有快照汇总数据

---

## 🔍 数据用途

### 首页支撑压力线系统卡片
老版系统在首页显示4个场景的实时币种数量：
```
┌─────────────────────────────────────────┐
│   📈 支撑压力线系统                      │
├─────────────────────────────────────────┤
│ 情况1: 接近支撑2 (≤5%)        3个币种  │
│ 情况2: 接近支撑1 (≤5%)        5个币种  │
│ 情况3: 接近压力2 (≥95%)       2个币种  │
│ 情况4: 接近压力1 (≥95%)       1个币种  │
└─────────────────────────────────────────┘
```

### 历史回溯分析
- 查看特定日期的币价支撑压力位置
- 分析预警场景的历史触发情况
- 统计买入卖出信号的准确率

---

## ⚠️ 系统状态

### 🔴 已停止更新
- **停止日期**: 2026-02-07
- **原因**: 被新版"价格位置预警系统 v2.0.5"替代
- **新版位置**: `/home/user/webapp/data/price_position/`

### 新旧版本对比
| 特性 | 老版 (此目录) | 新版 (price_position) |
|------|--------------|---------------------|
| 数据量 | 41天, 90万条 | 2天, 79万条 |
| 文件大小 | 976 MB | 3.6 MB |
| 更新状态 | 🔴 已停止 | 🟢 运行中 |
| 字段命名 | `support_line_1/2` | `low_7d/high_7d` |
| 最后更新 | 2026-02-07 | 2026-02-16 |

---

## 💡 数据管理建议

### 保留理由
✅ **建议保留历史数据**，原因：
1. 包含41天完整历史数据（2025-12-25 ~ 2026-02-07）
2. 可用于回溯分析和策略验证
3. 数据量不算太大（976 MB）

### 显示建议
❌ **建议在数据管理页面标记为"已停止"**
- 不影响当前系统运行
- 但保留历史数据查询功能
- 可添加"🔴 已停止"标签

---

## 🔍 快速查看命令

### 查看目录结构
```bash
cd /home/user/webapp/data/support_resistance_daily
ls -lh | tail -20
```

### 统计记录数
```bash
wc -l *.jsonl
```

### 查看最后一天的数据
```bash
tail -n 10 support_resistance_20260207.jsonl | python3 -m json.tool
```

### 查看某个币种的历史数据
```bash
grep '"symbol": "BTCUSDT"' support_resistance_20260207.jsonl | head -1 | python3 -m json.tool
```

---

## 📚 相关文档

- **新版系统**: 价格位置预警系统 v2.0.5 (`price_position/`)
- **对比文档**: `PRICE_POSITION_VS_SUPPORT_RESISTANCE.md`
- **活跃系统**: `ACTIVE_SYSTEMS_JSONL_DATA.md`

---

**文档更新**: 2026-02-16  
**截图来源**: 数据管理系统  
**目录状态**: 🔴 已停止更新（2026-02-07）
