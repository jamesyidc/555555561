# 27币涨跌幅总和追踪器使用指南

## 📍 页面地址

https://5000-igsydcyqs9jlcot56rnqk-18e660f9.sandbox.novita.ai/coin-price-tracker

## 🎯 核心功能

**一个曲线图显示1月3日到1月16日的27个币涨跌幅相加的值**

### 主要特点
- ✅ **时间范围**: 2026年1月3日 00:00 - 2026年1月16日 23:30
- ✅ **数据粒度**: 30分钟一个数据点
- ✅ **总数据点**: 约 14天 × 48点/天 = 672个数据点
- ✅ **数据来源**: JSONL格式存储 (`data/coin_price_tracker/coin_prices_30min.jsonl`)
- ✅ **计算方式**: 每个时间点的27个币种涨跌幅相加

## 📊 页面结构

### 1. 主曲线图
- **显示内容**: 27币涨跌幅总和的时间序列
- **X轴**: 时间（格式：MM-DD HH:MM，如 01-03 12:00）
- **Y轴**: 27币涨跌幅总和（%）
- **基准线**: 0%参考线（虚线）
- **颜色**: 紫色渐变曲线 + 半透明区域填充
- **交互**: 鼠标悬停显示详细数值

### 2. 日期选择器
- **功能**: 选择具体日期查看当日48个节点详细数据
- **操作**: 下拉选择日期 → 点击"🔍 查看当日详细"按钮
- **显示**: 当日所有时间节点的27币总和列表

### 3. 详细数据表
- **触发**: 选择日期并点击查看按钮后显示
- **内容**: 
  - 序号
  - 时间节点（精确到分钟）
  - 27币涨跌幅总和（%，带颜色区分）

### 4. CSV导出
- **文件名**: `coin_sum_2026-01-03_to_2026-01-16.csv`
- **字段**: 时间, 27币涨跌幅总和(%)
- **用途**: Excel或数据分析工具进一步处理

## 🔢 数据计算逻辑

### 计算公式
```javascript
每个时间点的27币涨跌幅总和 = Σ(各币种涨跌幅)
= BTC涨跌幅 + ETH涨跌幅 + XRP涨跌幅 + ... + AAVE涨跌幅
```

### 示例计算
```
时间点: 2026-01-03 12:00

各币种涨跌幅（相对当天00:00）:
BTC: -1.45%
ETH: +0.23%
XRP: -0.50%
BNB: -0.79%
SOL: -1.06%
LTC: +0.12%
DOGE: -2.30%
SUI: +0.45%
... (其他19个币种)

27币涨跌幅总和 = (-1.45) + 0.23 + (-0.50) + (-0.79) + (-1.06) + 0.12 + (-2.30) + 0.45 + ... 
                = -15.42%
```

### 基准价格说明
- **基准时间**: 每天UTC+8 00:00（北京时间凌晨0点）
- **基准重置**: 每天0点重置为0%
- **涨跌幅**: 相对于当天0点的价格变化百分比

## 📈 曲线图解读

### 数值含义
| 总和数值 | 市场状态 | 解释 |
|---------|---------|------|
| **正数（>0%）** | 整体上涨 | 多数币种上涨或少数币种大幅上涨 |
| **负数（<0%）** | 整体下跌 | 多数币种下跌或少数币种大幅下跌 |
| **接近0%** | 市场平衡 | 涨跌互相抵消，市场震荡 |
| **大幅正数（>+20%）** | 强势上涨 | 市场普遍看涨 |
| **大幅负数（<-20%）** | 强势下跌 | 市场普遍看跌 |

### 趋势分析
1. **持续上升**: 市场处于上涨趋势，多头强势
2. **持续下降**: 市场处于下跌趋势，空头强势
3. **上下波动**: 市场震荡，多空博弈
4. **急速拉升**: 可能有重大利好消息
5. **急速跳水**: 可能有重大利空消息

## 🚀 使用流程

### 快速开始
1. **打开页面**: https://5000-igsydcyqs9jlcot56rnqk-18e660f9.sandbox.novita.ai/coin-price-tracker
2. **查看曲线**: 自动加载1月3日-1月16日完整数据
3. **分析趋势**: 观察曲线走势，判断整体市场状态

### 查看详细数据
1. **选择日期**: 下拉选择框中选择具体日期（如 2026-01-10）
2. **点击查看**: 点击"🔍 查看当日详细"按钮
3. **浏览数据**: 查看该日48个时间节点的详细数据
4. **导出数据**: 点击"📥 导出CSV"按钮下载所有数据

## 📝 数据说明

### 数据来源
- **文件路径**: `/home/user/webapp/data/coin_price_tracker/coin_prices_30min.jsonl`
- **格式**: JSONL（每行一个JSON对象）
- **采集频率**: 每30分钟自动采集
- **数据完整性**: 目标672个数据点（14天 × 48点/天）

### JSONL数据结构
```json
{
  "collect_time": "2026-01-03 12:00:00",
  "timestamp": 1704254400000,
  "base_date": "2026-01-03",
  "coins": {
    "BTC": {
      "base_price": 95392.80,
      "current_price": 94000.00,
      "change_pct": -1.45
    },
    "ETH": { ... },
    ... (共27个币种)
  },
  "total_coins": 27,
  "valid_coins": 27
}
```

### API端点
```
GET /api/coin-price-tracker/history
参数:
  - start_time: 2026-01-03 00:00:00
  - end_time: 2026-01-16 23:30:00
  
返回: 指定时间范围的所有数据记录
```

## 💡 使用建议

### 1. 市场整体判断
- 查看曲线整体走势（上升/下降/震荡）
- 关注极值点（最高/最低）
- 分析波动幅度

### 2. 关键时间点分析
- 找到曲线的转折点
- 查看该时间点的详细数据
- 结合外部消息面分析

### 3. 多日对比
- 选择不同日期查看详细数据
- 对比不同日期的走势特征
- 识别重复出现的模式

### 4. 数据导出分析
- 导出CSV文件
- 在Excel中制作更多图表
- 用Python/R进行统计分析

## ⚠️ 注意事项

1. **数据完整性**: 
   - 历史数据正在回填中
   - 部分早期数据可能缺失
   - 以实际显示的数据点数量为准

2. **基准价格**:
   - 每天0点基准价格不同
   - 跨日比较需注意基准差异
   - 建议单日内分析

3. **数据延迟**:
   - 实时数据每30分钟更新
   - 页面不会自动刷新
   - 需要手动刷新浏览器查看最新数据

4. **性能**:
   - 加载672个数据点可能需要几秒
   - 请耐心等待数据加载完成

## 🎨 页面特性

### 视觉设计
- **背景**: 紫色渐变（#667eea → #764ba2）
- **卡片**: 白色半透明毛玻璃效果
- **曲线**: 紫色渐变 + 半透明区域填充
- **配色**: 绿色（正数）/ 红色（负数）/ 灰色（零）

### 交互特性
- **鼠标悬停**: 显示精确数值
- **曲线平滑**: 使用smooth平滑算法
- **响应式**: 自适应不同屏幕尺寸
- **标签自动间隔**: 避免X轴标签拥挤

## ✅ 功能检查清单

- ✅ 主曲线图显示1月3日-1月16日完整数据
- ✅ 30分钟粒度，约672个数据点
- ✅ 27币涨跌幅总和自动计算
- ✅ 日期选择器（1月3日-1月16日）
- ✅ 当日详细数据表（48个节点）
- ✅ CSV导出功能
- ✅ 0%基准线参考
- ✅ 数值颜色区分（绿/红）
- ✅ 响应式设计

## 🔗 相关页面

| 页面 | URL | 功能 |
|------|-----|------|
| **27币总和追踪器** | `/coin-price-tracker` | 1月3日-16日总和曲线图（本页面） |
| **历史数据查询** | `/coin-price-history` | 按日期查询27个币种详细数据 |

## 📚 相关文档

- `COIN_PRICE_TRACKER_SUMMARY.md` - 整体功能说明
- `HISTORY_PAGE_GUIDE.md` - 历史数据页面指南
- `FAILURE_RETRY_MECHANISM.md` - 失败重试机制
- `UPDATE_LOG.md` - 更新日志

---

**版本**: v2.0  
**最后更新**: 2026-01-16 14:20  
**Git提交**: 6286d2e  
**数据来源**: JSONL文件 (`coin_prices_30min.jsonl`)
