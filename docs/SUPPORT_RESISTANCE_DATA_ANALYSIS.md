# 支撑压力系统 697MB 数据详细分析报告

**分析时间**: 2026-01-27  
**文件**: `data/support_resistance_jsonl/support_resistance_levels.jsonl`

---

## 📊 数据总览

```
文件大小: 697 MB
总记录数: 708,895 条
币种数量: 27 个
时间跨度: 30 天 (2025-12-25 ~ 2026-01-23)
单条大小: 1,031 字节 (~1.0 KB)
```

---

## 💾 存储内容详解

### 每条记录包含 33 个字段

#### 1. 基础信息 (3个字段)
```json
{
  "symbol": "BTCUSDT",           // 交易对
  "current_price": 89304.9,      // 当前价格
  "record_time": "2026-01-23 22:00:01",  // 记录时间
  "record_time_beijing": "2026-01-23 22:00:01"  // 北京时间
}
```

#### 2. 支撑线数据 (4个字段)
```json
{
  "support_line_1": 87200.1,     // 7天支撑线
  "support_line_2": 88633.0,     // 48小时支撑线
  "support_1_days": 7,           // 支撑线1时间周期
  "support_2_hours": 48          // 支撑线2时间周期
}
```

#### 3. 压力线数据 (4个字段)
```json
{
  "resistance_line_1": 95495.0,  // 7天压力线
  "resistance_line_2": 90042.9,  // 48小时压力线
  "resistance_1_days": 7,        // 压力线1时间周期
  "resistance_2_hours": 48       // 压力线2时间周期
}
```

#### 4. 位置指标 (8个字段)
```json
{
  "position_7d": 25.37,          // 7天区间位置百分比
  "position_48h": 47.66,         // 48小时区间位置百分比
  "position_s2_r1": 22.73,       // 支撑2到压力1的位置
  "position_s1_r2": 62.50,       // 支撑1到压力2的位置
  "position_s1_r2_upper": 62.50, // 上区间位置
  "position_s1_r1": 22.73        // 支撑1到压力1的位置
}
```

#### 5. 距离指标 (4个字段)
```json
{
  "distance_to_support_1": 2.41,    // 到支撑线1的距离百分比
  "distance_to_support_2": 0.76,    // 到支撑线2的距离百分比
  "distance_to_resistance_1": 6.93, // 到压力线1的距离百分比
  "distance_to_resistance_2": 0.84  // 到压力线2的距离百分比
}
```

#### 6. 告警标记 (10个字段)
```json
{
  // 场景告警 (旧版)
  "alert_scenario_1": 0,         // 7天低位告警 (position_7d <= 10%)
  "alert_scenario_2": 0,         // 7天高位告警 (position_7d >= 90%)
  "alert_scenario_3": 0,         // 48h低位告警 (position_48h <= 10%)
  "alert_scenario_4": 0,         // 48h高位告警 (position_48h >= 90%)
  
  // 新版告警标记
  "alert_7d_low": 0,             // 7天低位告警
  "alert_7d_high": 0,            // 7天高位告警
  "alert_48h_low": 0,            // 48小时低位告警
  "alert_48h_high": 0,           // 48小时高位告警
  
  "alert_triggered": 0           // 总告警触发状态
}
```

#### 7. 24小时变化 (3个字段)
```json
{
  "baseline_price_24h": 88950.0, // 24小时基准价格
  "price_change_24h": 354.9,     // 24小时价格变化
  "change_percent_24h": 0.40     // 24小时涨跌幅百分比
}
```

---

## 📅 每日数据量分布

### 完整统计 (30天)

| 日期 | 记录数 | 数据量 | 说明 |
|------|--------|--------|------|
| 2025-12-25 | 21,401 | 21.0 MB | 首日数据 |
| 2025-12-26 | 36,275 | 35.7 MB | 正常采集 |
| 2025-12-27 | 36,421 | 35.8 MB | 正常采集 |
| 2025-12-28 | 36,583 | 36.0 MB | 正常采集 |
| 2025-12-29 | 36,884 | 36.3 MB | 正常采集 |
| 2025-12-30 | 37,878 | 37.2 MB | 峰值 |
| 2025-12-31 | 26,862 | 26.4 MB | 年末减少 |
| 2026-01-01 | 29,083 | 28.6 MB | 新年 |
| 2026-01-02 | 35,759 | 35.2 MB | 恢复正常 |
| 2026-01-03 | 35,316 | 34.7 MB | 正常采集 |
| 2026-01-04 | 16,148 | 15.9 MB | 数据减少 |
| 2026-01-05 | 14,694 | 14.4 MB | 数据减少 |
| 2026-01-06 | 34,512 | 33.9 MB | 恢复正常 |
| 2026-01-07 | 18,567 | 18.3 MB | 周末减少 |
| 2026-01-08 | 16,935 | 16.7 MB | 周末减少 |
| 2026-01-09 | 34,810 | 34.2 MB | 恢复正常 |
| 2026-01-10 | 18,671 | 18.4 MB | 数据减少 |
| 2026-01-11 | 36,101 | 35.5 MB | 正常采集 |
| 2026-01-12 | 25,723 | 25.3 MB | 周末减少 |
| 2026-01-13 | 15,214 | 15.0 MB | 周末减少 |
| 2026-01-14 | 36,203 | 35.6 MB | 恢复正常 |
| 2026-01-15 | 25,707 | 25.3 MB | 数据减少 |
| 2026-01-16 | 36,055 | 35.5 MB | 正常采集 |
| 2026-01-17 | 28,651 | 28.2 MB | 数据减少 |
| 2026-01-18 | 7,126 | 7.0 MB | ⚠️ 显著减少 |
| 2026-01-19 | 6,856 | 6.7 MB | ⚠️ 显著减少 |
| 2026-01-20 | 677 | 0.7 MB | ⚠️ 极少数据 |
| 2026-01-21 | 1,296 | 1.3 MB | ⚠️ 极少数据 |
| 2026-01-22 | 1,267 | 1.2 MB | ⚠️ 极少数据 |
| 2026-01-23 | 1,215 | 1.2 MB | ⚠️ 极少数据 |

### 数据量趋势
```
正常期 (12/25-01/17): 平均 ~27,000 条/天 (~26.5 MB/天)
异常期 (01/18-01/23): 平均 ~3,000 条/天 (~2.9 MB/天)
```

---

## ⏱️ 采集频率分析

### 总体统计
```
平均每天: 23,630 条
平均每币种每天: 875 条
采集间隔: 约 1.6 分钟/次
```

### 采集模式
```
27个币种 × 875次/天 ÷ 24小时 = 每小时 983 条
27个币种 × 875次/天 ÷ 1440分钟 = 每分钟 16.4 条
平均每个币种每 1.6 分钟采集一次
```

### 正常采集期 (12/25-01/17)
```
每天约 27,000 条
每币种约 1,000 条/天
采集间隔: 约 1.4 分钟/次
```

### 异常采集期 (01/18-01/23)
```
每天约 3,000 条
每币种约 111 条/天
采集间隔: 约 13 分钟/次
⚠️ 采集频率降低了约 90%
```

---

## 🔍 数据用途

### 1. 实时监控
- 27个主流币种的支撑压力线实时追踪
- 每1.6分钟更新一次价格位置
- 多时间周期分析（7天 + 48小时）

### 2. 告警系统
- **场景1**: 7天位置 ≤ 10% (触碰7天支撑线)
- **场景2**: 7天位置 ≥ 90% (触碰7天压力线)
- **场景3**: 48h位置 ≤ 10% (触碰48小时支撑线)
- **场景4**: 48h位置 ≥ 90% (触碰48小时压力线)

### 3. 趋势分析
- 价格在支撑压力区间的位置变化
- 支撑压力线突破/回踩分析
- 24小时涨跌幅对比

### 4. 历史回溯
- 30天历史数据完整保存
- 支持按日期查询历史支撑压力线
- 位置变化轨迹分析

---

## 📈 数据增长预测

### 当前状态
```
30天数据: 697 MB
平均每天: 23.2 MB
```

### 未来增长预测
```
60天数据: ~1.4 GB
90天数据: ~2.1 GB
180天数据: ~4.2 GB
365天数据: ~8.5 GB
```

### 采集频率维持不变的前提下
```
1年数据 ≈ 8.5 GB
2年数据 ≈ 17 GB
3年数据 ≈ 25 GB
```

---

## 💡 优化建议

### 1. 按日期存储（推荐）⭐
```
优势:
✅ 快速查询特定日期
✅ 自动清理旧数据
✅ 文件小，读写快
✅ 便于归档和备份

实施:
参考 DATE_BASED_STORAGE_GUIDE.md
```

### 2. 数据压缩
```
30天前的数据: gzip 压缩 (节省 ~70% 空间)
90天前的数据: 归档到冷存储
```

### 3. 字段优化
```
考虑移除冗余字段:
- position_s2_r1, position_s1_r2_upper (可计算得出)
- alert_scenario_1~4 (与新版告警重复)

预计可节省: ~15% 空间 (~105 MB)
```

### 4. 采样策略
```
历史数据: 保留关键节点数据
- 突破支撑/压力线的记录
- 告警触发的记录
- 整点数据

预计可节省: ~50% 空间 (~350 MB)
```

### 5. 数据库方案
```
考虑使用:
- TimescaleDB (时序数据库)
- InfluxDB (高效压缩)
- Parquet 格式 (列式存储，高压缩比)

预计可节省: ~60-80% 空间
```

---

## 🎯 按日期存储后的预期效果

### 当前格式
```
support_resistance_levels.jsonl
├─ 697MB 单文件
├─ 708,895 条记录
└─ 30天数据混合存储
```

### 按日期存储后
```
support_resistance_daily/
├─ 2025-12-25/
│  └─ levels.jsonl (21 MB)
├─ 2025-12-26/
│  └─ levels.jsonl (36 MB)
├─ ...
└─ 2026-01-23/
   └─ levels.jsonl (1.2 MB)

优势:
✅ 查询今天数据: 只读 1.2 MB (vs 697 MB)
✅ 查询特定日期: 精确定位 (vs 全文扫描)
✅ 自动清理: 删除整个日期目录
✅ 并发安全: 不同日期可并行写入
```

---

## 📊 27个监控币种列表

```
1. AAVEUSDT    - Aave
2. APTUSDT     - Aptos
3. BCHUSDT     - Bitcoin Cash
4. BNBUSDT     - BNB
5. BTCUSDT     - Bitcoin
6. CFXUSDT     - Conflux
7. CROUSDT     - Crypto.com Coin
8. CRVUSDT     - Curve DAO
9. DOGEUSDT    - Dogecoin
10. DOTUSDT    - Polkadot
11. ETCUSDT    - Ethereum Classic
12. ETHUSDT    - Ethereum
13. FILUSDT    - Filecoin
14. HBARUSDT   - Hedera
15. LDOUSDT    - Lido DAO
16. LINKUSDT   - Chainlink
17. LTCUSDT    - Litecoin
18. NEARUSDT   - Near Protocol
19. SOLUSDT    - Solana
20. STXUSDT    - Stacks
21. SUIUSDT    - Sui
22. TAOUSDT    - Bittensor
23. TONUSDT    - Toncoin
24. TRXUSDT    - Tron
25. UNIUSDT    - Uniswap
26. XLMUSDT    - Stellar
27. XRPUSDT    - XRP
```

---

## ⚠️ 注意事项

### 近期数据异常
```
时间: 2026-01-18 ~ 2026-01-23
问题: 数据量显著减少（降低90%）
可能原因:
- 采集器故障或停止
- 网络连接问题
- 数据源API限制
- 系统维护

建议: 检查采集器日志和PM2服务状态
```

### 数据完整性
```
✅ 前期数据 (12/25-01/17): 完整
⚠️ 近期数据 (01/18-01/23): 不完整

恢复建议:
1. 检查 PM2 服务: support-resistance-snapshot
2. 查看采集器日志: pm2 logs support-resistance-snapshot
3. 验证数据源API可用性
4. 必要时重启采集器
```

---

## 📝 总结

### 数据价值
```
✅ 27个主流币种实时监控
✅ 30天历史数据完整保存
✅ 多时间周期支撑压力分析
✅ 自动告警系统支持
✅ 1.6分钟采集频率（高精度）
```

### 当前状态
```
文件大小: 697 MB (30天)
记录数: 708,895 条
数据完整性: ⚠️ 近6天数据异常减少
系统状态: ✅ 运行中
```

### 后续行动
```
1. 调查01/18-01/23数据异常原因
2. 实施按日期存储方案（推荐）
3. 配置自动数据清理（保留90天）
4. 考虑数据压缩和归档策略
```

---

**报告生成时间**: 2026-01-27  
**分析文件**: support_resistance_levels.jsonl  
**报告版本**: v1.0
