# ğŸª™ 27å¸æ¶¨è·Œå¹…è¿½è¸ªç³»ç»Ÿ - JSONL æ•°æ®æ ¼å¼éªŒè¯æŠ¥å‘Š

**éªŒè¯æ—¶é—´**: 2026-01-24 17:10 åŒ—äº¬æ—¶é—´  
**ç³»ç»ŸçŠ¶æ€**: âœ… å®Œå…¨æ­£å¸¸  
**æ•°æ®æ ¼å¼**: âœ… å·²ä½¿ç”¨ JSONL

---

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

**ç³»ç»Ÿåç§°**: 27å¸æ¶¨è·Œå¹…è¿½è¸ªç³»ç»Ÿ  
**è¿½è¸ªå‘¨æœŸ**: 1åˆ†é’Ÿ  
**è¿½è¸ªå¸ç§**: 27ä¸ªä¸»æµå¸ç§  
**åŸºå‡†ä»·è®¾ç½®**: æ¯å¤©ä½¿ç”¨æ—¥çº¿å¼€ç›˜ä»·ï¼ˆä»£è¡¨0ç‚¹ä»·æ ¼ï¼‰

---

## âœ… éªŒè¯ç»“æœ

### 1. æ•°æ®æ ¼å¼éªŒè¯ âœ…

**å½“å‰æ ¼å¼**: JSONLï¼ˆJSON Linesï¼‰

**ä»£ç éªŒè¯**ï¼š
```python
# æºæ–‡ä»¶: /home/user/webapp/source_code/coin_change_tracker.py
# ç¬¬ 256 è¡Œï¼š
with open(data_file, 'a') as f:
    f.write(json.dumps(record, ensure_ascii=False) + '\n')
```

**æ•°æ®æ–‡ä»¶ç¤ºä¾‹**ï¼š
```
data/coin_change_tracker/
â”œâ”€â”€ baseline_20260122.json (969 bytes)
â”œâ”€â”€ baseline_20260123.json (967 bytes)
â”œâ”€â”€ baseline_20260124.json (971 bytes) âœ… ä»Šå¤©çš„åŸºå‡†ä»·
â”œâ”€â”€ coin_change_20260122.jsonl (1.9M) âœ… JSONLæ ¼å¼
â”œâ”€â”€ coin_change_20260123.jsonl (3.4M) âœ… JSONLæ ¼å¼
â””â”€â”€ coin_change_20260124.jsonl (2.6K) âœ… JSONLæ ¼å¼ï¼ˆæ–°ç”Ÿæˆï¼‰
```

### 2. æ•°æ®ç»“æ„ âœ…

**JSONL è®°å½•æ ¼å¼**ï¼š
```json
{
    "timestamp": "2026-01-24T17:09:10.866703+08:00",
    "timestamp_unix": 1769245750,
    "date": "20260124",
    "time": "17:09:10",
    "baseline_date": "20260124",
    "total_change": -14.03,
    "valid_count": 27,
    "changes": {
        "BTC-USDT-SWAP": {
            "baseline_price": 89703.7,
            "current_price": 89577.8,
            "change_pct": -0.14
        },
        "ETH-USDT-SWAP": {
            "baseline_price": 2950.96,
            "current_price": 2961.21,
            "change_pct": 0.35
        },
        // ... å…¶ä»– 25 ä¸ªå¸ç§
    }
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `timestamp`: ISO 8601 æ ¼å¼æ—¶é—´æˆ³ï¼ˆå¸¦æ—¶åŒºï¼‰
- `timestamp_unix`: Unix æ—¶é—´æˆ³
- `date`: æ—¥æœŸï¼ˆYYYYMMDDï¼‰
- `time`: æ—¶é—´ï¼ˆHH:MM:SSï¼‰
- `baseline_date`: åŸºå‡†ä»·æ—¥æœŸ
- `total_change`: 27å¸æ¶¨è·Œå¹…æ€»å’Œï¼ˆ%ï¼‰
- `valid_count`: æœ‰æ•ˆå¸ç§æ•°é‡
- `changes`: æ¯ä¸ªå¸ç§çš„è¯¦ç»†æ•°æ®

### 3. é‡‡é›†å™¨çŠ¶æ€ âœ…

**PM2 è¿›ç¨‹**ï¼š
```
ID: 2
Name: coin-change-tracker
Status: online âœ…
PID: 13946
Uptime: è¿è¡Œä¸­
Memory: 8.2 MB
```

**é‡‡é›†æ—¥å¿—**ï¼ˆæœ€æ–°ï¼‰ï¼š
```
â° 2026-01-24 17:09:10 (åŒ—äº¬æ—¶é—´)
ğŸ“Š 27å¸æ¶¨è·Œå¹…ä¹‹å’Œ: -14.03%
âœ… æœ‰æ•ˆå¸ç§æ•°: 27/27

ğŸ“ˆ æ¶¨å¹…å‰3:
   CRO: +1.57% ($0.0933)
   LTC: +0.51% ($68.5300)
   ETH: +0.35% ($2961.2100)

ğŸ“‰ è·Œå¹…å‰3:
   HBAR: -1.63% ($0.1082)
   TAO: -2.11% ($236.6000)
   CRV: -3.49% ($0.3569)
```

### 4. API éªŒè¯ âœ…

#### API 1: è·å–æœ€æ–°æ•°æ®
```bash
GET /api/coin-change-tracker/latest
```

**æµ‹è¯•ç»“æœ**ï¼š
```json
{
    "success": true,
    "data": {
        "timestamp": "2026-01-24T17:09:10.866703+08:00",
        "total_change": -14.03,
        "valid_count": 27,
        "time": "17:09:10"
    }
}
```

#### API 2: è·å–å†å²æ•°æ®
```bash
GET /api/coin-change-tracker/history?date=20260124&limit=1440
```

**åŠŸèƒ½**ï¼š
- è¯»å–æŒ‡å®šæ—¥æœŸçš„ JSONL æ–‡ä»¶
- æ”¯æŒ limit å‚æ•°é™åˆ¶è¿”å›æ•°é‡
- é»˜è®¤è¿”å›å½“å¤©æ•°æ®

#### API 3: è·å–åŸºå‡†ä»·
```bash
GET /api/coin-change-tracker/baseline
```

**åŠŸèƒ½**ï¼š
- è¿”å›å½“å¤©çš„åŸºå‡†ä»·æ•°æ®
- åŸºå‡†ä»·æ¥æºï¼šæ—¥çº¿å¼€ç›˜ä»·ï¼ˆä»£è¡¨0ç‚¹ä»·æ ¼ï¼‰

#### API 4: é‡ç½®åŸºå‡†ä»·
```bash
POST /api/coin-change-tracker/reset-baseline
```

**åŠŸèƒ½**ï¼š
- é‡æ–°è·å–å¹¶è®¾ç½®åŸºå‡†ä»·
- ç”¨äºä¿®æ­£å¼‚å¸¸æƒ…å†µ

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### ä»Šå¤©ï¼ˆ2026-01-24ï¼‰

**åŸºå‡†ä»·è®¾ç½®**ï¼š
- æ—¶é—´ï¼š2026-01-24T17:09:00+08:00
- æ¥æºï¼šæ—¥çº¿å¼€ç›˜ä»·
- å¸ç§æ•°ï¼š27/27 âœ…
- ä¿å­˜ä½ç½®ï¼š`baseline_20260124.json`

**å®æ—¶è¿½è¸ª**ï¼š
- å·²é‡‡é›†è®°å½•ï¼š2æ¡ï¼ˆæˆªè‡³éªŒè¯æ—¶é—´ï¼‰
- æ–‡ä»¶å¤§å°ï¼š2.6K
- è¿½è¸ªå‘¨æœŸï¼š1åˆ†é’Ÿ
- ä¸‹æ¬¡é‡‡é›†ï¼šæ¯åˆ†é’Ÿçš„0ç§’

### å†å²æ•°æ®

**2026-01-23**ï¼š
- æ–‡ä»¶å¤§å°ï¼š3.4M
- ä¼°è®¡è®°å½•æ•°ï¼š~1440æ¡ï¼ˆå…¨å¤©ï¼‰
- æ ¼å¼ï¼šJSONL âœ…

**2026-01-22**ï¼š
- æ–‡ä»¶å¤§å°ï¼š1.9M
- ä¼°è®¡è®°å½•æ•°ï¼š~800æ¡ï¼ˆéƒ¨åˆ†ï¼‰
- æ ¼å¼ï¼šJSONL âœ…

---

## ğŸ¯ JSONL æ ¼å¼ä¼˜åŠ¿

### 1. **è¿½åŠ å†™å…¥é«˜æ•ˆ**
- æ¯æ¡è®°å½•ç‹¬ç«‹ä¸€è¡Œ
- è¿½åŠ å†™å…¥æ— éœ€è¯»å–æ•´ä¸ªæ–‡ä»¶
- æ–‡ä»¶é”å®šæ—¶é—´æçŸ­

### 2. **è¯»å–çµæ´»**
- å¯ä»¥æŒ‰è¡Œè¯»å–ï¼Œæ”¯æŒæµå¼å¤„ç†
- å¯ä»¥å¿«é€Ÿè¯»å–æœ€åNæ¡è®°å½•
- æ”¯æŒ tailã€grep ç­‰å‘½ä»¤è¡Œå·¥å…·

### 3. **å­˜å‚¨ä¼˜åŒ–**
- ä¸éœ€è¦ç»´æŠ¤æ•°ç»„ç»“æ„
- æ–‡ä»¶å¤§å°éšè®°å½•æ•°çº¿æ€§å¢é•¿
- æ¯å¤©ä¸€ä¸ªæ–‡ä»¶ï¼Œè‡ªç„¶åˆ†ç‰‡

### 4. **æ•°æ®æ¢å¤å®¹é”™**
- å•è¡ŒæŸåä¸å½±å“å…¶ä»–è¡Œ
- å¯ä»¥å¿«é€Ÿå®šä½å’Œä¿®å¤é”™è¯¯è¡Œ
- æ”¯æŒå¢é‡å¤‡ä»½

---

## ğŸ”§ API ä½¿ç”¨è¯´æ˜

### å‰ç«¯é¡µé¢
```
https://5000-iz51witudb16wj96d1wvr-a402f90a.sandbox.novita.ai/coin-change-tracker
```

### API ç«¯ç‚¹

#### 1. è·å–æœ€æ–°æ•°æ®
```bash
curl "http://localhost:5000/api/coin-change-tracker/latest"
```

#### 2. è·å–å†å²æ•°æ®ï¼ˆä»Šå¤©ï¼‰
```bash
curl "http://localhost:5000/api/coin-change-tracker/history"
```

#### 3. è·å–å†å²æ•°æ®ï¼ˆæŒ‡å®šæ—¥æœŸï¼‰
```bash
curl "http://localhost:5000/api/coin-change-tracker/history?date=20260123&limit=100"
```

#### 4. è·å–åŸºå‡†ä»·
```bash
curl "http://localhost:5000/api/coin-change-tracker/baseline"
```

#### 5. é‡ç½®åŸºå‡†ä»·
```bash
curl -X POST "http://localhost:5000/api/coin-change-tracker/reset-baseline"
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/home/user/webapp/
â”œâ”€â”€ source_code/
â”‚   â””â”€â”€ coin_change_tracker.py          # é‡‡é›†å™¨ä¸»ç¨‹åº
â”œâ”€â”€ data/
â”‚   â””â”€â”€ coin_change_tracker/            # æ•°æ®ç›®å½•
â”‚       â”œâ”€â”€ baseline_YYYYMMDD.json      # æ¯å¤©çš„åŸºå‡†ä»·
â”‚       â””â”€â”€ coin_change_YYYYMMDD.jsonl  # æ¯å¤©çš„è¿½è¸ªæ•°æ®ï¼ˆJSONLæ ¼å¼ï¼‰
â””â”€â”€ logs/
    â””â”€â”€ coin_change_tracker.log         # PM2 æ—¥å¿—
```

---

## ğŸ¨ è¿½è¸ªçš„27ä¸ªå¸ç§

```
BTC, ETH, XRP, BNB, SOL, LTC, DOGE, SUI, TRX, TON
ETC, BCH, HBAR, XLM, FIL, LINK, CRO, DOT, AAVE, UNI
NEAR, APT, CFX, CRV, STX, LDO, TAO
```

---

## âœ… éªŒè¯æ¸…å•

- [x] æ•°æ®æ–‡ä»¶ä½¿ç”¨ JSONL æ ¼å¼
- [x] é‡‡é›†å™¨ä»£ç æ­£ç¡®å®ç° JSONL å†™å…¥
- [x] API æ­£ç¡®è¯»å– JSONL æ•°æ®
- [x] é‡‡é›†å™¨æ­£å¸¸è¿è¡Œï¼ˆPM2ï¼‰
- [x] ä»Šå¤©çš„æ•°æ®æ–‡ä»¶å·²ç”Ÿæˆ
- [x] åŸºå‡†ä»·æ–‡ä»¶æ­£å¸¸
- [x] API æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [x] å‰ç«¯é¡µé¢å¯è®¿é—®
- [x] PM2 é…ç½®å·²ä¿å­˜

---

## ğŸ”„ æ•°æ®æµç¨‹

```
1. æ¯åˆ†é’Ÿè§¦å‘é‡‡é›†
   â†“
2. æ£€æŸ¥æ˜¯å¦éœ€è¦é‡ç½®åŸºå‡†ä»·ï¼ˆæ¯å¤©0ç‚¹ï¼‰
   â†“
3. ä» OKX è·å–27ä¸ªå¸ç§çš„å½“å‰ä»·æ ¼
   â†“
4. è®¡ç®—ç›¸å¯¹åŸºå‡†ä»·çš„æ¶¨è·Œå¹…
   â†“
5. è®¡ç®—27å¸æ¶¨è·Œå¹…æ€»å’Œ
   â†“
6. ä»¥ JSONL æ ¼å¼è¿½åŠ åˆ°å½“å¤©çš„æ•°æ®æ–‡ä»¶
   â†“
7. å‰ç«¯é€šè¿‡ API è¯»å–å¹¶å±•ç¤º
```

---

## ğŸ“ ä½¿ç”¨å»ºè®®

### 1. æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•´ä¸ªæ•°æ®ç›®å½•
tar -czf coin_change_backup_$(date +%Y%m%d).tar.gz data/coin_change_tracker/
```

### 2. æ•°æ®æ¸…ç†
```bash
# åˆ é™¤30å¤©å‰çš„æ•°æ®
find data/coin_change_tracker/ -name "*.jsonl" -mtime +30 -delete
```

### 3. æ•°æ®åˆ†æ
```bash
# æå–ä»Šå¤©çš„æ€»æ¶¨è·Œå¹…
cat data/coin_change_tracker/coin_change_$(date +%Y%m%d).jsonl | \
    jq -r '.total_change' | \
    awk '{sum+=$1; count++} END {print "å¹³å‡:", sum/count"%"}'
```

### 4. å®æ—¶ç›‘æ§
```bash
# å®æ—¶æŸ¥çœ‹é‡‡é›†æ—¥å¿—
pm2 logs coin-change-tracker
```

---

## ğŸ‰ æ€»ç»“

### å½“å‰çŠ¶æ€
âœ… **ç³»ç»Ÿå·²å®Œå…¨ä½¿ç”¨ JSONL æ ¼å¼**
- ä»£ç å®ç°ï¼šJSONL è¿½åŠ å†™å…¥
- æ•°æ®æ–‡ä»¶ï¼š`.jsonl` æ‰©å±•å
- API è¯»å–ï¼šæŒ‰è¡Œè§£æ JSONL
- å‰ç«¯å±•ç¤ºï¼šæ­£å¸¸å·¥ä½œ

### æ€§èƒ½è¡¨ç°
- **å†™å…¥é€Ÿåº¦**ï¼šæ¯«ç§’çº§ï¼ˆè¿½åŠ æ¨¡å¼ï¼‰
- **è¯»å–é€Ÿåº¦**ï¼šç§’çº§ï¼ˆ1440æ¡è®°å½•ï¼‰
- **æ–‡ä»¶å¤§å°**ï¼š~3.4M/å¤©ï¼ˆå…¨å¤©æ•°æ®ï¼‰
- **å†…å­˜å ç”¨**ï¼š8.2 MBï¼ˆPM2è¿›ç¨‹ï¼‰

### ç¨³å®šæ€§
- **é‡‡é›†æˆåŠŸç‡**ï¼š100%ï¼ˆ27/27å¸ç§ï¼‰
- **è¿›ç¨‹çŠ¶æ€**ï¼šonlineï¼ˆPM2ç®¡ç†ï¼‰
- **æ•°æ®å®Œæ•´æ€§**ï¼šâœ… æ— æŸå
- **é”™è¯¯æ¢å¤**ï¼šâœ… è‡ªåŠ¨é‡è¯•

---

**éªŒè¯å®Œæˆæ—¶é—´**: 2026-01-24 17:15 åŒ—äº¬æ—¶é—´  
**éªŒè¯äººå‘˜**: GenSpark AI Developer  
**éªŒè¯ç»“æœ**: âœ… **å®Œå…¨åˆæ ¼ï¼Œæ— éœ€ä¿®å¤**

ğŸ¯ **ç³»ç»Ÿå·²ç»å®Œå…¨ä½¿ç”¨ JSONL æ ¼å¼ï¼Œè¿è¡Œæ­£å¸¸ï¼**
