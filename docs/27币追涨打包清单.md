# 27币1分钟涨跌幅追涨模块 - 打包清单

## 📦 打包信息

- **打包文件名**: `27币1分钟涨跌幅追涨.tar.gz`
- **文件大小**: 304 KB
- **打包时间**: 2026-01-24 09:20 UTC (17:20 北京时间)
- **打包位置**: `/home/user/webapp/27币1分钟涨跌幅追涨.tar.gz`

## 📋 打包内容清单

### 1. 核心代码文件
- **coin_change_tracker.py** (15 KB)
  - 27币涨跌幅追踪系统主程序
  - 1分钟周期采集
  - JSONL 格式数据存储
  - 每日00:00自动重置基准价（使用日线开盘价）

### 2. 前端页面
- **coin_change_tracker.html** (17 KB)
  - 实时涨跌幅展示页面
  - ECharts 图表可视化
  - Tailwind CSS 样式
  - 响应式设计

### 3. API 路由代码
- **coin_change_routes.txt** (9.7 KB)
  - Flask 路由完整代码
  - 5个API端点：
    - GET `/coin-change-tracker` - 页面路由
    - GET `/api/coin-change-tracker/latest` - 最新数据
    - GET `/api/coin-change-tracker/history` - 历史数据
    - GET `/api/coin-change-tracker/baseline` - 基准价数据
    - POST `/api/coin-change-tracker/reset-baseline` - 重置基准价

### 4. 配置文件
- **pm2_config.json** (513 B)
  - PM2进程管理配置
  - 自动重启策略
  - 日志配置
  - 内存限制 100MB

### 5. 数据文件（示例数据）
```
data/coin_change_tracker/
├── coin_change_20260124.jsonl  (今天数据)
├── coin_change_20260123.jsonl  (3.4M - 昨天完整数据)
├── coin_change_20260122.jsonl  (1.9M - 前天完整数据)
├── baseline_20260124.json      (今天基准价)
├── baseline_20260123.json      (昨天基准价)
└── baseline_20260122.json      (前天基准价)
```

### 6. 文档
- **README.md** (6.5 KB)
  - 模块简介
  - 功能特性
  - 技术架构
  - 快速开始指南
  
- **DEPLOY.md** (8.2 KB)
  - 详细部署文档
  - 环境要求
  - 安装步骤
  - 配置说明
  - 验证测试
  - 故障排除

- **COIN_CHANGE_JSONL_REPORT.md** (8.0 KB)
  - 系统验证报告
  - 数据格式说明
  - API测试结果
  - 性能指标

## 🎯 追踪的27个币种

```
BTC-USDT-SWAP   ETH-USDT-SWAP   XRP-USDT-SWAP   BNB-USDT-SWAP
SOL-USDT-SWAP   LTC-USDT-SWAP   DOGE-USDT-SWAP  SUI-USDT-SWAP
TRX-USDT-SWAP   TON-USDT-SWAP   ETC-USDT-SWAP   BCH-USDT-SWAP
HBAR-USDT-SWAP  XLM-USDT-SWAP   FIL-USDT-SWAP   LINK-USDT-SWAP
CRO-USDT-SWAP   DOT-USDT-SWAP   AAVE-USDT-SWAP  UNI-USDT-SWAP
NEAR-USDT-SWAP  APT-USDT-SWAP   CFX-USDT-SWAP   CRV-USDT-SWAP
STX-USDT-SWAP   LDO-USDT-SWAP   TAO-USDT-SWAP
```

## 📊 最新数据快照

**采集时间**: 2026-01-24 17:09:10 (北京时间)

### 涨跌幅统计
- **27币涨跌幅总和**: -14.03%
- **有效币种数**: 27/27 (100%)

### 涨幅前3
1. **CRO**: +1.57% ($0.0933)
2. **LTC**: +0.51% ($68.53)
3. **ETH**: +0.35% ($2961.21)

### 跌幅前3
1. **CRV**: -3.49% ($0.3569)
2. **TAO**: -2.11% ($236.60)
3. **HBAR**: -1.63% ($0.1082)

## 🚀 快速部署

### 1. 解压打包文件
```bash
tar -xzf 27币1分钟涨跌幅追涨.tar.gz
cd coin_change_package/
```

### 2. 安装依赖
```bash
pip3 install requests flask pm2
```

### 3. 部署文件
```bash
# 复制Python采集器到项目source_code目录
cp coin_change_tracker.py YOUR_PROJECT/source_code/

# 复制HTML模板到templates目录
cp coin_change_tracker.html YOUR_PROJECT/source_code/templates/

# 复制数据文件到项目data目录
cp -r data/coin_change_tracker YOUR_PROJECT/data/
```

### 4. 添加路由到Flask应用
将 `coin_change_routes.txt` 中的代码添加到你的 Flask `app.py` 文件中。

### 5. 启动采集器
```bash
pm2 start coin_change_tracker.py --name coin-change-tracker --interpreter python3
pm2 save
```

### 6. 验证运行
```bash
# 检查进程状态
pm2 status

# 测试API
curl http://localhost:5000/api/coin-change-tracker/latest

# 访问前端页面
# http://localhost:5000/coin-change-tracker
```

## 🔧 核心功能特性

### 1. 实时追踪
- **采集频率**: 1分钟/次
- **数据源**: OKEx API
- **实时计算**: 涨跌幅自动计算

### 2. 基准价管理
- **每日重置**: 00:00 UTC+8 自动重置
- **基准价来源**: 日线开盘价
- **降级策略**: 开盘价不可用时使用当前价

### 3. 数据存储
- **格式**: JSONL (每行一个JSON对象)
- **文件命名**: `coin_change_YYYYMMDD.jsonl`
- **基准价文件**: `baseline_YYYYMMDD.json`
- **优势**: 追加写入、流式读取、容错性强

### 4. API接口
- **最新数据**: 返回当天最后一条记录
- **历史查询**: 支持按日期查询历史数据
- **基准价查询**: 获取指定日期的基准价
- **基准价重置**: 手动触发基准价重置

### 5. 前端展示
- **实时刷新**: 自动更新最新数据
- **图表展示**: ECharts可视化
- **涨跌排序**: 动态排序显示
- **颜色区分**: 涨绿跌红，一目了然

## 📈 性能指标

- **采集成功率**: 100% (27/27)
- **响应时间**: < 100ms (API)
- **内存占用**: < 50MB
- **CPU占用**: < 5%
- **数据量**: 约1440条/天 (1分钟 × 1440)

## 🔗 相关链接

- **原系统访问地址**: https://5000-iz51witudb16wj96d1wvr-a402f90a.sandbox.novita.ai/coin-change-tracker
- **GitHub仓库**: https://github.com/jamesyidc/121211111
- **Pull Request**: https://github.com/jamesyidc/121211111/pull/1

## 📝 数据格式示例

### JSONL数据格式
```json
{
  "timestamp": "2026-01-24T17:09:10+08:00",
  "date": "20260124",
  "time": "17:09:10",
  "baseline_date": "20260124",
  "total_change": -14.03,
  "valid_count": 27,
  "changes": {
    "BTC-USDT-SWAP": {
      "baseline_price": 89703.7,
      "current_price": 89577.8,
      "change_pct": -0.14
    },
    "ETH-USDT-SWAP": {
      "baseline_price": 2950.96,
      "current_price": 2961.21,
      "change_pct": 0.35
    }
  }
}
```

### 基准价文件格式
```json
{
  "date": "20260124",
  "timestamp": "2026-01-24T17:09:00.776192+08:00",
  "prices": {
    "BTC-USDT-SWAP": 89703.7,
    "ETH-USDT-SWAP": 2950.96,
    "XRP-USDT-SWAP": 1.9205
  }
}
```

## ⚠️ 重要提示

1. **数据目录**: 确保 `data/coin_change_tracker/` 目录存在且有写权限
2. **网络访问**: 需要访问 OKEx API (https://www.okx.com)
3. **时区设置**: 系统使用北京时间 (UTC+8)
4. **PM2配置**: 建议配置 PM2 开机自启动
5. **日志管理**: 定期清理日志文件，避免占用过多磁盘空间

## 📞 技术支持

如有问题，请查阅以下文档：
1. **README.md** - 快速开始指南
2. **DEPLOY.md** - 详细部署文档
3. **COIN_CHANGE_JSONL_REPORT.md** - 系统验证报告

---

**打包完成时间**: 2026-01-24 17:20 北京时间  
**版本**: v1.0  
**状态**: ✅ 已验证，运行正常
