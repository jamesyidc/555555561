# Windows客户端字段映射错误说明

## 🔴 问题确认

根据截图，Windows客户端的列显示存在错误：

### 当前错误映射

| 列名 | 当前显示的字段 | 显示的值示例 | 正确应该是 |
|-----|-------------|------------|----------|
| **涨跌** | `speed` | 1.1, -0.4, 0.04 | `change_24h` |
| **涨速** | ？（可能缺失） | ？ | `speed` |

### 具体示例（从截图）

```
DOT:  涨跌列显示 1.1  ← 这实际是 speed（涨速）
AAVE: 涨跌列显示 -0.4 ← 这实际是 speed（涨速）
ADA:  涨跌列显示 0.04 ← 这实际是 speed（涨速）
```

## ✅ 正确的字段映射

### API返回的数据结构

```json
{
  "symbol": "DOT",
  "speed": 1.1,           // 涨速（速度，范围 -1 到 1）
  "rush_up": 0,           // 急涨次数
  "rush_down": 2,         // 急跌次数
  "change_24h": -4.21,    // 24小时涨跌幅（百分比）
  "current_price": 54.9467,
  "update_time": "2026-01-15 14:09:25"
}
```

### 字段详细说明

| 字段名 | 类型 | 说明 | 数值范围 | 示例 |
|-------|-----|------|---------|------|
| `speed` | float | **涨速**（价格变化速度） | -1.0 到 1.0 | 1.1, -0.4, 0.04 |
| `change_24h` | float | **24h涨跌幅**（百分比） | -100 到 +∞ | -4.21, 1.55, -0.12 |
| `rush_up` | int | 急涨次数 | 0-10 | 0, 1, 2 |
| `rush_down` | int | 急跌次数 | 0-10 | 0, 1, 2 |

## 🔧 Windows客户端需要修改的地方

### 列配置修改

```
旧配置（错误）：
涨跌列 → 绑定字段：speed

新配置（正确）：
涨速列 → 绑定字段：speed
涨跌列 → 绑定字段：change_24h
```

### 示例代码（伪代码）

```vb
' 错误的绑定
超级列表框.置列文本("涨跌", coin.speed)  ' ❌ 错误

' 正确的绑定
超级列表框.置列文本("涨速", coin.speed)      ' ✅ 正确
超级列表框.置列文本("涨跌", coin.change_24h) ' ✅ 正确
```

## 📊 数据对比验证

### API返回数据（14:09快照）

```
BCH:
  speed: -0.25        ← 这是涨速
  change_24h: -0.12   ← 这是24h涨跌幅
  rush_up: 1
  rush_down: 1
```

### Windows客户端应该显示

```
币种: BCH
涨速: -0.25    ← 使用 speed 字段
急涨: 1        ← 使用 rush_up 字段
急跌: 1        ← 使用 rush_down 字段
涨跌: -0.12    ← 使用 change_24h 字段（或24h涨跌幅）
```

## 🎯 修复步骤

1. **找到Windows客户端的列绑定代码**
   - 搜索"涨跌"列的数据绑定
   - 找到该列使用的字段名

2. **修改字段绑定**
   ```
   涨跌列：从 coin.speed 改为 coin.change_24h
   涨速列：绑定到 coin.speed
   ```

3. **验证修复**
   - 重启Windows客户端
   - 检查"涨跌"列的数值是否为24h涨跌幅（如-4.21%, 1.55%）
   - 检查"涨速"列的数值是否为涨速（如1.1, -0.4, 0.04）

## 📝 常见混淆点

### 为什么会混淆？

1. **字段名历史遗留**：之前的`rush_up`实际存的是涨速
2. **修复后字段更名**：现在`rush_up`是急涨次数，涨速改为`speed`
3. **客户端未同步更新**：Windows客户端还在用旧的字段映射

### 如何避免？

- 明确字段含义：
  - `speed` = 涨速（速度）
  - `change_24h` = 24h涨跌幅（百分比）
  - `rush_up` = 急涨次数（整数）
  - `rush_down` = 急跌次数（整数）

## ⚠️ 重要提示

**后端API已完全修复，字段定义标准清晰！**

问题出在Windows客户端的列绑定配置上，需要Windows客户端开发者修改列配置。

## 📞 技术支持

如需协助，请提供：
1. Windows客户端列配置代码
2. 数据绑定相关代码
3. 使用的API接口地址

---

**创建时间：** 2026-01-15 14:15  
**问题：** Windows客户端列名与字段映射错误  
**根因：** 涨跌列显示了speed字段，应该显示change_24h字段
