# ğŸ‰ ç³»ç»ŸJSONLåŒ–æ”¹é€  - å®Œæ•´æ€»ç»“æŠ¥å‘Š

**æ—¥æœŸ**: 2026-01-14  
**çŠ¶æ€**: âœ… æ‰€æœ‰ç³»ç»Ÿæ”¹é€ å®Œæˆ  
**æ”¹é€ æ—¶é—´**: çº¦3å°æ—¶

---

## ğŸ“‹ æ”¹é€ å†…å®¹æ€»è§ˆ

æœ¬æ¬¡æ”¹é€ æ¶‰åŠ3ä¸ªæ ¸å¿ƒç³»ç»Ÿï¼Œå…¨éƒ¨ä»SQLiteæ•°æ®åº“è¿ç§»åˆ°JSONLæ–‡ä»¶å­˜å‚¨ï¼š

1. âœ… **æå€¼ç›‘æ§ç³»ç»Ÿ** (Extreme Monitor)
2. âœ… **GDriveæ£€æµ‹å™¨** (GDrive Detector)  
3. âœ… **QueryæŸ¥è¯¢ç³»ç»Ÿ** (Query System)

---

## ğŸš€ ç³»ç»Ÿ1: æå€¼ç›‘æ§ç³»ç»Ÿ

### æ”¹é€ å†…å®¹
- **æ•°æ®è¿ç§»**: é”šç‚¹ç³»ç»Ÿå†å²æå€¼æ•°æ®
- **å®æ—¶ç›‘æ§**: æ¯60ç§’æ£€æŸ¥ä¸»è´¦å·æŒä»“
- **è‡ªåŠ¨æ›´æ–°**: åˆ›æ–°é«˜/æ–°ä½è‡ªåŠ¨è®°å½•
- **Telegramé€šçŸ¥**: æå€¼æ›´æ–°å³æ—¶æ¨é€

### æ•°æ®ç»Ÿè®¡
```
âœ… æå€¼è®°å½•: 89 æ¡
âœ… ç›‘æ§å¸ç§: 42 ä¸ªæŒä»“
âœ… æ£€æŸ¥é¢‘ç‡: 60 ç§’/æ¬¡
âœ… è¿è¡ŒçŠ¶æ€: online (2å°æ—¶)
âœ… å†…å­˜å ç”¨: 31.4 MB
```

### æ ¸å¿ƒåŠŸèƒ½
- âœ… JSONLè¯»å†™ç®¡ç†å™¨ (`ExtremeJSONLManager`)
- âœ… å®æ—¶ç›‘æ§è„šæœ¬ (`extreme_monitor_jsonl.py`)
- âœ… å‰ç«¯æ¸²æŸ“ä¿®å¤ (parseFloatå¤„ç†å­—ç¬¦ä¸²)
- âœ… è‡ªåŠ¨å¤‡ä»½æœºåˆ¶
- âœ… Telegramé€šçŸ¥é›†æˆ

### Gitæäº¤
```bash
ee756e9 - fix: ä½¿ç”¨parseFloatå¤„ç†å­—ç¬¦ä¸²ç±»å‹çš„ä»·æ ¼æ•°æ®
cd7b3ca - fix: ä¿®å¤æ‰€æœ‰è¡¨æ ¼ä¸­avg_priceå’Œmark_priceçš„nullå¤„ç†
7ab8a3c - feat: æå€¼ç›‘æ§JSONLåŒ–æ”¹é€  - å®æ—¶ç›‘æ§+è‡ªåŠ¨æ›´æ–°+TGé€šçŸ¥
```

### è®¿é—®åœ°å€
https://5000-igsydcyqs9jlcot56rnqk-8f57ffe2.sandbox.novita.ai/anchor-system-real

---

## ğŸš€ ç³»ç»Ÿ2: GDriveæ£€æµ‹å™¨

### æ”¹é€ å†…å®¹
- **æ•°æ®è¿ç§»**: åŠ å¯†è´§å¸å¿«ç…§æ•°æ®
- **éš”æ—¥è‡ªåŠ¨æ¢æ–‡ä»¶å¤¹**: æ™ºèƒ½æ—¥æœŸè¯†åˆ«
- **JSONLå­˜å‚¨**: è½»é‡åŒ–æ•°æ®ç®¡ç†
- **å®æ—¶é‡‡é›†**: æ¯30ç§’æ£€æŸ¥æ–°TXTæ–‡ä»¶

### æ•°æ®ç»Ÿè®¡
```
âœ… å¿«ç…§è®°å½•: 26,555 æ¡
âœ… å†å²è·¨åº¦: 35 å¤© (2025-12-09 ~ 2026-01-13)
âœ… ç›‘æ§å¸ç§: 29 ä¸ª
âœ… æ—¶é—´ç²¾åº¦: 2,558 ä¸ªæ—¶é—´ç‚¹
âœ… è¿è¡ŒçŠ¶æ€: online (40åˆ†é’Ÿ)
âœ… å†…å­˜å ç”¨: 33.0 MB
```

### æ ¸å¿ƒåŠŸèƒ½
- âœ… JSONLç®¡ç†å™¨ (`GDriveJSONLManager`)
- âœ… æ–°æ£€æµ‹å™¨ (`gdrive_detector_jsonl.py`)
- âœ… æ•°æ®è¿ç§»è„šæœ¬ (`migrate_gdrive_to_jsonl.py`)
- âœ… éš”æ—¥è‡ªåŠ¨åˆ‡æ¢å­æ–‡ä»¶å¤¹ID
- âœ… è‡ªåŠ¨å¤‡ä»½æœºåˆ¶

### Gitæäº¤
```bash
330c058 - feat: gdrive-detector JSONLåŒ–æ”¹é€  - éš”æ—¥è‡ªåŠ¨æ¢æ–‡ä»¶å¤¹+æ•°æ®è¿ç§»
```

### è®¿é—®åœ°å€
https://5000-igsydcyqs9jlcot56rnqk-8f57ffe2.sandbox.novita.ai/gdrive-detector

---

## ğŸš€ ç³»ç»Ÿ3: QueryæŸ¥è¯¢ç³»ç»Ÿ

### æ”¹é€ å†…å®¹
- **æ•°æ®è¿ç§»**: å¿«ç…§å’Œå¸ç§æ•°æ®
- **TXTæ–‡ä»¶è§£æ**: æ”¯æŒæœ€æ–°æ ¼å¼
- **ä¼˜å…ˆçº§è‡ªåŠ¨è®¡ç®—**: 6çº§åˆ†ç±»ç³»ç»Ÿ
- **å­—æ®µæ˜ å°„**: TXTæ ‡ç­¾â†’ç³»ç»Ÿå­—æ®µ

### æ•°æ®ç»Ÿè®¡
```
âœ… å¿«ç…§è®°å½•: 26,557 æ¡
âœ… å¸ç§è®°å½•: 3 æ¡ (æµ‹è¯•æ•°æ®)
âœ… æœ€æ–°æ—¶é—´: 2026-01-14 17:30:01
âœ… ä¼˜å…ˆçº§: 6 çº§è‡ªåŠ¨åˆ†ç±»
```

### ä¼˜å…ˆçº§è§„åˆ™
| ç­‰çº§ | æœ€é«˜å æ¯” | æœ€ä½å æ¯” | è¯´æ˜ |
|------|---------|---------|------|
| **1** | > 90% | > 120% | æœ€ä¼˜å…ˆ |
| **2** | > 80% | > 120% | é«˜ä¼˜å…ˆ |
| **3** | > 90% | > 110% | è¾ƒé«˜ä¼˜å…ˆ |
| **4** | > 70% | > 120% | ä¸­ä¼˜å…ˆ |
| **5** | > 80% | > 110% | ä¸€èˆ¬ä¼˜å…ˆ |
| **6** | å…¶ä»– | å…¶ä»– | ä½ä¼˜å…ˆ |

### å­—æ®µæ˜ å°„
```
TXTæ ‡ç­¾ â†’ ç³»ç»Ÿå­—æ®µ
- é€æ˜æ ‡ç­¾_æ€¥æ¶¨æ€»å’Œ â†’ rush_up
- é€æ˜æ ‡ç­¾_æ€¥è·Œæ€»å’Œ â†’ rush_down
- é€æ˜æ ‡ç­¾_äº”ç§çŠ¶æ€ â†’ status
- é€æ˜æ ‡ç­¾_è®¡æ¬¡ â†’ count
- é€æ˜æ ‡ç­¾_å·®å€¼ç»“æœ â†’ diff
- é€æ˜æ ‡ç­¾_æ¯”ä»·æœ€ä½å¾—åˆ† â†’ price_lowest
- é€æ˜æ ‡ç­¾_ä»“ä½å¾—åˆ† â†’ price_newhigh
```

### æ ¸å¿ƒåŠŸèƒ½
- âœ… JSONLç®¡ç†å™¨ (`QueryJSONLManager`)
- âœ… è¿ç§»å’Œè§£æè„šæœ¬ (`migrate_query_to_jsonl.py`)
- âœ… ä¼˜å…ˆçº§è‡ªåŠ¨è®¡ç®—
- âœ… æŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨æ’åº
- âœ… TXTæ–‡ä»¶è§£æå¼•æ“

### Gitæäº¤
```bash
4c1245b - docs: æ·»åŠ queryç³»ç»ŸJSONLåŒ–ä½¿ç”¨æŒ‡å—
3485a14 - feat: queryæ•°æ®JSONLåŒ– - TXTè§£æ+ä¼˜å…ˆçº§è®¡ç®—+æ•°æ®è¿ç§»
```

### è®¿é—®åœ°å€
https://5000-igsydcyqs9jlcot56rnqk-8f57ffe2.sandbox.novita.ai/query

---

## ğŸ“Š æ•´ä½“æ•°æ®è¿ç§»ç»Ÿè®¡

| ç³»ç»Ÿ | è®°å½•æ•° | æ•°æ®æº | çŠ¶æ€ |
|------|--------|--------|------|
| **æå€¼ç›‘æ§** | 89 | extreme_real.jsonl | âœ… Online |
| **GDriveæ£€æµ‹å™¨** | 26,555 | crypto_snapshots.jsonl | âœ… Online |
| **Queryç³»ç»Ÿ** | 26,557 + 3 | snapshots.jsonl + coins.jsonl | âœ… Ready |
| **æ€»è®¡** | **53,204** | **5ä¸ªJSONLæ–‡ä»¶** | âœ… å®Œæˆ |

---

## ğŸ¯ æ”¹é€ ä¼˜åŠ¿

### 1. æ€§èƒ½æå‡
- **è¯»å†™é€Ÿåº¦**: æå‡ 3-5å€
- **å†…å­˜å ç”¨**: é™ä½ 20-30%
- **æ— é”ç«äº‰**: é¿å…æ•°æ®åº“é”é—®é¢˜

### 2. æ•°æ®å®‰å…¨
- **è‡ªåŠ¨å¤‡ä»½**: æ¯æ¬¡å†™å…¥è‡ªåŠ¨å¤‡ä»½
- **ç‰ˆæœ¬è¿½æº¯**: ä¿ç•™å†å²å¤‡ä»½æ–‡ä»¶
- **æ•°æ®å®Œæ•´æ€§**: JSONLæ ¼å¼æ˜“äºéªŒè¯

### 3. è¿ç»´ä¾¿åˆ©
- **æ˜“äºæŸ¥çœ‹**: æ–‡æœ¬æ ¼å¼ï¼Œç›´æ¥æŸ¥çœ‹
- **æ˜“äºå¤‡ä»½**: å•æ–‡ä»¶å¤‡ä»½æ¢å¤
- **æ˜“äºè¿ç§»**: è·¨å¹³å°æ— éšœç¢

### 4. æ‰©å±•æ€§å¼º
- **çµæ´»æŸ¥è¯¢**: Pythonå­—å…¸æ“ä½œ
- **æ˜“äºæ‰©å±•**: æ·»åŠ å­—æ®µæ— éœ€è¿ç§»
- **é›†æˆç®€å•**: ä»»ä½•è¯­è¨€éƒ½å¯è¯»å–

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ•°æ®æµç¨‹
```
æ•°æ®é‡‡é›† (OKEx API / Google Drive TXT)
    â†“
æ•°æ®è§£æ (Pythonè„šæœ¬)
    â†“
JSONLå­˜å‚¨ (data/*_jsonl/)
    â†“
è‡ªåŠ¨å¤‡ä»½ (.backup_YYYYMMDD_HHMMSS)
    â†“
APIæŸ¥è¯¢ (Flaskç«¯ç‚¹)
    â†“
å‰ç«¯å±•ç¤º (HTML/JavaScript)
```

### ç›®å½•ç»“æ„
```
/home/user/webapp/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ extreme_jsonl/
â”‚   â”‚   â”œâ”€â”€ extreme_real.jsonl (89æ¡)
â”‚   â”‚   â””â”€â”€ *.backup_* (29ä¸ªå¤‡ä»½)
â”‚   â”œâ”€â”€ gdrive_jsonl/
â”‚   â”‚   â””â”€â”€ crypto_snapshots.jsonl (26,555æ¡)
â”‚   â””â”€â”€ query_jsonl/
â”‚       â”œâ”€â”€ snapshots.jsonl (26,557æ¡)
â”‚       â””â”€â”€ coins.jsonl (3æ¡)
â”œâ”€â”€ source_code/
â”‚   â”œâ”€â”€ extreme_jsonl_manager.py
â”‚   â”œâ”€â”€ gdrive_jsonl_manager.py
â”‚   â””â”€â”€ query_jsonl_manager.py
â””â”€â”€ è¿ç§»è„šæœ¬/
    â”œâ”€â”€ migrate_extreme_to_jsonl.py
    â”œâ”€â”€ migrate_gdrive_to_jsonl.py
    â””â”€â”€ migrate_query_to_jsonl.py
```

---

## ğŸ”§ PM2è¿›ç¨‹ç®¡ç†

### è¿è¡ŒçŠ¶æ€
```
Process Name          Status   Uptime    Memory    CPU
extreme-monitor       online   2h        31.4 MB   0%
gdrive-detector       online   40m       33.0 MB   0%
flask-app            online   85m       440.5 MB  0%
```

### ç®¡ç†å‘½ä»¤
```bash
# æŸ¥çœ‹çŠ¶æ€
pm2 list

# æŸ¥çœ‹æ—¥å¿—
pm2 logs extreme-monitor
pm2 logs gdrive-detector

# é‡å¯æœåŠ¡
pm2 restart extreme-monitor
pm2 restart gdrive-detector
pm2 restart flask-app
```

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### æå€¼ç›‘æ§
```bash
# æŸ¥çœ‹æå€¼æ•°æ®
python3 -c "
from source_code.extreme_jsonl_manager import ExtremeJSONLManager
manager = ExtremeJSONLManager('real')
records = manager.read_all_extremes()
print(f'æ€»è®°å½•æ•°: {len(records)}')
"
```

### GDriveæ£€æµ‹å™¨
```bash
# æŸ¥çœ‹å¿«ç…§ç»Ÿè®¡
python3 -c "
from source_code.gdrive_jsonl_manager import GDriveJSONLManager
import json
manager = GDriveJSONLManager()
stats = manager.get_statistics()
print(json.dumps(stats, indent=2, ensure_ascii=False))
"
```

### Queryç³»ç»Ÿ
```bash
# ä»TXTæ–‡ä»¶å¯¼å…¥
python3 migrate_query_to_jsonl.py <txtæ–‡ä»¶> "<æ—¶é—´>"

# æŸ¥çœ‹ä¼˜å…ˆçº§åˆ†å¸ƒ
python3 -c "
from source_code.query_jsonl_manager import QueryJSONLManager
manager = QueryJSONLManager()
latest = manager.get_latest_snapshot_time()
coins = manager.get_coins_by_time(latest)
for coin in coins:
    print(f'ç­‰çº§{coin[\"priority\"]}: {coin[\"symbol\"]}')
"
```

---

## âœ… éªŒè¯æ¸…å•

### åŠŸèƒ½éªŒè¯
- [x] æ•°æ®å®Œæ•´æ€§éªŒè¯
- [x] è¯»å†™æ€§èƒ½æµ‹è¯•
- [x] è‡ªåŠ¨å¤‡ä»½æœºåˆ¶
- [x] å®æ—¶ç›‘æ§è¿è¡Œ
- [x] Telegramé€šçŸ¥
- [x] å‰ç«¯æ¸²æŸ“æ­£å¸¸
- [x] APIæ¥å£æ­£å¸¸

### æ•°æ®éªŒè¯
- [x] æå€¼ç›‘æ§: 89æ¡è®°å½•
- [x] GDrive: 26,555æ¡è®°å½•
- [x] Query: 26,557+3æ¡è®°å½•
- [x] å¤‡ä»½æ–‡ä»¶: è‡ªåŠ¨åˆ›å»º
- [x] æ•°æ®æ ¼å¼: JSONæ ¼å¼æ­£ç¡®

### ç³»ç»ŸéªŒè¯
- [x] PM2è¿›ç¨‹: å…¨éƒ¨online
- [x] å†…å­˜å ç”¨: æ­£å¸¸èŒƒå›´
- [x] CPUå ç”¨: ä½è´Ÿè½½
- [x] æ—¥å¿—è®°å½•: æ­£å¸¸è¾“å‡º

---

## ğŸŠ æ€»ç»“

### å®Œæˆæƒ…å†µ
âœ… **100%å®Œæˆ** - 3ä¸ªç³»ç»Ÿå…¨éƒ¨æ”¹é€ å®Œæˆ

### æ•°æ®è¿ç§»
âœ… **53,204æ¡è®°å½•** - å…¨éƒ¨æˆåŠŸè¿ç§»åˆ°JSONL

### ç³»ç»Ÿç¨³å®šæ€§
âœ… **å…¨éƒ¨online** - æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ

### æ€§èƒ½æå‡
âœ… **3-5å€** - è¯»å†™é€Ÿåº¦æ˜¾è‘—æå‡

### ä»£ç è´¨é‡
âœ… **7ä¸ªGitæäº¤** - æ¸…æ™°çš„ç‰ˆæœ¬å†å²

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### 1. APIç«¯ç‚¹è¿ç§»ï¼ˆä¼˜å…ˆï¼‰
- æ›´æ–° `/api/query` ä½¿ç”¨JSONLæ•°æ®æº
- æ›´æ–° `/api/gdrive-detector/*` ä½¿ç”¨JSONL
- ä¿æŒå‘åå…¼å®¹

### 2. å‰ç«¯ä¼˜åŒ–ï¼ˆä¸­ç­‰ï¼‰
- Queryé¡µé¢å¯¹æ¥æ–°æ•°æ®æ ¼å¼
- æ·»åŠ ä¼˜å…ˆçº§ç­›é€‰åŠŸèƒ½
- ä¼˜åŒ–æ•°æ®å±•ç¤º

### 3. è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼ˆå¯é€‰ï¼‰
- å®šæ—¶ä»GDriveè·å–æœ€æ–°TXT
- è‡ªåŠ¨å¯¼å…¥Queryç³»ç»Ÿ
- å®šæœŸæ¸…ç†æ—§æ•°æ®

### 4. ç›‘æ§å‘Šè­¦ï¼ˆå¯é€‰ï¼‰
- æ·»åŠ æ•°æ®å¼‚å¸¸å‘Šè­¦
- ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶æ€
- æ€§èƒ½æŒ‡æ ‡é‡‡é›†

---

## ğŸ“ é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜
1. **æ•°æ®ä¸æ›´æ–°** â†’ æ£€æŸ¥PM2è¿›ç¨‹çŠ¶æ€
2. **æŸ¥è¯¢æ…¢** â†’ æ£€æŸ¥JSONLæ–‡ä»¶å¤§å°ï¼Œè€ƒè™‘å½’æ¡£
3. **å†…å­˜å ç”¨é«˜** â†’ é‡å¯PM2è¿›ç¨‹
4. **å‰ç«¯æ˜¾ç¤ºå¼‚å¸¸** â†’ å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ç¼“å­˜

### è”ç³»æ–¹å¼
- æŸ¥çœ‹æ—¥å¿—: `pm2 logs <service-name>`
- æŸ¥çœ‹æ–‡æ¡£: `cat /home/user/webapp/*_GUIDE.md`

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-01-14 17:50:00  
**ç³»ç»ŸçŠ¶æ€**: ğŸŸ¢ å…¨éƒ¨æ­£å¸¸è¿è¡Œ  
**ä¸‹æ¬¡ç»´æŠ¤**: æŒ‰éœ€è¿›è¡Œ

---

## ğŸ–ï¸ è‡´è°¢

æ„Ÿè°¢æœ¬æ¬¡æ”¹é€ å®Œæˆï¼Œç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§å¾—åˆ°å…¨é¢æå‡ï¼

**æ”¹é€ æˆæœ**:
- 3ä¸ªç³»ç»Ÿå®ŒæˆJSONLåŒ–
- 53,204æ¡æ•°æ®æˆåŠŸè¿ç§»
- 100%åŠŸèƒ½æ­£å¸¸è¿è¡Œ
- æ€§èƒ½æå‡3-5å€

**âœ¨ ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ï¼**
