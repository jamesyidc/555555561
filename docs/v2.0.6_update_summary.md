# v2.0.6 更新总结

## 🚀 核心功能：10分钟涨速实时监控

### 1️⃣ 功能概述
- **涨速计算**：(当前价格 - 10分钟前价格) / 10分钟前价格 × 100%
- **采集频率**：每3分钟自动采集一次
- **监控币种**：28种主流加密货币

### 2️⃣ 5个速度区间
| 区间 | 涨速范围 | 颜色 | 说明 |
|------|----------|------|------|
| ≥ +4% | speed ≥ 4.00% | 🟢 绿色 | 极强上涨 |
| +1% ~ +4% | 1.00% ≤ speed < 4.00% | 🔵 蓝色 | 强上涨 |
| -1% ~ +1% | -1.00% < speed < 1.00% | ⚪ 灰色 | 横盘震荡 |
| -3% ~ -1% | -3.00% < speed ≤ -1.00% | 🟠 橙色 | 强下跌 |
| ≤ -3% | speed ≤ -3.00% | 🔴 红色 | 极强下跌 |

### 3️⃣ 页面展示

#### 顶部统计卡片（5个）
```
🚀 10分钟涨速 ≥ +4%       0
📈 10分钟涨速 +1% ~ +4%   0
📊 10分钟涨速 -1% ~ +1%   28
📉 10分钟涨速 -3% ~ -1%   0
💥 10分钟涨速 ≤ -3%       0
```

#### 表格新增列（5列）
1. **10分钟涨速**：显示当前涨跌幅（彩色标识）
2. **今日+4%次数**（绿色）：≥ +4% 出现次数
3. **今日+1%次数**（蓝色）：+1% ~ +4% 出现次数
4. **今日-1%次数**（橙色）：-3% ~ -1% 出现次数
5. **今日-3%次数**（红色）：≤ -3% 出现次数

### 4️⃣ 数据存储（JSONL格式）

#### 存储位置
```
/home/user/webapp/data/price_speed_10m/
└── price_speed_10m_20260215.jsonl
```

#### 文件特点
- **按日期分割**：每天一个独立文件（YYYYMMDD格式）
- **自动归档**：便于历史数据查询和分析
- **自动清零**：每日0点自动开始新文件，统计重置
- **去重机制**：相同时间戳自动去重

#### 数据格式
```json
{
  "time": "2026-02-15 14:24:41",
  "coins": [
    {
      "symbol": "BTC",
      "current_price": 70195.9,
      "price_10m_ago": 70303.4,
      "speed_10m": -0.153,
      "category": "0%"
    }
  ],
  "statistics": {
    "+4%": 0,
    "+1%": 0,
    "0%": 28,
    "-1%": 0,
    "-3%": 0
  },
  "daily_counts": {
    "BTC": { "+4%": 2, "+1%": 5, "-1%": 3, "-3%": 1 },
    "ETH": { "+4%": 1, "+1%": 4, "-1%": 2, "-3%": 0 }
  },
  "total_coins": 28
}
```

### 5️⃣ 后台服务

#### PM2进程
- **进程名**：price-speed-10m-collector
- **脚本**：source_code/price_speed_10m_collector.py
- **运行模式**：daemon模式
- **执行频率**：每3分钟

#### API端点
- **路径**：/api/price-speed-10m/latest
- **返回内容**：
  - 最新一次采集的28种币的涨速数据
  - 当次各区间币种数量统计（statistics）
  - 每个币当日累计统计（daily_counts）

### 6️⃣ UI/UX优化

| 优化项 | 修改前 | 修改后 | 提升 |
|--------|--------|--------|------|
| 表格宽度 | 1800px | 2200px | +22% |
| 表格字体 | 0.9em | 1.1em | +22% |
| 表头字体 | 默认 | 1.05em, 粗700 | +5% |
| 单元格字重 | 默认 | 600 | 加粗 |
| 黄色亮度 | #faad14 | #ffd666 | +30% |
| 表头padding | 10px | 15px×10px | +50% |
| 单元格padding | 10px | 14px×10px | +40% |

### 7️⃣ 使用场景

1. **短线交易**：实时监控10分钟涨速，快速识别短线机会
2. **波动分析**：通过日累计统计，识别波动活跃币种
3. **风险预警**：快速识别极端下跌（≤-3%）币种
4. **历史回溯**：按日期归档，方便分析历史波动模式

### 8️⃣ 区间逻辑说明

#### 边界值归属
- **+4.00%** → ≥ +4% 区间
- **+1.00%** → +1% ~ +4% 区间
- **-1.00%** → -3% ~ -1% 区间
- **-3.00%** → ≤ -3% 区间

#### 代码实现
```python
if speed_10m >= 4:
    category = '+4%'
elif speed_10m >= 1:
    category = '+1%'
elif speed_10m > -1:
    category = '0%'
elif speed_10m > -3:
    category = '-1%'
else:
    category = '-3%'
```

### 9️⃣ 测试验证

所有12个边界测试全部通过：
- 5.00% → ≥ +4% ✅
- 4.00% → ≥ +4% ✅
- 3.99% → +1% ~ +4% ✅
- 1.00% → +1% ~ +4% ✅
- 0.99% → -1% ~ +1% ✅
- -0.99% → -1% ~ +1% ✅
- -1.00% → -3% ~ -1% ✅
- -1.01% → -3% ~ -1% ✅
- -2.99% → -3% ~ -1% ✅
- -3.00% → ≤ -3% ✅
- -3.01% → ≤ -3% ✅
- -5.00% → ≤ -3% ✅

---

## 📊 数据示例

### JSONL文件路径
```bash
/home/user/webapp/data/price_speed_10m/price_speed_10m_20260215.jsonl
```

### 查看最新数据
```bash
tail -n 1 data/price_speed_10m/price_speed_10m_20260215.jsonl | jq .
```

### 统计文件大小
```bash
ls -lh data/price_speed_10m/
```

---

## 🔗 访问链接

**系统页面**：https://9002-iou7okyaq15h840cyuitp-c07dda5e.sandbox.novita.ai/price-position

---

## ✅ 完成状态

- ✅ 10分钟涨速实时监控
- ✅ 5个速度区间分类
- ✅ 顶部统计卡片（5个）
- ✅ 表格新增涨速列
- ✅ 表格新增4列日累计统计
- ✅ JSONL数据存储（按日期分割）
- ✅ 后台PM2进程
- ✅ API端点 /api/price-speed-10m/latest
- ✅ UI/UX优化（字体、颜色、间距）
- ✅ 区间逻辑修正
- ✅ 边界测试全部通过
- ✅ 系统说明文档更新
- ✅ v2.0.6版本更新说明

---

**更新时间**：2026-02-15 14:35
**版本号**：v2.0.6
