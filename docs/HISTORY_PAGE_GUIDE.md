# 历史数据查询页面使用指南

## 📍 页面地址

https://5000-igsydcyqs9jlcot56rnqk-18e660f9.sandbox.novita.ai/coin-price-history

## 🎯 功能说明

### 1. 日期选择
- **日期范围**: 2026年1月3日 - 2026年1月16日
- **操作**: 下拉选择日期，点击"🔍 查询"按钮
- **显示**: 每个日期显示周几（如：2026-01-16 (四)）

### 2. 基准价格显示（0点价格）
查询后，页面顶部会显示：
```
💡 基准价格（2026-01-16 00:00）：

BTC $95,392.80    ETH $3,300.78    XRP $2.0641    BNB $934.70    SOL $143.04
LTC $72.83        DOGE $0.13801    SUI $1.781     TRX $0.3084    TON $1.702
... (共27个币种)
```

这就是**当天0点的基准币价**，所有涨跌幅都以此为基准（0%）计算。

### 3. 当日48个时间节点
每天从 00:00 到 23:30，每30分钟一个节点，共48个节点：
```
00:00, 00:30, 01:00, 01:30, 02:00, ..., 23:00, 23:30
```

### 4. 详细数据表格

#### 表格结构
| 时间 | 币种 | 基准价格（00:00） | 当前价格 | 涨跌幅 | 27币相加的和 |
|------|------|-------------------|----------|--------|--------------|
| 2026-01-16 00:30 | BTC | $95,392.80 | $95,500.00 | +0.11% | **-15.42%** |
| *(同一时间)* | ETH | $3,300.78 | $3,308.50 | +0.23% | *(合并显示)* |
| *(同一时间)* | XRP | $2.0641 | $2.0520 | -0.59% | *(合并显示)* |
| ... | ... | ... | ... | ... | *(合并显示)* |
| *(同一时间)* | AAVE | $172.87 | $171.50 | -0.79% | *(合并显示)* |
| **下一个时间节点** | | | | | |
| 2026-01-16 01:00 | BTC | $95,392.80 | $95,600.00 | +0.22% | **-14.88%** |
| ... | ... | ... | ... | ... | ... |

#### 关键特性
1. **按时间节点分组**: 每个时间点显示27个币种
2. **27币相加的和**: 
   - 只在每个时间节点的第一行显示
   - 使用 rowspan 合并单元格
   - 颜色区分：绿色背景（上涨）/ 红色背景（下跌）
3. **币种排序**: 按涨跌幅从高到低排序
4. **涨跌颜色**: 绿色（上涨）/ 红色（下跌）

### 5. 27币相加的和计算

**公式**:
```javascript
27币相加的和 = Σ(各币种涨跌幅)
              = BTC涨跌幅 + ETH涨跌幅 + ... + AAVE涨跌幅
```

**示例**:
```
假设2026-01-16 12:00时刻：
BTC: -1.45%
ETH: +0.23%
XRP: -0.50%
BNB: -0.79%
SOL: -1.06%
... (其他22个币种的涨跌幅)

27币相加的和 = (-1.45) + 0.23 + (-0.50) + (-0.79) + (-1.06) + ... = -15.42%
```

**意义**:
- **负数**: 整体市场趋势向下
- **正数**: 整体市场趋势向上
- **接近0**: 市场涨跌平衡

### 6. 趋势图
- 显示6个主流币种的涨跌趋势
- X轴: 时间（HH:MM）
- Y轴: 涨跌幅（%）
- 颜色: BTC(橙)、ETH(紫)、XRP(蓝)、BNB(橙红)、SOL(绿)、DOGE(红)

### 7. CSV导出
点击"📥 导出CSV"按钮，下载包含以下字段的CSV文件：
```csv
时间,币种,基准价格,当前价格,涨跌幅,27币相加的和
2026-01-16 00:30,BTC,95392.80,95500.00,0.11,-15.42
2026-01-16 00:30,ETH,3300.78,3308.50,0.23,
2026-01-16 00:30,XRP,2.0641,2.0520,-0.59,
...
```
注意：27币相加的和只在每个时间节点的第一行显示。

## 📊 完整数据示例

### 查询日期: 2026-01-16

#### 基准价格（00:00）
```
BTC: $95,392.80    ETH: $3,300.78    XRP: $2.0641    BNB: $934.70
SOL: $143.04       LTC: $72.83       DOGE: $0.13801  SUI: $1.781
TRX: $0.3084       TON: $1.702       ETC: $12.54     BCH: $599.50
HBAR: $0.11693     XLM: $0.22559     FIL: $1.533     LINK: $13.728
CRO: $0.10161      DOT: $2.128       UNI: $5.322     NEAR: $1.728
APT: $1.792        CFX: $0.07664     CRV: $0.4279    STX: $0.3638
LDO: $0.6137       TAO: $274.30      AAVE: $172.87
```

#### 第1个节点 (00:30)
| 币种 | 基准价格 | 当前价格 | 涨跌幅 | 27币相加的和 |
|------|----------|----------|--------|--------------|
| TRX | $0.3084 | $0.3095 | **+0.36%** | **-15.42%** |
| DOGE | $0.13801 | $0.13820 | **+0.14%** | - |
| LTC | $0.13801 | $72.85 | **+0.03%** | - |
| ETH | $3300.78 | $3301.50 | **+0.02%** | - |
| XRP | $2.0641 | $2.0642 | **+0.00%** | - |
| BNB | $934.70 | $934.50 | **-0.02%** | - |
| ... | ... | ... | ... | - |
| AAVE | $172.87 | $171.20 | **-0.97%** | - |

#### 第2个节点 (01:00)
| 币种 | 基准价格 | 当前价格 | 涨跌幅 | 27币相加的和 |
|------|----------|----------|--------|--------------|
| SUI | $1.781 | $1.795 | **+0.79%** | **-14.88%** |
| ... | ... | ... | ... | - |

*... 共48个节点 ...*

## 🎨 页面特性

### 视觉设计
- **紫色渐变背景**: #667eea → #764ba2
- **卡片式布局**: 白色半透明卡片
- **响应式设计**: 自适应各种屏幕尺寸

### 交互特性
- **自动加载**: 页面打开时自动加载最新日期（1月16日）
- **实时更新**: 选择日期后即时查询和显示
- **平滑滚动**: 表格支持水平/垂直滚动
- **悬停提示**: 鼠标悬停显示完整数据

### 数据质量
- **数据来源**: OKX永续合约实时价格
- **更新频率**: 每30分钟采集一次
- **数据完整性**: 每个时间节点包含全部27个币种
- **基准一致性**: 所有涨跌幅均以当天00:00为基准

## 🔍 使用场景

### 1. 日内趋势分析
查看某一天从0点到23:30的完整价格走势和涨跌情况。

### 2. 市场整体判断
通过"27币相加的和"快速判断整体市场趋势：
- 持续为负：熊市氛围
- 持续为正：牛市氛围
- 频繁波动：震荡市场

### 3. 单币种追踪
在表格中找到特定币种，查看其在不同时间点的价格变化。

### 4. 数据导出分析
导出CSV数据，在Excel或Python中进行进一步分析。

## 📝 注意事项

1. **数据回填中**: 1月3日-1月15日的历史数据正在回填中，部分日期可能暂无数据
2. **数据粒度**: 30分钟间隔，每天48个数据点
3. **基准价格**: 每天00:00的价格是当天的基准（0%）
4. **跨日查询**: 如需查看多日数据，请分别选择日期查询
5. **大数据量**: 每个日期包含 48×27=1296 行数据，加载可能需要几秒

## 🚀 快速开始

### 步骤1: 打开页面
访问：https://5000-igsydcyqs9jlcot56rnqk-18e660f9.sandbox.novita.ai/coin-price-history

### 步骤2: 选择日期
下拉选择框 → 选择日期（如：2026-01-16）

### 步骤3: 查询数据
点击"🔍 查询"按钮

### 步骤4: 查看结果
- 顶部：基准价格（0点币价）
- 中间：趋势图
- 底部：详细数据表（包含27币相加的和）

### 步骤5: 导出数据（可选）
点击"📥 导出CSV"按钮，下载数据文件

## ✅ 功能检查清单

- ✅ **日期选择器**: 1月3日 - 1月16日可选
- ✅ **0点基准币价**: 页面顶部显示27个币种的00:00价格
- ✅ **48个时间节点**: 每天00:00-23:30，30分钟间隔
- ✅ **27个币种**: 每个节点显示全部27个币种
- ✅ **涨跌幅**: 相对于00:00基准价的涨跌百分比
- ✅ **27币相加的和**: 每个时间节点显示总和指标
- ✅ **趋势图**: 6个主流币种的可视化趋势
- ✅ **CSV导出**: 完整数据导出功能

---

**版本**: v1.2  
**最后更新**: 2026-01-16 14:05  
**Git提交**: bd3408a
