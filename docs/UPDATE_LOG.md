# 币价追踪器更新日志

## 版本 v1.1 (2026-01-16 13:50)

### 新增功能 ✨

1. **27币相加的和**
   - 新增统计卡片显示所有27个币种涨跌幅相加的总和
   - 颜色：深蓝色渐变（#6366f1 → #4f46e5）
   - 位置：统计卡片区域右侧

2. **完整日期显示**
   - 标题下方显示基准日期（如：2026-01-16）
   - 格式：`基准日期：2026-01-16 | 以当天UTC+8 00:00...`

3. **时间轴优化**
   - 趋势图X轴从只显示时间（HH:MM）改为显示日期+时间（MM-DD HH:MM）
   - 例如：01-16 12:00, 01-16 12:30, 01-16 13:00
   - 自动间隔显示标签，避免拥挤（显示约12个标签）

### 改进内容 📈

- **计算逻辑**：在 `updateStats()` 函数中增加 `totalSum` 变量，累加所有币种涨跌幅
- **时间格式**：从 `substring(11, 16)` 改为 `substring(5, 16)`，提取 MM-DD HH:MM
- **标签间隔**：设置 `interval: Math.floor(times.length / 12)` 自动计算显示间隔
- **底部边距**：将图表底部边距从3%增加到8%，为旋转标签留出空间

### 数据说明 📊

**27币相加的和 = BTC涨跌幅 + ETH涨跌幅 + ... + AAVE涨跌幅**

示例计算：
```
假设当前27个币种的涨跌幅分别为：
BTC: -1.45%
ETH: +0.23%
XRP: -0.50%
... (其他24个币种)

27币相加的和 = (-1.45) + 0.23 + (-0.50) + ... = X.XX%
```

这个指标反映了整体市场的趋势：
- **正数（>0）**：整体上涨趋势，多数币种或大幅上涨的币种占优
- **负数（<0）**：整体下跌趋势，多数币种或大幅下跌的币种占优
- **接近0**：市场平衡，涨跌相抵

### 技术细节 🔧

**JavaScript改动：**
```javascript
// updateStats() 函数
let totalSum = 0;  // 新增
Object.values(coins).forEach(coin => {
    const change = coin.change_pct;
    totalSum += change;  // 累加
    // ...
});
document.getElementById('totalSum').textContent = totalSum.toFixed(2);
```

**HTML改动：**
```html
<!-- 新增统计卡片 -->
<div class="stat-card" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);">
    <div class="stat-label">📊 27币相加的和</div>
    <div class="stat-value">
        <span id="totalSum">0.00</span>
        <span class="stat-unit">%</span>
    </div>
</div>

<!-- 标题增强 -->
基准日期：<strong><span id="baseDate">加载中...</span></strong> |
```

### 页面效果 🎨

**更新前：**
- ❌ 无法看到整体市场趋势指标
- ❌ 不知道当前数据的日期
- ❌ X轴只有时间，无法区分不同日期的数据

**更新后：**
- ✅ 一眼看到27币相加的和（如：-15.42%）
- ✅ 清晰显示基准日期（如：2026-01-16）
- ✅ X轴显示完整时间轴（如：01-16 12:00）

### 访问地址 🌐

https://5000-igsydcyqs9jlcot56rnqk-18e660f9.sandbox.novita.ai/coin-price-tracker

---

## 版本 v1.0 (2026-01-16 13:40)

### 初始功能
- 27个币种实时价格追踪（30分钟间隔）
- 基于UTC+8 00:00为基准（0%）
- 24小时趋势图（5个主流币种）
- 涨跌TOP5排行榜
- 27币种实时卡片展示
- 自动刷新（每5分钟）
- 失败重试机制

---

**Git提交**: 4435040  
**文档更新**: 2026-01-16 13:55
