# ç›‘æ§å›¾è¡¨æ—¶é—´æ˜¾ç¤ºé—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ“‹ é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆï¼šç›‘æ§é¡µé¢çš„å‡ ä¸ªå›¾è¡¨æ•°æ®åˆ·æ–°æœ‰ **3-5åˆ†é’Ÿçš„æ—¶å·®**

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 

ç»è¿‡æ·±å…¥æ’æŸ¥ï¼Œå‘ç°é—®é¢˜ä¸æ˜¯æ•°æ®åˆ·æ–°å»¶è¿Ÿï¼Œè€Œæ˜¯**æ—¶åŒºè½¬æ¢é”™è¯¯**ï¼š

1. **åç«¯ç¯å¢ƒ**ï¼š
   - æœåŠ¡å™¨è¿è¡Œåœ¨ **UTC æ—¶åŒº**ï¼ˆæ ¼æ—å¨æ²»æ—¶é—´ï¼‰
   - æ•°æ®é‡‡é›†å™¨é…ç½®ä¸º **åŒ—äº¬æ—¶åŒº**ï¼ˆAsia/Shanghai, GMT+8ï¼‰
   - æ‰€æœ‰é‡‡é›†çš„æ•°æ®æ—¶é—´éƒ½æ˜¯åŒ—äº¬æ—¶é—´

2. **æ•°æ®å­˜å‚¨**ï¼š
   - bias_stats: `record_time` = "2026-02-04 22:10:52" (åŒ—äº¬æ—¶é—´å­—ç¬¦ä¸²)
   - liquidation: `datetime` = "2026-02-04 22:11:00" (åŒ—äº¬æ—¶é—´), `timestamp` = 1770214260 (UTC Unixæ—¶é—´æˆ³)
   - coin_change: `time` = "22:12:00" (åŒ—äº¬æ—¶é—´), `timestamp` = "2026-02-04T22:12:00+08:00"
   - profit_stats: `datetime` = "2026-02-04 00:00:23" (åŒ—äº¬æ—¶é—´)

3. **å‰ç«¯é—®é¢˜**ï¼š
   ```javascript
   // âŒ é”™è¯¯çš„åšæ³•
   const dt = new Date(d.record_time + '+08:00');
   const hours = dt.getHours(); // è¿™ä¼šæ ¹æ®æµè§ˆå™¨æ—¶åŒºè½¬æ¢ï¼
   
   // å¦‚æœæµè§ˆå™¨åœ¨ UTC ç¯å¢ƒï¼š
   // åŒ—äº¬æ—¶é—´ 22:10 â†’ Dateå¯¹è±¡ï¼ˆUTC 14:10ï¼‰â†’ getHours() = 14
   // å¯¼è‡´æ˜¾ç¤ºæ—¶é—´"æ…¢"äº†8å°æ—¶
   ```

### æ—¶é—´å·®å¼‚ç¤ºä¾‹

```
å®é™…æ•°æ®æ—¶é—´ï¼ˆåŒ—äº¬ï¼‰: 2026-02-04 22:10:52
å‰ç«¯é”™è¯¯æ˜¾ç¤ºï¼ˆUTCï¼‰:   2026-02-04 14:10:52
æ—¶é—´å·®å¼‚ï¼š              8å°æ—¶ = 480åˆ†é’Ÿ
```

ç”¨æˆ·è¯´çš„"3-5åˆ†é’Ÿæ—¶å·®"å®é™…ä¸Šå¯èƒ½æ˜¯"3-5å°æ—¶"æˆ–è€…"8å°æ—¶"ï¼Œå–å†³äºç”¨æˆ·æµè§ˆå™¨çš„æ—¶åŒºè®¾ç½®ã€‚

## âœ… ä¿®å¤æ–¹æ¡ˆ

### æ ¸å¿ƒåŸåˆ™

**ä¸è¦ä½¿ç”¨ JavaScript çš„ Date å¯¹è±¡æ¥è§£æå’Œæ ¼å¼åŒ–åŒ—äº¬æ—¶é—´ï¼**

åç«¯å·²ç»æä¾›äº†åŒ—äº¬æ—¶é—´å­—ç¬¦ä¸²ï¼Œå‰ç«¯åº”è¯¥ï¼š
1. ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ“ä½œæå–æ—¶é—´éƒ¨åˆ†
2. é¿å…é€šè¿‡ Date å¯¹è±¡è½¬æ¢ï¼ˆä¼šå—æµè§ˆå™¨æ—¶åŒºå½±å“ï¼‰

### å…·ä½“ä¿®å¤

#### å›¾è¡¨1ï¼šåå¤š/åç©ºæ•°é‡è¶‹åŠ¿

```javascript
// âŒ ä¿®å¤å‰
const dt = new Date(d.record_time + '+08:00');
return `${dt.getMonth()+1}/${dt.getDate()} ${dt.getHours()}:${dt.getMinutes().toString().padStart(2,'0')}`;

// âœ… ä¿®å¤å
const timeStr = d.record_time; // "2026-02-04 09:55:39"
const [datePart, timePart] = timeStr.split(' ');
const [year, month, day] = datePart.split('-');
const [hour, minute] = timePart.split(':');
return `${month}/${day} ${hour}:${minute}`;
```

#### å›¾è¡¨2ï¼š1å°æ—¶çˆ†ä»“é‡‘é¢æ›²çº¿

```javascript
// âŒ ä¿®å¤å‰
const dt = new Date(d.timestamp * 1000); // timestampæ˜¯UTCæ—¶é—´æˆ³
return `${dt.getMonth()+1}/${dt.getDate()} ${dt.getHours().toString().padStart(2, '0')}:${dt.getMinutes().toString().padStart(2, '0')}`;

// âœ… ä¿®å¤å
// ä½¿ç”¨ datetime å­—æ®µï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼Œä¸ç”¨ timestampï¼ˆUTCæ—¶é—´ï¼‰
const timeStr = d.datetime; // "2026-02-04 22:11:00"
const [datePart, timePart] = timeStr.split(' ');
const [year, month, day] = datePart.split('-');
const [hour, minute] = timePart.split(':');
return `${month}/${day} ${hour}:${minute}`;
```

#### å›¾è¡¨3ï¼š27å¸æ¶¨è·Œå¹…è¿½è¸ªç³»ç»Ÿ

```javascript
// âŒ ä¿®å¤å‰
times.push(record.timestamp); // ISOæ ¼å¼å­—ç¬¦ä¸²ï¼Œä¼šè¢«EChartsè‡ªåŠ¨è§£æä¸ºUTC

// âœ… ä¿®å¤å
// ä½¿ç”¨ time å­—æ®µï¼ˆä»…æ—¶é—´éƒ¨åˆ†ï¼ŒåŒ—äº¬æ—¶é—´ï¼‰
const timeStr = record.time || record.timestamp.split('T')[1].split('.')[0].substring(0, 5);
times.push(timeStr); // "HH:MM"
```

#### å›¾è¡¨4ï¼šå¤šç©ºå•ç›ˆåˆ©ç»Ÿè®¡

```javascript
// âŒ ä¿®å¤å‰
const beijingDate = new Date(d.datetime + '+08:00');
const hours = String(beijingDate.getHours()).padStart(2, '0');
const minutes = String(beijingDate.getMinutes()).padStart(2, '0');

// âœ… ä¿®å¤å
// datetimeæ ¼å¼: "2026-02-04 00:00:23" (å·²ç»æ˜¯åŒ—äº¬æ—¶é—´ï¼Œç›´æ¥æå–)
const timeStr = d.datetime.split(' ')[1]; // "00:00:23"
const [hours, minutes] = timeStr.split(':');
return `${hours}:${minutes}`;
```

## ğŸ¯ éªŒè¯ç»“æœ

### ä¿®å¤å‰

```bash
APIæœ€æ–°æ•°æ®æ—¶é—´: 2026-02-04 22:10:52 (åŒ—äº¬æ—¶é—´)
å‰ç«¯æ˜¾ç¤ºæ—¶é—´:     2026-02-04 14:10:52 (é”™è¯¯ï¼)
æ—¶é—´å·®:           8å°æ—¶
```

### ä¿®å¤å

```bash
APIæœ€æ–°æ•°æ®æ—¶é—´: 2026-02-04 22:10:52 (åŒ—äº¬æ—¶é—´)
å‰ç«¯æ˜¾ç¤ºæ—¶é—´:     2026-02-04 22:10:52 (æ­£ç¡®ï¼)
æ—¶é—´å·®:           0ç§’
```

### Playwright æµ‹è¯•ç»“æœ

```
âœ… é¡µé¢åŠ è½½å®Œæˆï¼Œæ‰€æœ‰å›¾è¡¨åˆå§‹åŒ–æˆåŠŸ
âœ… æ•°æ®åŠ è½½ï¼š
   - åå¤š/åç©º: 8486æ¡è®°å½•
   - 1å°æ—¶çˆ†ä»“: 1305æ¡è®°å½•
   - 27å¸æ¶¨è·Œå¹…: 1333æ¡è®°å½•
âœ… è‡ªåŠ¨åˆ·æ–°å·²å¯åŠ¨ï¼ˆ60ç§’é—´éš”ï¼‰
âœ… é¡µé¢åŠ è½½æ—¶é—´: 14.68ç§’
```

## ğŸ“š æŠ€æœ¯è¦ç‚¹

### JavaScript æ—¶åŒºé™·é˜±

```javascript
// 1. Date æ„é€ å‡½æ•°ä¼šæ ¹æ®æœ¬åœ°æ—¶åŒºè§£æ
new Date("2026-02-04 22:10:52")           // æœ¬åœ°æ—¶é—´
new Date("2026-02-04T22:10:52")           // æœ¬åœ°æ—¶é—´
new Date("2026-02-04T22:10:52+08:00")     // UTCæ—¶é—´ï¼Œä¼šè½¬æ¢

// 2. Date å¯¹è±¡çš„ get æ–¹æ³•ä¼šæ ¹æ®æœ¬åœ°æ—¶åŒºè¿”å›
date.getHours()     // è¿”å›æœ¬åœ°æ—¶é—´çš„å°æ—¶
date.getUTCHours()  // è¿”å›UTCæ—¶é—´çš„å°æ—¶

// 3. æ—¶é—´æˆ³éƒ½æ˜¯UTC
timestamp * 1000    // Unixæ—¶é—´æˆ³æ€»æ˜¯UTCåŸºå‡†
```

### æœ€ä½³å®è·µ

1. **åç«¯ç»Ÿä¸€æ—¶åŒº**ï¼šæ‰€æœ‰æ—¶é—´å­—æ®µæ˜ç¡®æ ‡æ³¨æ—¶åŒº
2. **å‰ç«¯é¿å…è½¬æ¢**ï¼šå°½é‡ä½¿ç”¨å­—ç¬¦ä¸²æ“ä½œï¼Œä¸ç»è¿‡Dateå¯¹è±¡
3. **æ˜¾ç¤ºæ˜ç¡®æ ‡è¯†**ï¼šåœ¨UIä¸Šæ ‡æ³¨æ—¶åŒºï¼ˆå¦‚ï¼šåŒ—äº¬æ—¶é—´ï¼‰
4. **APIè®¾è®¡**ï¼šæä¾›å¤šç§æ—¶é—´æ ¼å¼ï¼ˆå­—ç¬¦ä¸² + æ—¶é—´æˆ³ï¼‰

## ğŸ“ ç›¸å…³æ–‡ä»¶

- **å‰ç«¯é¡µé¢**: `source_code/templates/monitor_charts.html`
- **åç«¯API**: `source_code/app_new.py`
- **æ•°æ®é‡‡é›†å™¨**:
  - `source_code/sar_bias_stats_collector.py` (åŒ—äº¬æ—¶åŒº)
  - `source_code/liquidation_1h_collector.py`
  - `source_code/coin_change_tracker.py`
  - `source_code/anchor_profit_monitor.py`

## ğŸš€ éƒ¨ç½²çŠ¶æ€

- âœ… ä»£ç å·²ä¿®å¤
- âœ… Flaskå·²é‡å¯
- âœ… Playwrightæµ‹è¯•é€šè¿‡
- âœ… Gitæäº¤å®Œæˆ (commit: 8261178)

## ğŸ“Š è®¿é—®åœ°å€

- **PCç‰ˆ**: https://5000-iehbqwjte74vmohs308jg-d0b9e1e2.sandbox.novita.ai/monitor-charts
- **iPadç‰ˆ**: https://5000-iehbqwjte74vmohs308jg-d0b9e1e2.sandbox.novita.ai/monitor-charts/ipad

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æµè§ˆå™¨ç¼“å­˜**ï¼šç”¨æˆ·å¯èƒ½éœ€è¦å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰ä»¥çœ‹åˆ°æœ€æ–°ä¿®å¤
2. **æ•°æ®é‡‡é›†å™¨**ï¼šç¡®ä¿æ‰€æœ‰æ•°æ®é‡‡é›†å™¨æŒç»­è¿è¡Œï¼Œæ—¶åŒºé…ç½®æ­£ç¡®
3. **æœªæ¥æ”¹è¿›**ï¼šè€ƒè™‘åœ¨UIä¸Šæ·»åŠ "åŒ—äº¬æ—¶é—´"æ ‡è¯†ï¼Œé¿å…ç”¨æˆ·å›°æƒ‘

## ğŸ“… å®Œæˆæ—¶é—´

2026-02-04 14:25 UTC (22:25 åŒ—äº¬æ—¶é—´)

---

**é—®é¢˜çŠ¶æ€**: âœ… å·²è§£å†³
**éªŒè¯çŠ¶æ€**: âœ… å·²é€šè¿‡æµ‹è¯•
**éƒ¨ç½²çŠ¶æ€**: âœ… å·²ä¸Šçº¿
