# ææ…Œç›‘æ§ç³»ç»Ÿæ•°æ®æ›´æ–°è¯´æ˜

## ğŸ“… æ›´æ–°æ—¶é—´
**2026-02-16 19:21**

## ğŸ”´ å‘ç°çš„é—®é¢˜

### æ•°æ®ç¼ºå¤±
- **ç°è±¡**: æ•°æ®ç®¡ç†ç•Œé¢æ˜¾ç¤ºææ…Œç›‘æ§æ•°æ®åœåœ¨ **2026-02-10**
- **å½±å“**: ç¼ºå°‘ 2026-02-11 è‡³ 2026-02-16 å…± **6å¤©** çš„æ•°æ®
- **åŸå› åˆ†æ**:
  1. âœ… é‡‡é›†å™¨ `panic_wash_collector.py` æ­£å¸¸è¿è¡Œï¼ˆPID 63435ï¼‰
  2. âœ… æ•°æ®æ­£å¸¸å†™å…¥ `panic_jsonl/panic_wash_index.jsonl` (æœ€æ–°ï¼š2026-02-16 19:21)
  3. âŒ **ç¼ºå°‘æŒ‰æ—¥åˆ†å‰²è„šæœ¬**ï¼Œæ•°æ®æœªåˆ†å‰²åˆ° `panic_daily/` ç›®å½•
  4. âŒ æ•°æ®ç®¡ç†ç•Œé¢è¯»å–çš„æ˜¯ `panic_daily/` ç›®å½•

---

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. åˆ›å»ºæ•°æ®åˆ†å‰²è„šæœ¬

**æ–‡ä»¶**: `source_code/split_panic_data_daily.py`

**åŠŸèƒ½**:
- è¯»å– `panic_jsonl/panic_wash_index.jsonl` ä¸­çš„æ‰€æœ‰æ•°æ®
- æŒ‰æ—¥æœŸï¼ˆåŒ—äº¬æ—¶é—´ï¼‰åˆ†ç»„
- å†™å…¥åˆ° `panic_daily/panic_YYYYMMDD.jsonl`
- è‡ªåŠ¨å»é‡ï¼Œé¿å…é‡å¤å†™å…¥

**ä½¿ç”¨æ–¹æ³•**:
```bash
cd /home/user/webapp
python3 source_code/split_panic_data_daily.py
```

---

### 2. åˆ›å»ºå®šæ—¶ä»»åŠ¡è„šæœ¬

**æ–‡ä»¶**: `scripts/split_panic_data_daily.sh`

**åŠŸèƒ½**:
- æ¯æ—¥è‡ªåŠ¨æ‰§è¡Œæ•°æ®åˆ†å‰²
- è®°å½•æ—¥å¿—åˆ° `logs/panic_data_split.log`

**è®¾ç½®å®šæ—¶ä»»åŠ¡**ï¼ˆå»ºè®®ï¼‰:
```bash
# æ¯å¤©å‡Œæ™¨1ç‚¹æ‰§è¡Œ
crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼š
0 1 * * * /home/user/webapp/scripts/split_panic_data_daily.sh
```

---

## ğŸ“Š æ›´æ–°ç»“æœ

### Before (2026-02-10)
```
âš ï¸ ææ…Œç›‘æ§æ´—ç›˜
  æ–‡ä»¶æ•°: 25
  è®°å½•æ•°: 24,465
  å¤§å°: 14.98 MB
  æ•°æ®å¤©æ•°: 23 å¤©
  æ—¥æœŸèŒƒå›´: 2026-01-15 ~ 2026-02-10
```

### After (2026-02-16) âœ…
```
âš ï¸ ææ…Œç›‘æ§æ´—ç›˜
  æ–‡ä»¶æ•°: 31
  è®°å½•æ•°: 32,175
  å¤§å°: 18.45 MB
  æ•°æ®å¤©æ•°: 29 å¤©
  æ—¥æœŸèŒƒå›´: 2026-01-15 ~ 2026-02-16
```

### å¢é‡ç»Ÿè®¡
| é¡¹ç›® | Before | After | å¢é‡ |
|------|--------|-------|------|
| æ–‡ä»¶æ•° | 25 | 31 | +6 |
| è®°å½•æ•° | 24,465 | 32,175 | +7,710 |
| å¤§å° | 14.98 MB | 18.45 MB | +3.47 MB |
| å¤©æ•° | 23 | 29 | +6 |

---

## ğŸ“… æ–°å¢çš„æ•°æ®æ–‡ä»¶

| æ—¥æœŸ | æ–‡ä»¶å | è®°å½•æ•° | å¤§å° |
|------|--------|--------|------|
| 2026-02-11 | panic_20260211.jsonl | 167 | 155 KB |
| 2026-02-12 | panic_20260212.jsonl | 441 | 408 KB |
| 2026-02-13 | panic_20260213.jsonl | 449 | 415 KB |
| 2026-02-14 | panic_20260214.jsonl | 407 | 376 KB |
| 2026-02-15 | panic_20260215.jsonl | 409 | 378 KB |
| 2026-02-16 | panic_20260216.jsonl | 366 | 339 KB |

**æ€»è®¡**: 6ä¸ªæ–‡ä»¶ï¼Œ2,239æ¡è®°å½•ï¼Œçº¦2.0 MB

---

## ğŸ” æ•°æ®éªŒè¯

### æœ€æ–°è®°å½•ï¼ˆ2026-02-16 19:21ï¼‰

```json
{
  "timestamp": 1771240860111,
  "beijing_time": "2026-02-16 19:21:00",
  "panic_index": 0.14,
  "market_data": {
    "BTC": {
      "last": 68561.0,
      "change_pct": -2.66
    },
    "ETH": {
      "last": 1967.46,
      "change_pct": -4.73
    }
  },
  "liquidation_data": {
    "liquidation_1h": 707.01,      // 1å°æ—¶çˆ†ä»“: 707ä¸‡ç¾å…ƒ
    "liquidation_24h": 19500.49,   // 24å°æ—¶çˆ†ä»“: 1.95äº¿ç¾å…ƒ
    "liquidation_count_24h": 7.64, // 24å°æ—¶çˆ†ä»“äººæ•°: 7.64ä¸‡äºº
    "open_interest": 54.84         // å…¨ç½‘æŒä»“: 54.84äº¿ç¾å…ƒ
  },
  "level": "medium",
  "data_source": "btc126.com"
}
```

**æ•°æ®æ¥æº**: btc126.com API  
**æ›´æ–°é¢‘ç‡**: æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡  
**æ•°æ®è´¨é‡**: âœ… æ­£å¸¸

---

## ğŸ”§ ç³»ç»Ÿæ¶æ„è¯´æ˜

### æ•°æ®æµç¨‹

```
é‡‡é›†å™¨ (panic_wash_collector.py)
   â†“ æ¯å°æ—¶é‡‡é›†
panic_jsonl/panic_wash_index.jsonl (å•æ–‡ä»¶è¿½åŠ )
   â†“ æ¯æ—¥åˆ†å‰²
panic_daily/panic_YYYYMMDD.jsonl (æŒ‰æ—¥å­˜å‚¨)
   â†“ è¯»å–å±•ç¤º
æ•°æ®ç®¡ç†ç•Œé¢
```

### ç›®å½•ç»“æ„

```
/home/user/webapp/data/
â”œâ”€â”€ panic_jsonl/                    # åŸå§‹æ•°æ®ç›®å½•
â”‚   â””â”€â”€ panic_wash_index.jsonl      # æ‰€æœ‰æ•°æ®ï¼ˆè¿½åŠ æ¨¡å¼ï¼‰
â”‚       â”œâ”€â”€ æœ€æ–°æ›´æ–°: 2026-02-16 19:21
â”‚       â”œâ”€â”€ å¤§å°: 3.5 MB
â”‚       â””â”€â”€ è®°å½•æ•°: 7,703 æ¡
â”‚
â””â”€â”€ panic_daily/                    # æŒ‰æ—¥åˆ†å‰²ç›®å½•
    â”œâ”€â”€ panic_20260115.jsonl        # 2026-01-15 æ•°æ®
    â”œâ”€â”€ panic_20260116.jsonl
    â”œâ”€â”€ ...
    â”œâ”€â”€ panic_20260215.jsonl
    â””â”€â”€ panic_20260216.jsonl        # æœ€æ–°æ•°æ® âœ…
        â”œâ”€â”€ è®°å½•æ•°: 366
        â”œâ”€â”€ å¤§å°: 339 KB
        â””â”€â”€ æ—¶é—´èŒƒå›´: 00:00 - 19:21
```

---

## ğŸ’¡ ç»´æŠ¤å»ºè®®

### æ—¥å¸¸ç»´æŠ¤

1. **ç›‘æ§é‡‡é›†å™¨çŠ¶æ€**
   ```bash
   ps aux | grep panic_wash_collector
   ```

2. **æ£€æŸ¥æœ€æ–°æ•°æ®**
   ```bash
   tail -1 /home/user/webapp/data/panic_jsonl/panic_wash_index.jsonl | python3 -m json.tool
   ```

3. **æ‰‹åŠ¨åˆ†å‰²æ•°æ®**
   ```bash
   cd /home/user/webapp
   python3 source_code/split_panic_data_daily.py
   ```

4. **é‡æ–°ç”Ÿæˆç»Ÿè®¡**
   ```bash
   cd /home/user/webapp
   python3 generate_system_grouped_data.py
   ```

---

### è‡ªåŠ¨åŒ–å»ºè®®

**è®¾ç½®å®šæ—¶ä»»åŠ¡**:
```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹ä»»åŠ¡
# 1. æ¯å¤©å‡Œæ™¨1ç‚¹åˆ†å‰²æ•°æ®
0 1 * * * /home/user/webapp/scripts/split_panic_data_daily.sh

# 2. æ¯å¤©å‡Œæ™¨1:30é‡æ–°ç”Ÿæˆç»Ÿè®¡
30 1 * * * cd /home/user/webapp && python3 generate_system_grouped_data.py > /dev/null 2>&1
```

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

### è„šæœ¬æ–‡ä»¶
- `source_code/panic_wash_collector.py` - æ•°æ®é‡‡é›†å™¨
- `source_code/panic_daily_manager.py` - æ•°æ®è¯»å–ç®¡ç†å™¨
- `source_code/split_panic_data_daily.py` - æ•°æ®åˆ†å‰²è„šæœ¬ â­ NEW
- `scripts/split_panic_data_daily.sh` - å®šæ—¶ä»»åŠ¡è„šæœ¬ â­ NEW

### æ•°æ®æ–‡ä»¶
- `data/panic_jsonl/panic_wash_index.jsonl` - åŸå§‹æ•°æ®
- `data/panic_daily/panic_YYYYMMDD.jsonl` - æŒ‰æ—¥åˆ†å‰²æ•°æ®

### é…ç½®æ–‡ä»¶
- `generate_system_grouped_data.py` - ç³»ç»Ÿæ•°æ®ç»Ÿè®¡
- `data/system_grouped_data.json` - ç»Ÿè®¡ç»“æœ

---

## ğŸ¯ æœªæ¥ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–
- [ ] æ·»åŠ æ•°æ®è´¨é‡æ£€æŸ¥ï¼ˆç¼ºå¤±æ•°æ®æ£€æµ‹ï¼‰
- [ ] æ·»åŠ é‡‡é›†å™¨å¥åº·ç›‘æ§
- [ ] æ·»åŠ æ•°æ®å¼‚å¸¸å‘Šè­¦

### ä¸­æœŸä¼˜åŒ–
- [ ] å®ç°è‡ªåŠ¨æ•°æ®æ¸…ç†ï¼ˆä¿ç•™æœ€è¿‘Nå¤©ï¼‰
- [ ] æ·»åŠ æ•°æ®å‹ç¼©åŠŸèƒ½
- [ ] å®ç°å¢é‡å¤‡ä»½

### é•¿æœŸä¼˜åŒ–
- [ ] è¿ç§»åˆ°æ—¶åºæ•°æ®åº“ï¼ˆInfluxDBï¼‰
- [ ] æ·»åŠ æ•°æ®å¯è§†åŒ–åˆ†æ
- [ ] å®ç°å¤šæ•°æ®æºèšåˆ

---

## âœ… éªŒè¯æ¸…å•

- [x] é‡‡é›†å™¨æ­£å¸¸è¿è¡Œ
- [x] åŸå§‹æ•°æ®æ–‡ä»¶æ›´æ–°æ­£å¸¸
- [x] åˆ›å»ºæ•°æ®åˆ†å‰²è„šæœ¬
- [x] æˆåŠŸåˆ†å‰²å†å²æ•°æ®
- [x] æ–°å¢6ä¸ªæ—¥æœŸæ–‡ä»¶
- [x] æ•°æ®è®°å½•æ•°æ­£ç¡®
- [x] æœ€æ–°è®°å½•æ—¶é—´æ­£ç¡®ï¼ˆ2026-02-16 19:21ï¼‰
- [x] é‡æ–°ç”Ÿæˆç³»ç»Ÿç»Ÿè®¡
- [x] Gitæäº¤å®Œæˆ
- [x] æ–‡æ¡£ç¼–å†™å®Œæˆ

---

## ğŸ’¾ Git æäº¤è®°å½•

```bash
commit b599a19 - fix: Update panic monitoring system data to 2026-02-16
```

**æäº¤å†…å®¹**:
- âœ… æ–°å¢ split_panic_data_daily.py (æ•°æ®åˆ†å‰²è„šæœ¬)
- âœ… æ–°å¢ split_panic_data_daily.sh (å®šæ—¶ä»»åŠ¡è„šæœ¬)
- âœ… æ›´æ–° 6ä¸ª panic_daily/*.jsonl æ–‡ä»¶
- âœ… æ›´æ–° system_grouped_data.json

---

## ğŸ“ æ•…éšœæ’æŸ¥

### å¦‚æœæ•°æ®è¿˜æ˜¯æ²¡æœ‰æ›´æ–°

1. **æ£€æŸ¥é‡‡é›†å™¨æ˜¯å¦è¿è¡Œ**
   ```bash
   ps aux | grep panic_wash_collector
   ```

2. **æ£€æŸ¥åŸå§‹æ•°æ®æ˜¯å¦æ›´æ–°**
   ```bash
   ls -lh /home/user/webapp/data/panic_jsonl/panic_wash_index.jsonl
   ```

3. **æ‰‹åŠ¨è¿è¡Œåˆ†å‰²è„šæœ¬**
   ```bash
   cd /home/user/webapp
   python3 source_code/split_panic_data_daily.py
   ```

4. **æŸ¥çœ‹è„šæœ¬è¾“å‡º**
   ```bash
   cat logs/panic_data_split.log
   ```

5. **é‡å¯é‡‡é›†å™¨ï¼ˆå¦‚æœéœ€è¦ï¼‰**
   ```bash
   pkill -f panic_wash_collector
   cd /home/user/webapp
   nohup python3 source_code/panic_wash_collector.py > /dev/null 2>&1 &
   ```

---

**æ›´æ–°äºº**: AI Assistant  
**æ›´æ–°æ—¶é—´**: 2026-02-16 19:21  
**Git Commit**: b599a19  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… å®Œæˆ  
