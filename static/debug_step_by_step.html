<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Tooltipè°ƒè¯• - é€æ­¥å¯è§†åŒ–</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { 
            background: #1a1a2e; 
            color: #fff; 
            font-family: 'Consolas', monospace; 
            padding: 20px;
            line-height: 1.6;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { color: #52c41a; border-bottom: 3px solid #52c41a; padding-bottom: 10px; }
        h2 { color: #faad14; margin-top: 30px; border-left: 5px solid #faad14; padding-left: 15px; }
        .step { 
            background: #16213e; 
            border: 2px solid #0f3460; 
            border-radius: 8px; 
            padding: 20px; 
            margin: 20px 0;
        }
        .step.active { border-color: #52c41a; }
        .step.error { border-color: #ff4d4f; }
        .code { 
            background: #0f3460; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 10px 0;
            overflow-x: auto;
            font-size: 13px;
        }
        .highlight { background: #faad14; color: #000; padding: 2px 6px; border-radius: 3px; font-weight: bold; }
        .success { color: #52c41a; font-weight: bold; }
        .error { color: #ff4d4f; font-weight: bold; }
        .warning { color: #faad14; font-weight: bold; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 15px 0;
            background: #0f3460;
        }
        th, td { 
            padding: 12px; 
            text-align: left; 
            border-bottom: 1px solid #444; 
        }
        th { background: #16213e; color: #faad14; }
        #chart { width: 100%; height: 400px; margin: 20px 0; }
        .button {
            background: #52c41a;
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            margin: 5px;
        }
        .button:hover { background: #73d13d; }
        .button.danger { background: #ff4d4f; color: #fff; }
        .button.danger:hover { background: #ff7875; }
        .info-box {
            background: #0f3460;
            border-left: 5px solid #1890ff;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Tooltipæ•°æ®æµç¨‹å¯è§†åŒ–è°ƒè¯•</h1>
        
        <div class="info-box">
            <strong>ç›®æ ‡ï¼š</strong>é€æ­¥éªŒè¯tooltipæ˜¾ç¤ºå€¼ä»æ•°æ®æºåˆ°æœ€ç»ˆæ˜¾ç¤ºçš„æ¯ä¸€æ­¥<br>
            <strong>æœŸæœ›ï¼š</strong>tooltipåº”è¯¥æ˜¾ç¤º <span class="highlight">184æ¬¡</span> è€Œä¸æ˜¯ <span class="highlight">79æ¬¡</span>
        </div>

        <!-- æ­¥éª¤1 -->
        <div class="step active" id="step1">
            <h2>æ­¥éª¤1: è·å–APIæ•°æ®</h2>
            <button class="button" onclick="loadAPIData()">ğŸ“¡ åŠ è½½APIæ•°æ®</button>
            <div id="step1-result"></div>
        </div>

        <!-- æ­¥éª¤2 -->
        <div class="step" id="step2">
            <h2>æ­¥éª¤2: è®¡ç®—24hç»Ÿè®¡</h2>
            <button class="button" onclick="calculateStats()">ğŸ”¢ è®¡ç®—ç»Ÿè®¡æ•°æ®</button>
            <div id="step2-result"></div>
        </div>

        <!-- æ­¥éª¤3 -->
        <div class="step" id="step3">
            <h2>æ­¥éª¤3: åˆ›å»ºå›¾è¡¨æ•°æ®</h2>
            <button class="button" onclick="createChartData()">ğŸ“Š ç”Ÿæˆå›¾è¡¨æ•°æ®</button>
            <div id="step3-result"></div>
        </div>

        <!-- æ­¥éª¤4 -->
        <div class="step" id="step4">
            <h2>æ­¥éª¤4: æ¸²æŸ“å›¾è¡¨</h2>
            <button class="button" onclick="renderChart()">ğŸ¨ æ¸²æŸ“å›¾è¡¨</button>
            <div id="chart"></div>
            <div id="step4-result"></div>
        </div>

        <!-- æ­¥éª¤5 -->
        <div class="step" id="step5">
            <h2>æ­¥éª¤5: Tooltipå–å€¼éªŒè¯</h2>
            <p class="warning">âš ï¸ è¯·é¼ æ ‡æ‚¬åœåœ¨å›¾è¡¨æœ€å³ä¾§ï¼ŒæŸ¥çœ‹tooltipæ˜¾ç¤ºçš„å€¼</p>
            <div id="step5-result"></div>
        </div>

        <!-- ç»“æœæ±‡æ€» -->
        <div class="step" id="summary" style="display: none;">
            <h2>ğŸ“ è¯Šæ–­ç»“æœ</h2>
            <div id="summary-result"></div>
        </div>
    </div>

    <script>
        let apiData = null;
        let statsData = null;
        let chartDataArrays = null;
        let myChart = null;

        console.log('%cğŸ”¥ è°ƒè¯•é¡µé¢å·²åŠ è½½ - v1.0.0-DEBUG', 'color: #52c41a; font-size: 16px; font-weight: bold;');

        // æ­¥éª¤1: åŠ è½½APIæ•°æ®
        async function loadAPIData() {
            const result = document.getElementById('step1-result');
            result.innerHTML = '<p class="warning">â³ æ­£åœ¨åŠ è½½APIæ•°æ®...</p>';
            
            try {
                const response = await fetch('/api/price-position/chart-data/2026-02-15');
                const data = await response.json();
                apiData = data.data;
                
                const sellCount = apiData.filter(d => d.signal_type === 'sell' && d.signal_triggered === 1).length;
                
                result.innerHTML = `
                    <div class="code">
                    <strong class="success">âœ… APIæ•°æ®åŠ è½½æˆåŠŸ</strong><br>
                    - æ•°æ®æ¡æ•°: ${apiData.length} æ¡<br>
                    - Sellä¿¡å·æ•°: ${sellCount} æ¬¡<br>
                    - æ—¶é—´èŒƒå›´: ${apiData[0].time} åˆ° ${apiData[apiData.length-1].time}<br>
                    - æœ€åä¸€ä¸ªç‚¹: ${apiData[apiData.length-1].time}
                    </div>
                    <table>
                        <tr><th>å­—æ®µ</th><th>å€¼</th></tr>
                        <tr><td>æ€»æ•°æ®ç‚¹</td><td class="success">${apiData.length}</td></tr>
                        <tr><td>Sellä¿¡å·æ€»æ•°</td><td class="success">${sellCount}</td></tr>
                        <tr><td>æœ€åæ—¶é—´</td><td class="success">${apiData[apiData.length-1].time}</td></tr>
                    </table>
                `;
                
                document.getElementById('step1').classList.add('active');
                document.getElementById('step2').classList.add('active');
                
                console.log('âœ… æ­¥éª¤1å®Œæˆ: APIæ•°æ®', apiData);
            } catch (error) {
                result.innerHTML = `<p class="error">âŒ åŠ è½½å¤±è´¥: ${error.message}</p>`;
                console.error('æ­¥éª¤1å¤±è´¥:', error);
            }
        }

        // æ­¥éª¤2: è®¡ç®—ç»Ÿè®¡
        function calculateStats() {
            if (!apiData) {
                alert('è¯·å…ˆåŠ è½½APIæ•°æ®ï¼');
                return;
            }

            const result = document.getElementById('step2-result');
            result.innerHTML = '<p class="warning">â³ æ­£åœ¨è®¡ç®—ç»Ÿè®¡æ•°æ®...</p>';

            // æ¨¡æ‹Ÿå‰ç«¯çš„ç»Ÿè®¡è®¡ç®—é€»è¾‘
            const sell24hData = [];
            const sell2hData = [];
            const fullTimes = [];

            apiData.forEach((point, index) => {
                const currentTime = new Date(point.time);
                fullTimes.push(point.time);

                // è®¡ç®—24hçª—å£
                const time24hAgo = new Date(currentTime.getTime() - 24 * 60 * 60 * 1000);
                let count24h = 0;
                for (let j = 0; j <= index; j++) {
                    const checkTime = new Date(apiData[j].time);
                    if (checkTime >= time24hAgo && checkTime <= currentTime) {
                        if (apiData[j].signal_type === 'sell' && apiData[j].signal_triggered === 1) {
                            count24h++;
                        }
                    }
                }
                sell24hData.push(count24h);

                // è®¡ç®—2hçª—å£
                const time2hAgo = new Date(currentTime.getTime() - 2 * 60 * 60 * 1000);
                let count2h = 0;
                for (let j = 0; j <= index; j++) {
                    const checkTime = new Date(apiData[j].time);
                    if (checkTime >= time2hAgo && checkTime <= currentTime) {
                        if (apiData[j].signal_type === 'sell' && apiData[j].signal_triggered === 1) {
                            count2h++;
                        }
                    }
                }
                sell2hData.push(count2h);
            });

            statsData = { sell24hData, sell2hData, fullTimes };

            const lastIndex = sell24hData.length - 1;
            result.innerHTML = `
                <div class="code">
                <strong class="success">âœ… ç»Ÿè®¡è®¡ç®—å®Œæˆ</strong><br>
                - æ•°æ®ç‚¹æ•°: ${sell24hData.length}<br>
                - æœ€åä¸€ä¸ªç‚¹çš„24hç»Ÿè®¡: ${sell24hData[lastIndex]} æ¬¡<br>
                - æœ€åä¸€ä¸ªç‚¹çš„2hç»Ÿè®¡: ${sell2hData[lastIndex]} æ¬¡<br>
                - æœ€åä¸€ä¸ªç‚¹çš„æ—¶é—´: ${fullTimes[lastIndex]}
                </div>
                <table>
                    <tr><th>é¡¹ç›®</th><th>å€¼</th><th>éªŒè¯</th></tr>
                    <tr>
                        <td>æœ€åç‚¹24hç»Ÿè®¡</td>
                        <td class="success">${sell24hData[lastIndex]} æ¬¡</td>
                        <td>${sell24hData[lastIndex] >= 180 ? '<span class="success">âœ… æ¥è¿‘184</span>' : '<span class="error">âŒ ä¸ç¬¦åˆé¢„æœŸ</span>'}</td>
                    </tr>
                    <tr>
                        <td>æœ€å5ä¸ª24hå€¼</td>
                        <td class="success">${sell24hData.slice(-5).join(', ')}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>æœ€å5ä¸ª2hå€¼</td>
                        <td class="success">${sell2hData.slice(-5).join(', ')}</td>
                        <td></td>
                    </tr>
                </table>
            `;

            document.getElementById('step2').classList.add('active');
            document.getElementById('step3').classList.add('active');

            console.log('âœ… æ­¥éª¤2å®Œæˆ: ç»Ÿè®¡æ•°æ®', statsData);
            console.log('  sell24hDataæœ€å5ä¸ªå€¼:', sell24hData.slice(-5));
            console.log('  sell2hDataæœ€å5ä¸ªå€¼:', sell2hData.slice(-5));
        }

        // æ­¥éª¤3: åˆ›å»ºå›¾è¡¨æ•°æ®
        function createChartData() {
            if (!statsData) {
                alert('è¯·å…ˆè®¡ç®—ç»Ÿè®¡æ•°æ®ï¼');
                return;
            }

            const result = document.getElementById('step3-result');
            result.innerHTML = '<p class="warning">â³ æ­£åœ¨åˆ›å»ºå›¾è¡¨æ•°æ®...</p>';

            // ğŸ”§ è¿™é‡Œæ˜¯å…³é”®ï¼šæ¨¡æ‹Ÿtooltipçš„æ•°æ®å¤åˆ¶é€»è¾‘
            const chartData24h = statsData.sell24hData.slice();
            const chartData2h = statsData.sell2hData.slice();
            const chartFullTimes = statsData.fullTimes.slice();

            chartDataArrays = { chartData24h, chartData2h, chartFullTimes };

            const lastIndex = chartData24h.length - 1;
            const matches = (chartData24h[lastIndex] === statsData.sell24hData[lastIndex]);

            result.innerHTML = `
                <div class="code">
                <strong class="success">âœ… å›¾è¡¨æ•°æ®åˆ›å»ºå®Œæˆ</strong><br>
                - chartData24h = sell24hData.slice()<br>
                - chartData2h = sell2hData.slice()<br>
                - chartFullTimes = fullTimes.slice()
                </div>
                <table>
                    <tr><th>æ•°ç»„</th><th>é•¿åº¦</th><th>æœ€åä¸€ä¸ªå€¼</th><th>éªŒè¯</th></tr>
                    <tr>
                        <td>sell24hData (åŸå§‹)</td>
                        <td>${statsData.sell24hData.length}</td>
                        <td>${statsData.sell24hData[lastIndex]}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>chartData24h (å¤åˆ¶)</td>
                        <td>${chartData24h.length}</td>
                        <td class="success">${chartData24h[lastIndex]}</td>
                        <td>${matches ? '<span class="success">âœ… ä¸€è‡´</span>' : '<span class="error">âŒ ä¸ä¸€è‡´</span>'}</td>
                    </tr>
                    <tr>
                        <td>sell2hData (åŸå§‹)</td>
                        <td>${statsData.sell2hData.length}</td>
                        <td>${statsData.sell2hData[lastIndex]}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>chartData2h (å¤åˆ¶)</td>
                        <td>${chartData2h.length}</td>
                        <td class="success">${chartData2h[lastIndex]}</td>
                        <td>${statsData.sell2hData[lastIndex] === chartData2h[lastIndex] ? '<span class="success">âœ… ä¸€è‡´</span>' : '<span class="error">âŒ ä¸ä¸€è‡´</span>'}</td>
                    </tr>
                </table>
            `;

            document.getElementById('step3').classList.add('active');
            document.getElementById('step4').classList.add('active');

            console.log('âœ… æ­¥éª¤3å®Œæˆ: å›¾è¡¨æ•°æ®', chartDataArrays);
        }

        // æ­¥éª¤4: æ¸²æŸ“å›¾è¡¨
        function renderChart() {
            if (!chartDataArrays) {
                alert('è¯·å…ˆåˆ›å»ºå›¾è¡¨æ•°æ®ï¼');
                return;
            }

            const result = document.getElementById('step4-result');
            result.innerHTML = '<p class="warning">â³ æ­£åœ¨æ¸²æŸ“å›¾è¡¨...</p>';

            const chartDom = document.getElementById('chart');
            myChart = echarts.init(chartDom);

            // ç”ŸæˆXè½´æ ‡ç­¾ï¼ˆåªæ˜¾ç¤ºæ—¶é—´ï¼‰
            const xAxisData = chartDataArrays.chartFullTimes.map(t => t.split(' ')[1]);

            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'cross' },
                    formatter: function(params) {
                        if (!params || params.length === 0) return '';
                        const dataIndex = params[0].dataIndex;
                        const fullTime = chartDataArrays.chartFullTimes[dataIndex];
                        const actual24h = chartDataArrays.chartData24h[dataIndex];
                        const actual2h = chartDataArrays.chartData2h[dataIndex];

                        console.log(`ğŸ¯ Tooltipè§¦å‘:`);
                        console.log(`  - dataIndex: ${dataIndex}`);
                        console.log(`  - fullTime: ${fullTime}`);
                        console.log(`  - actual24h: ${actual24h}`);
                        console.log(`  - actual2h: ${actual2h}`);
                        console.log(`  - chartData24h.length: ${chartDataArrays.chartData24h.length}`);
                        console.log(`  - chartData24h[${dataIndex}]: ${chartDataArrays.chartData24h[dataIndex]}`);
                        console.log(`  - series dataé•¿åº¦: ${params[0].data.length || 'N/A'}`);

                        document.getElementById('step5-result').innerHTML = `
                            <div class="code">
                            <strong class="warning">ğŸ¯ Tooltipæ•°æ®æ£€æŸ¥</strong><br>
                            - dataIndex: ${dataIndex}<br>
                            - æ•°ç»„æ€»é•¿åº¦: ${chartDataArrays.chartData24h.length}<br>
                            - fullTime: ${fullTime}<br>
                            - actual24h = chartData24h[${dataIndex}] = <span class="highlight">${actual24h}</span> æ¬¡<br>
                            - actual2h = chartData2h[${dataIndex}] = <span class="highlight">${actual2h}</span> æ¬¡
                            </div>
                            <table>
                                <tr><th>é¡¹ç›®</th><th>å€¼</th><th>çŠ¶æ€</th></tr>
                                <tr>
                                    <td>Tooltipæ˜¾ç¤º24hå€¼</td>
                                    <td class="highlight">${actual24h} æ¬¡</td>
                                    <td>${actual24h >= 180 ? '<span class="success">âœ… æ­£ç¡®</span>' : '<span class="error">âŒ é”™è¯¯ï¼ˆåº”è¯¥æ¥è¿‘184ï¼‰</span>'}</td>
                                </tr>
                                <tr>
                                    <td>Tooltipæ˜¾ç¤º2hå€¼</td>
                                    <td class="highlight">${actual2h} æ¬¡</td>
                                    <td><span class="success">âœ…</span></td>
                                </tr>
                                <tr>
                                    <td>æ‚¬åœä½ç½®</td>
                                    <td>ç´¢å¼• ${dataIndex} / ${chartDataArrays.chartData24h.length - 1}</td>
                                    <td>${dataIndex === chartDataArrays.chartData24h.length - 1 ? '<span class="success">âœ… æœ€å³ä¾§</span>' : '<span class="warning">âš ï¸ ä¸æ˜¯æœ€å³ä¾§</span>'}</td>
                                </tr>
                            </table>
                        `;

                        document.getElementById('step5').classList.add('active');
                        showSummary(dataIndex, actual24h, actual2h);

                        let result = `<div style="font-weight: bold; margin-bottom: 8px;">ğŸ“… ${fullTime}</div>`;
                        result += `<div style="margin: 4px 0; color: #faad14;">ğŸ› ç´¢å¼•${dataIndex}/${chartDataArrays.chartData24h.length - 1}</div>`;
                        result += `<div style="margin: 4px 0;">
                            <span style="display:inline-block;width:10px;height:10px;background:#ff4d4f;border-radius:50%;margin-right:5px;"></span>
                            24hé€ƒé¡¶: <strong>${actual24h}</strong> æ¬¡
                        </div>`;
                        result += `<div style="margin: 4px 0;">
                            <span style="display:inline-block;width:10px;height:10px;background:#faad14;border-radius:50%;margin-right:5px;"></span>
                            2hé€ƒé¡¶: <strong>${actual2h}</strong> æ¬¡
                        </div>`;
                        return result;
                    }
                },
                legend: {
                    data: ['24hé€ƒé¡¶', '2hé€ƒé¡¶'],
                    textStyle: { color: '#fff' },
                    top: 10
                },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: xAxisData,
                    axisLabel: { color: '#a0a0a0', fontSize: 11 },
                    axisLine: { lineStyle: { color: '#444' } }
                },
                yAxis: {
                    type: 'value',
                    name: 'è§¦å‘æ¬¡æ•°',
                    nameTextStyle: { color: '#a0a0a0' },
                    axisLabel: { color: '#a0a0a0' },
                    axisLine: { lineStyle: { color: '#444' } },
                    splitLine: { lineStyle: { color: '#2d2d44' } }
                },
                series: [
                    {
                        name: '24hé€ƒé¡¶',
                        type: 'line',
                        data: chartDataArrays.chartData24h,
                        itemStyle: { color: '#ff4d4f' },
                        areaStyle: { color: 'rgba(255, 77, 79, 0.2)' },
                        smooth: true
                    },
                    {
                        name: '2hé€ƒé¡¶',
                        type: 'line',
                        data: chartDataArrays.chartData2h,
                        itemStyle: { color: '#faad14' },
                        areaStyle: { color: 'rgba(250, 173, 20, 0.2)' },
                        smooth: true
                    }
                ]
            };

            myChart.setOption(option);

            result.innerHTML = `
                <div class="code">
                <strong class="success">âœ… å›¾è¡¨æ¸²æŸ“å®Œæˆ</strong><br>
                - Series data ä½¿ç”¨: chartData24h, chartData2h<br>
                - Tooltip è®¿é—®: chartData24h[dataIndex], chartData2h[dataIndex]<br>
                - æ•°æ®å¯¹é½: ç´¢å¼•ä¸€è‡´ âœ…
                </div>
                <p class="warning">âš ï¸ è¯·é¼ æ ‡æ‚¬åœåœ¨å›¾è¡¨<strong>æœ€å³ä¾§</strong>ï¼ŒæŸ¥çœ‹tooltipæ˜¾ç¤ºçš„å€¼ï¼</p>
            `;

            document.getElementById('step4').classList.add('active');
            document.getElementById('step5').classList.add('active');

            console.log('âœ… æ­¥éª¤4å®Œæˆ: å›¾è¡¨æ¸²æŸ“');
        }

        function showSummary(dataIndex, actual24h, actual2h) {
            const summaryDiv = document.getElementById('summary');
            const summaryResult = document.getElementById('summary-result');
            
            const isLastPoint = dataIndex === chartDataArrays.chartData24h.length - 1;
            const is24hCorrect = actual24h >= 180 && actual24h <= 190;
            
            let diagnosis = '';
            if (!isLastPoint) {
                diagnosis = `<p class="warning">âš ï¸ <strong>æ‚¨æ‚¬åœçš„ä¸æ˜¯æœ€å³ä¾§çš„ç‚¹ï¼</strong></p>
                            <p>æ‚¨æ‚¬åœåœ¨ç´¢å¼• <span class="highlight">${dataIndex}</span>ï¼Œè€Œæœ€åä¸€ä¸ªç‚¹æ˜¯ç´¢å¼• <span class="highlight">${chartDataArrays.chartData24h.length - 1}</span>ã€‚</p>
                            <p>ç´¢å¼•${dataIndex}çš„24hç»Ÿè®¡å€¼æ˜¯ <span class="highlight">${actual24h}æ¬¡</span>ï¼Œè¿™å¯èƒ½æ˜¯æ­£ç¡®çš„å†å²å€¼ã€‚</p>
                            <p><strong>è¯·æ‚¬åœåœ¨å›¾è¡¨æœ€å³ä¾§è¾¹ç¼˜ï¼</strong></p>`;
            } else if (is24hCorrect) {
                diagnosis = `<p class="success">âœ… <strong>å®Œå…¨æ­£ç¡®ï¼</strong></p>
                            <p>Tooltipæ˜¾ç¤ºçš„24hç»Ÿè®¡å€¼ <span class="highlight">${actual24h}æ¬¡</span> ç¬¦åˆé¢„æœŸï¼ˆæ¥è¿‘184æ¬¡ï¼‰ã€‚</p>
                            <p><strong>é—®é¢˜å·²è§£å†³ï¼</strong></p>`;
            } else {
                diagnosis = `<p class="error">âŒ <strong>å‘ç°é—®é¢˜ï¼</strong></p>
                            <p>æ‚¨æ‚¬åœåœ¨æœ€åä¸€ä¸ªç‚¹ï¼ˆç´¢å¼•${dataIndex}ï¼‰ï¼Œä½†tooltipæ˜¾ç¤º <span class="highlight">${actual24h}æ¬¡</span>ï¼Œä¸ç¬¦åˆé¢„æœŸçš„184æ¬¡ã€‚</p>
                            <p><strong>è¿™ç¡®å®æ˜¯ä¸€ä¸ªbugï¼</strong></p>
                            <p>å¯èƒ½çš„åŸå› ï¼š</p>
                            <ul>
                                <li>chartData24hæ•°ç»„çš„å€¼ä¸æ­£ç¡®</li>
                                <li>æ•°æ®è®¡ç®—é€»è¾‘æœ‰è¯¯</li>
                                <li>æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„JavaScript</li>
                            </ul>`;
            }

            summaryResult.innerHTML = `
                <div class="code">
                ${diagnosis}
                </div>
                <table>
                    <tr><th>æ£€æŸ¥é¡¹</th><th>ç»“æœ</th></tr>
                    <tr><td>æ‚¬åœä½ç½®</td><td>${isLastPoint ? '<span class="success">âœ… æœ€å³ä¾§</span>' : '<span class="error">âŒ ä¸æ˜¯æœ€å³ä¾§</span>'}</td></tr>
                    <tr><td>Tooltip 24hå€¼</td><td><span class="highlight">${actual24h}æ¬¡</span></td></tr>
                    <tr><td>é¢„æœŸå€¼</td><td>çº¦184æ¬¡</td></tr>
                    <tr><td>æ˜¯å¦æ­£ç¡®</td><td>${is24hCorrect ? '<span class="success">âœ… æ­£ç¡®</span>' : '<span class="error">âŒ é”™è¯¯</span>'}</td></tr>
                </table>
            `;

            summaryDiv.style.display = 'block';
        }

        // è‡ªåŠ¨åŠ è½½
        setTimeout(() => {
            console.log('%cç‚¹å‡»æŒ‰é’®å¼€å§‹é€æ­¥è°ƒè¯•', 'color: #faad14; font-size: 14px;');
        }, 1000);
    </script>
</body>
</html>
