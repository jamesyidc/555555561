# ğŸ“Š æ•°æ®ç®¡ç†ä¸å¤‡ä»½æ¢å¤ç³»ç»Ÿ

å®Œæ•´çš„JSONLæ•°æ®ç®¡ç†ã€ç»Ÿè®¡ã€å¤‡ä»½å’Œæ¢å¤ç³»ç»Ÿã€‚

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ•°æ®ç»Ÿè®¡åŠŸèƒ½
- âœ… æ‰«ææ‰€æœ‰JSONLæ–‡ä»¶ï¼ˆæ”¯æŒ350+æ–‡ä»¶ï¼‰
- âœ… ç»Ÿè®¡æ¯ä¸ªç³»ç»Ÿçš„æ–‡ä»¶æ•°ã€è®°å½•æ•°ã€å¤§å°
- âœ… è‡ªåŠ¨è¯†åˆ«æ—¥æœŸèŒƒå›´å’Œå¤©æ•°
- âœ… ç”Ÿæˆè¯¦ç»†JSONç»Ÿè®¡æŠ¥å‘Š
- âœ… Webç•Œé¢å®æ—¶æŸ¥çœ‹ç»Ÿè®¡æ•°æ®

### ğŸ’¾ å¤‡ä»½åŠŸèƒ½
- âœ… **å®Œæ•´å¤‡ä»½**ï¼šå‹ç¼©tar.gzæ ¼å¼ï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®
- âœ… **å¢é‡å¤‡ä»½**ï¼šåªå¤‡ä»½ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼ŒèŠ‚çœç©ºé—´
- âœ… è‡ªåŠ¨æ—¶é—´æˆ³å‘½å
- âœ… å¤‡ä»½åˆ—è¡¨ç®¡ç†ï¼ˆæŸ¥çœ‹ã€åˆ é™¤ï¼‰
- âœ… å¤‡ä»½å…ƒæ•°æ®è®°å½•

### ğŸ”„ æ¢å¤åŠŸèƒ½
- âœ… ä¸€é”®æ¢å¤ä»»æ„å¤‡ä»½
- âœ… æ¢å¤å‰è‡ªåŠ¨åˆ›å»ºå®‰å…¨å¤‡ä»½
- âœ… æ”¯æŒå‹ç¼©å’Œç›®å½•æ ¼å¼å¤‡ä»½æ¢å¤

---

## ğŸ“ˆ å½“å‰æ•°æ®ç»Ÿè®¡

æ ¹æ®æœ€è¿‘ä¸€æ¬¡æ‰«æï¼ˆ2026-02-16ï¼‰ï¼š

| ç»Ÿè®¡é¡¹ | æ•°å€¼ |
|--------|------|
| **æ€»ç›®å½•æ•°** | 42 ä¸ªç³»ç»Ÿ |
| **æ€»æ–‡ä»¶æ•°** | 350 ä¸ªJSONLæ–‡ä»¶ |
| **æ€»è®°å½•æ•°** | 3,920,525 æ¡ |
| **æ€»å¤§å°** | 2,798.52 MB (2.8 GB) |

### ğŸ“‚ ä¸»è¦ç³»ç»Ÿæ•°æ®åˆ†å¸ƒ

| ç³»ç»Ÿåç§° | æ–‡ä»¶æ•° | è®°å½•æ•° | å¤§å° | æ—¥æœŸèŒƒå›´ |
|---------|--------|--------|------|----------|
| support_resistance_daily | 41 | 901,992 | 976.51 MB | 2025-12-25 è‡³ 2026-02-07 (45å¤©) |
| price_speed_jsonl | 2 | 790,864 | 172.49 MB | 2026-01-27 è‡³ 2026-02-10 (15å¤©) |
| support_resistance_jsonl | 4 | 739,246 | 739.26 MB | 2025-12-25 è‡³ 2026-01-28 (35å¤©) |
| v1v2_jsonl | 2 | 705,279 | 107.41 MB | 2026-01-16 è‡³ 2026-02-10 (26å¤©) |
| sar_slope_jsonl | 3 | 412,426 | 115.68 MB | - |
| sar_jsonl | 29 | 81,491 | 20.06 MB | - |
| gdrive_jsonl | 14 | 67,245 | 34.15 MB | 2025-12-09 è‡³ 2026-02-07 (61å¤©) |
| ... | ... | ... | ... | ... |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: Webç•Œé¢ï¼ˆæ¨èï¼‰

è®¿é—®æ•°æ®ç®¡ç†é¡µé¢ï¼š

```
https://9002-iou7okyaq15h840cyuitp-c07dda5e.sandbox.novita.ai/data-management
```

åŠŸèƒ½ï¼š
- ğŸ“Š æŸ¥çœ‹æ•°æ®ç»Ÿè®¡æ¦‚è§ˆ
- ğŸ” ä¸€é”®é‡æ–°æ‰«ææ•°æ®
- ğŸ“¦ åˆ›å»ºå®Œæ•´å¤‡ä»½
- ğŸ“¥ åˆ›å»ºå¢é‡å¤‡ä»½
- ğŸ“‹ æŸ¥çœ‹å¤‡ä»½åˆ—è¡¨
- ğŸ”„ æ¢å¤å¤‡ä»½
- ğŸ—‘ï¸ åˆ é™¤å¤‡ä»½

### æ–¹å¼2: å‘½ä»¤è¡Œå¿«æ·è„šæœ¬

```bash
# æŸ¥çœ‹å¸®åŠ©
./manage_data.sh

# æ‰«ææ•°æ®
./manage_data.sh scan

# åˆ›å»ºå®Œæ•´å¤‡ä»½
./manage_data.sh backup

# åˆ›å»ºå¢é‡å¤‡ä»½
./manage_data.sh backup-inc

# æŸ¥çœ‹å¤‡ä»½åˆ—è¡¨
./manage_data.sh list

# æŸ¥çœ‹ç»Ÿè®¡æ‘˜è¦
./manage_data.sh stats

# æ¢å¤å¤‡ä»½
./manage_data.sh restore backup_20260216_150000

# åˆ é™¤å¤‡ä»½
./manage_data.sh delete backup_20260216_150000
```

### æ–¹å¼3: ç›´æ¥ä½¿ç”¨Pythonè„šæœ¬

#### æ•°æ®æ‰«æå’Œç»Ÿè®¡

```bash
# è¿è¡Œæ•°æ®ç®¡ç†å™¨
python3 source_code/data_manager.py

# æŸ¥çœ‹ç»Ÿè®¡æŠ¥å‘Š
cat data/data_statistics.json | python3 -m json.tool
```

#### å¤‡ä»½ç®¡ç†

```bash
# åˆ›å»ºå®Œæ•´å¤‡ä»½
python3 source_code/data_backup_service.py backup

# åˆ›å»ºå¢é‡å¤‡ä»½
python3 source_code/data_backup_service.py incremental

# åˆ—å‡ºæ‰€æœ‰å¤‡ä»½
python3 source_code/data_backup_service.py list

# æ¢å¤å¤‡ä»½
python3 source_code/data_backup_service.py restore backup_20260216_150000.tar.gz

# åˆ é™¤å¤‡ä»½
python3 source_code/data_backup_service.py delete backup_20260216_150000.tar.gz
```

---

## ğŸ“¡ APIæ¥å£

### æ•°æ®ç®¡ç†API

#### è·å–æ•°æ®ç»Ÿè®¡
```http
GET /api/data-management/statistics
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "data": {
    "scan_time": "2026-02-16 08:10:30",
    "summary": {
      "total_directories": 42,
      "total_files": 350,
      "total_records": 3920525,
      "total_size_mb": 2798.52
    },
    "directories": {
      "support_resistance_daily": {
        "files": [...],
        "total_records": 901992,
        "total_size": 1024000000,
        "date_range": {
          "min": "2025-12-25",
          "max": "2026-02-07"
        }
      },
      ...
    }
  }
}
```

#### æ‰«ææ•°æ®ç›®å½•
```http
POST /api/data-management/scan
```

### å¤‡ä»½ç®¡ç†API

#### åˆ—å‡ºæ‰€æœ‰å¤‡ä»½
```http
GET /api/data-backup/list
```

#### åˆ›å»ºå¤‡ä»½
```http
POST /api/data-backup/create
Content-Type: application/json

{
  "type": "full"  // or "incremental"
}
```

#### æ¢å¤å¤‡ä»½
```http
POST /api/data-backup/restore
Content-Type: application/json

{
  "backup_name": "backup_20260216_150000.tar.gz"
}
```

#### åˆ é™¤å¤‡ä»½
```http
POST /api/data-backup/delete
Content-Type: application/json

{
  "backup_name": "backup_20260216_150000.tar.gz"
}
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/home/user/webapp/
â”œâ”€â”€ source_code/
â”‚   â”œâ”€â”€ data_manager.py              # æ•°æ®æ‰«æå’Œç»Ÿè®¡è„šæœ¬
â”‚   â””â”€â”€ data_backup_service.py       # å¤‡ä»½æ¢å¤æœåŠ¡è„šæœ¬
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ data_management.html         # Webç®¡ç†ç•Œé¢
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ data_statistics.json         # ç»Ÿè®¡æŠ¥å‘Š
â”‚   â”œâ”€â”€ support_resistance_daily/    # å„ç³»ç»Ÿæ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ price_speed_jsonl/
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ [42ä¸ªç³»ç»Ÿç›®å½•]
â”œâ”€â”€ backups/                         # å¤‡ä»½å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ backup_20260216_150000.tar.gz
â”‚   â”œâ”€â”€ incremental_20260216_160000/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ manage_data.sh                   # å¿«æ·å‘½ä»¤è„šæœ¬
â””â”€â”€ DATA_MANAGEMENT_README.md        # æœ¬æ–‡æ¡£
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å¤‡ä»½ç­–ç•¥å»ºè®®

1. **å®šæœŸå®Œæ•´å¤‡ä»½**ï¼šæ¯å‘¨åˆ›å»ºä¸€æ¬¡å®Œæ•´å¤‡ä»½
2. **æ¯æ—¥å¢é‡å¤‡ä»½**ï¼šæ¯å¤©åˆ›å»ºå¢é‡å¤‡ä»½ï¼ŒèŠ‚çœç©ºé—´
3. **ä¿ç•™ç­–ç•¥**ï¼šä¿ç•™æœ€è¿‘7å¤©çš„å¢é‡å¤‡ä»½ï¼Œæœ€è¿‘4å‘¨çš„å®Œæ•´å¤‡ä»½

### è‡ªåŠ¨åŒ–å¤‡ä»½

å¯ä»¥ä½¿ç”¨cronå®šæ—¶ä»»åŠ¡ï¼š

```bash
# ç¼–è¾‘crontab
crontab -e

# æ¯å¤©å‡Œæ™¨2ç‚¹åˆ›å»ºå¢é‡å¤‡ä»½
0 2 * * * cd /home/user/webapp && ./manage_data.sh backup-inc >> logs/backup.log 2>&1

# æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹åˆ›å»ºå®Œæ•´å¤‡ä»½
0 3 * * 0 cd /home/user/webapp && ./manage_data.sh backup >> logs/backup.log 2>&1

# æ¯å¤©æ‰«ææ•°æ®å¹¶æ›´æ–°ç»Ÿè®¡
30 1 * * * cd /home/user/webapp && ./manage_data.sh scan >> logs/scan.log 2>&1
```

---

## ğŸ”§ é«˜çº§åŠŸèƒ½

### Pythoné›†æˆç¤ºä¾‹

```python
from source_code.data_manager import DataManager
from source_code.data_backup_service import DataBackupService

# æ•°æ®ç®¡ç†
manager = DataManager(data_dir='data')
stats = manager.scan_all_data()
manager.print_summary()
manager.save_report('data/data_statistics.json')

# å¤‡ä»½ç®¡ç†
backup_service = DataBackupService(data_dir='data', backup_dir='backups')
result = backup_service.create_backup()
print(f"å¤‡ä»½åˆ›å»ºå®Œæˆ: {result['backup_file']}")

# å¢é‡å¤‡ä»½
incremental_result = backup_service.create_incremental_backup()
print(f"å¢é‡å¤‡ä»½: {incremental_result['files_count']} ä¸ªæ–‡ä»¶")

# æ¢å¤å¤‡ä»½
restore_result = backup_service.restore_backup('backups/backup_20260216_150000.tar.gz')
```

---

## â“ å¸¸è§é—®é¢˜

### Q: æ‰«æé€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ
A: æ‰«æ350ä¸ªæ–‡ä»¶ã€392ä¸‡æ¡è®°å½•éœ€è¦çº¦1åˆ†é’Ÿã€‚å¦‚æœåªéœ€è¦æ›´æ–°ç»Ÿè®¡ï¼Œå¯ä»¥ä½¿ç”¨å¢é‡æ‰«æã€‚

### Q: å¤‡ä»½æ–‡ä»¶å¾ˆå¤§æ€ä¹ˆåŠï¼Ÿ
A: å®Œæ•´å¤‡ä»½ä¼šå‹ç¼©æ‰€æœ‰æ•°æ®ï¼ˆçº¦2.8GB â†’ å‹ç¼©åçº¦800MBï¼‰ã€‚ä½¿ç”¨å¢é‡å¤‡ä»½å¯ä»¥å¤§å¹…å‡å°å¤‡ä»½å¤§å°ã€‚

### Q: å¦‚ä½•å®šæœŸè‡ªåŠ¨å¤‡ä»½ï¼Ÿ
A: å‚è€ƒ"è‡ªåŠ¨åŒ–å¤‡ä»½"ç« èŠ‚ï¼Œä½¿ç”¨cronå®šæ—¶ä»»åŠ¡ã€‚

### Q: æ¢å¤å¤‡ä»½ä¼šè¦†ç›–ç°æœ‰æ•°æ®å—ï¼Ÿ
A: æ˜¯çš„ï¼Œä½†æ¢å¤å‰ä¼šè‡ªåŠ¨åˆ›å»ºå®‰å…¨å¤‡ä»½åˆ° `backups/before_restore_*` ç›®å½•ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- Flaskåº”ç”¨æ—¥å¿—ï¼š`pm2 logs flask-app`
- å¤‡ä»½æ—¥å¿—ï¼š`logs/backup.log`
- æ‰«ææ—¥å¿—ï¼š`logs/scan.log`

---

## ğŸ“Š ç³»ç»Ÿæ€§èƒ½

- **æ‰«æé€Ÿåº¦**ï¼šçº¦350æ–‡ä»¶/åˆ†é’Ÿ
- **å¤‡ä»½é€Ÿåº¦**ï¼šå®Œæ•´å¤‡ä»½çº¦2-3åˆ†é’Ÿï¼ˆ2.8GBæ•°æ®ï¼‰
- **å¢é‡å¤‡ä»½**ï¼šé€šå¸¸<30ç§’
- **æ¢å¤é€Ÿåº¦**ï¼šçº¦1-2åˆ†é’Ÿ

---

## ğŸ‰ æ€»ç»“

æ•°æ®ç®¡ç†ä¸å¤‡ä»½æ¢å¤ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ï¼š

âœ… æ•°æ®ç»Ÿè®¡å’Œåˆ†æ  
âœ… è‡ªåŠ¨åŒ–å¤‡ä»½  
âœ… ä¸€é”®æ¢å¤  
âœ… Webç•Œé¢ç®¡ç†  
âœ… å‘½ä»¤è¡Œå·¥å…·  
âœ… APIæ¥å£  

**ç«‹å³å¼€å§‹ä½¿ç”¨**: https://9002-iou7okyaq15h840cyuitp-c07dda5e.sandbox.novita.ai/data-management
