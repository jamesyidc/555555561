# è§åº•ä¿¡å·åšå¤šç­–ç•¥ - å®Œæ•´åŠŸèƒ½è¯´æ˜

## ğŸ“‹ åˆ›å»ºæ—¶é—´
**2026-02-21** - æ‰€æœ‰åŠŸèƒ½å·²å®Œæ•´å®ç°å¹¶éªŒè¯

---

## ğŸ¯ ç­–ç•¥æ¦‚è¿°

**è§åº•ä¿¡å·åšå¤šç­–ç•¥** æ˜¯åŸºäºå¸‚åœºæƒ…ç»ªåº•éƒ¨èƒŒç¦»ä¿¡å·å’ŒRSIæŒ‡æ ‡çš„è‡ªåŠ¨åšå¤šç­–ç•¥ï¼Œä¸è§é¡¶ä¿¡å·åšç©ºç­–ç•¥å½¢æˆå¯¹ç§°è®¾è®¡ã€‚

### âœ… ä¸¤ä¸ªåšå¤šç­–ç•¥

#### ç­–ç•¥1ï¼šè§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š ğŸ¯
- **è§¦å‘æ¡ä»¶**ï¼š
  - å‡ºç°**"ğŸ¯è§åº•ä¿¡å·"**ï¼ˆåº•éƒ¨èƒŒç¦»ï¼‰
  - **RSIæ€»å’Œ < 800**ï¼ˆå¯é…ç½®ï¼š300-1500ï¼‰
  - è‡ªåŠ¨å¯¹**æ¶¨å¹…å‰8åå¸ç§**å¼€å¤šå•
- **æ æ†**ï¼š10å€
- **ä»“ä½é…ç½®**ï¼š
  - æ€»æŠ•å…¥ï¼šå¯ç”¨ä½™é¢ Ã— 1.5%
  - åˆ†é…æ–¹å¼ï¼šå¹³å‡åˆ†é…ç»™8ä¸ªå¸ç§
  - å•å¸é™é¢ï¼šé»˜è®¤ 5.0 USDTï¼ˆå¯é…ç½®ï¼š1-100 USDTï¼‰
- **ç›‘æ§é¢‘ç‡**ï¼šæ¯60ç§’æ£€æŸ¥ä¸€æ¬¡
- **å†·å´æœºåˆ¶**ï¼šè§¦å‘å1å°æ—¶å†…ä¸é‡å¤æ‰§è¡Œ

#### ç­–ç•¥2ï¼šè§åº•ä¿¡å·+æ¶¨å¹…å8åšå¤š ğŸ¯
- **è§¦å‘æ¡ä»¶**ï¼š
  - å‡ºç°**"ğŸ¯è§åº•ä¿¡å·"**ï¼ˆåº•éƒ¨èƒŒç¦»ï¼‰
  - **RSIæ€»å’Œ < 800**ï¼ˆå¯é…ç½®ï¼š300-1500ï¼‰
  - è‡ªåŠ¨å¯¹**æ¶¨å¹…å8åå¸ç§**å¼€å¤šå•
- **æ æ†**ï¼š10å€
- **ä»“ä½é…ç½®**ï¼š
  - æ€»æŠ•å…¥ï¼šå¯ç”¨ä½™é¢ Ã— 1.5%
  - åˆ†é…æ–¹å¼ï¼šå¹³å‡åˆ†é…ç»™8ä¸ªå¸ç§
  - å•å¸é™é¢ï¼šé»˜è®¤ 5.0 USDTï¼ˆå¯é…ç½®ï¼š1-100 USDTï¼‰
- **ç›‘æ§é¢‘ç‡**ï¼šæ¯60ç§’æ£€æŸ¥ä¸€æ¬¡
- **å†·å´æœºåˆ¶**ï¼šè§¦å‘å1å°æ—¶å†…ä¸é‡å¤æ‰§è¡Œ

---

## ğŸ¨ å‰ç«¯UIè®¾è®¡

### å¡ç‰‡ä½ç½®
- ä½äº"RSIè‡ªåŠ¨å¼€ä»“ç­–ç•¥"é»„è‰²å¡ç‰‡å†…
- åœ¨"è§é¡¶ä¿¡å·åšç©ºç­–ç•¥"ä¹‹å

### è§†è§‰è®¾è®¡

#### ç­–ç•¥1ï¼šè§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š
- **èƒŒæ™¯è‰²**ï¼šæµ…ç»¿è‰²ï¼ˆ`rgba(34, 197, 94, 0.1)`ï¼‰
- **è¾¹æ¡†è‰²**ï¼šæ·±ç»¿è‰²ï¼ˆ`#22c55e`ï¼‰
- **æ–‡å­—è‰²**ï¼šæ·±ç»¿è‰²ï¼ˆ`#166534`ï¼‰
- **å›¾æ ‡**ï¼šğŸ¯

#### ç­–ç•¥2ï¼šè§åº•ä¿¡å·+æ¶¨å¹…å8åšå¤š
- **èƒŒæ™¯è‰²**ï¼šç¿ ç»¿è‰²ï¼ˆ`rgba(16, 185, 129, 0.1)`ï¼‰
- **è¾¹æ¡†è‰²**ï¼šç¿ ç»¿è‰²ï¼ˆ`#10b981`ï¼‰
- **æ–‡å­—è‰²**ï¼šæ·±ç»¿è‰²ï¼ˆ`#065f46`ï¼‰
- **å›¾æ ‡**ï¼šğŸ¯

### UIç»„ä»¶

æ¯ä¸ªç­–ç•¥åŒ…å«ï¼š
1. **å¼€å…³**ï¼šå¯ç”¨/ç¦ç”¨ç­–ç•¥
2. **è§¦å‘æ¡ä»¶è¯´æ˜**ï¼šæ¸…æ™°å±•ç¤ºè§¦å‘é€»è¾‘
3. **å‚æ•°è®¾ç½®åŒºåŸŸ**ï¼š
   - RSIé˜ˆå€¼è¾“å…¥æ¡†ï¼ˆ300-1500ï¼Œé»˜è®¤800ï¼‰
   - å•å¸é™é¢è¾“å…¥æ¡†ï¼ˆ1-100 USDTï¼Œé»˜è®¤5ï¼‰
   - ğŸ’¾ ä¿å­˜æŒ‰é’®
4. **èµ„é‡‘é…ç½®è¯´æ˜**ï¼šä»“ä½è®¡ç®—æ–¹å¼
5. **ç›‘æ§é¢‘ç‡è¯´æ˜**ï¼šæ£€æŸ¥é—´éš”å’Œå†·å´æœºåˆ¶

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### å‰ç«¯ä»£ç ä½ç½®
**æ–‡ä»¶ï¼š** `templates/okx_trading.html`

#### 1. UIç»„ä»¶ï¼ˆç¬¬3317-3403è¡Œï¼‰

**ç­–ç•¥1 UIï¼ˆç¬¬3317-3359è¡Œï¼‰ï¼š**
```html
<!-- è§åº•ä¿¡å·åšå¤šç­–ç•¥ - æ¶¨å¹…å‰8 -->
<div style="margin-top: 10px; padding: 10px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; border: 1px solid #22c55e;">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
        <span style="color: #166534; font-weight: 600; font-size: 13px;">ğŸ¯ è§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š</span>
        <label class="switch">
            <input type="checkbox" id="bottomSignalTop8LongSwitch">
            <span class="slider slider-bottom-signal-top8-long"></span>
        </label>
    </div>
    
    <!-- è§¦å‘æ¡ä»¶ -->
    <strong>è§¦å‘æ¡ä»¶ï¼š</strong>
    <ul>
        <li>å‡ºç°<strong>"ğŸ¯è§åº•ä¿¡å·"</strong>ï¼ˆåº•éƒ¨èƒŒç¦»ï¼‰</li>
        <li><strong>RSIæ€»å’Œ < <span id="bottomSignalTop8RsiThresholdDisplay">800</span></strong></li>
        <li>è‡ªåŠ¨å¯¹<strong>æ¶¨å¹…å‰8åå¸ç§</strong>å¼€å¤šå•ï¼ˆ10å€æ æ†ï¼‰</li>
    </ul>
    
    <!-- å‚æ•°è®¾ç½® -->
    <strong>å‚æ•°è®¾ç½®ï¼š</strong>
    <div style="display: flex; gap: 10px;">
        <div>
            <label>RSIé˜ˆå€¼</label>
            <input type="number" id="bottomSignalTop8RsiThreshold" value="800" 
                   step="10" min="300" max="1500"
                   onchange="updateBottomSignalTop8Display()">
        </div>
        <div>
            <label>å•å¸é™é¢(USDT)</label>
            <input type="number" id="bottomSignalTop8MaxOrder" value="5" 
                   step="1" min="1" max="100">
        </div>
        <button onclick="saveBottomSignalTop8Config()">ğŸ’¾ ä¿å­˜</button>
    </div>
    
    <!-- èµ„é‡‘é…ç½®è¯´æ˜ -->
    <strong>èµ„é‡‘é…ç½®ï¼š</strong>
    <ul>
        <li>æ€»æŠ•å…¥ï¼šå¯ç”¨ä½™é¢çš„ <strong>1.5%</strong></li>
        <li>åˆ†é…æ–¹å¼ï¼šå¹³å‡åˆ†é…ç»™8ä¸ªå¸ç§</li>
        <li>å•å¸é™é¢ï¼šæœ€é«˜ <strong><span id="bottomSignalTop8MaxOrderDisplay">5.0</span> USDT</strong></li>
    </ul>
</div>
```

**ç­–ç•¥2 UIï¼ˆç¬¬3361-3403è¡Œï¼‰ï¼š** ç»“æ„ç›¸åŒï¼ŒIDæ”¹ä¸º `bottomSignalBottom8*`

#### 2. JavaScriptå‡½æ•°

**æ›´æ–°æ˜¾ç¤ºå‡½æ•°ï¼ˆç¬¬8082-8095è¡Œï¼‰ï¼š**
```javascript
// æ›´æ–°è§åº•ä¿¡å·Top8ç­–ç•¥æ˜¾ç¤º
function updateBottomSignalTop8Display() {
    const rsiThreshold = document.getElementById('bottomSignalTop8RsiThreshold').value;
    const maxOrder = document.getElementById('bottomSignalTop8MaxOrder').value;
    document.getElementById('bottomSignalTop8RsiThresholdDisplay').textContent = rsiThreshold;
    document.getElementById('bottomSignalTop8MaxOrderDisplay').textContent = parseFloat(maxOrder).toFixed(1);
}

// æ›´æ–°è§åº•ä¿¡å·Bottom8ç­–ç•¥æ˜¾ç¤º
function updateBottomSignalBottom8Display() {
    const rsiThreshold = document.getElementById('bottomSignalBottom8RsiThreshold').value;
    const maxOrder = document.getElementById('bottomSignalBottom8MaxOrder').value;
    document.getElementById('bottomSignalBottom8RsiThresholdDisplay').textContent = rsiThreshold;
    document.getElementById('bottomSignalBottom8MaxOrderDisplay').textContent = parseFloat(maxOrder).toFixed(1);
}
```

**ä¿å­˜é…ç½®å‡½æ•°ï¼ˆç¬¬8098-8186è¡Œï¼‰ï¼š**
```javascript
// ä¿å­˜è§åº•ä¿¡å·Top8ç­–ç•¥é…ç½®
async function saveBottomSignalTop8Config() {
    const account = accounts.find(acc => acc.id === currentAccount);
    if (!account) {
        alert('âŒ è¯·å…ˆé€‰æ‹©è´¦æˆ·');
        return;
    }
    
    const rsiThreshold = parseInt(document.getElementById('bottomSignalTop8RsiThreshold').value);
    const maxOrder = parseFloat(document.getElementById('bottomSignalTop8MaxOrder').value);
    
    // éªŒè¯è¾“å…¥
    if (rsiThreshold < 300 || rsiThreshold > 1500) {
        alert('âŒ RSIé˜ˆå€¼å¿…é¡»åœ¨300-1500ä¹‹é—´');
        return;
    }
    
    if (maxOrder < 1 || maxOrder > 100) {
        alert('âŒ å•å¸é™é¢å¿…é¡»åœ¨1-100 USDTä¹‹é—´');
        return;
    }
    
    try {
        const response = await fetch(`/api/okx-trading/save-bottom-signal-config/${account.id}/top8_long`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                enabled: document.getElementById('bottomSignalTop8LongSwitch').checked,
                rsi_threshold: rsiThreshold,
                max_order_usdt: maxOrder,
                position_percent: 1.5,
                leverage: 10
            })
        });
        
        const result = await response.json();
        if (result.success) {
            updateBottomSignalTop8Display();
            alert(`âœ… é…ç½®ä¿å­˜æˆåŠŸï¼\n\nè´¦æˆ·ï¼š${account.name}\nRSIé˜ˆå€¼ï¼š${rsiThreshold}\nå•å¸é™é¢ï¼š${maxOrder} USDT`);
        } else {
            alert(`âŒ ä¿å­˜å¤±è´¥ï¼š${result.error || 'æœªçŸ¥é”™è¯¯'}`);
        }
    } catch (e) {
        console.error('Save bottom signal top8 config error:', e);
        alert(`âŒ ä¿å­˜å¤±è´¥: ${e.message}`);
    }
}

// ä¿å­˜è§åº•ä¿¡å·Bottom8ç­–ç•¥é…ç½®ï¼ˆç±»ä¼¼å®ç°ï¼‰
async function saveBottomSignalBottom8Config() {
    // ... ç±»ä¼¼å®ç°ï¼Œè°ƒç”¨ /api/okx-trading/save-bottom-signal-config/${account.id}/bottom8_long
}
```

**åŠ è½½é…ç½®å‡½æ•°ï¼ˆé›†æˆåœ¨è´¦æˆ·åˆ‡æ¢ä¸­ï¼‰ï¼š**
```javascript
// åŠ è½½è§åº•ä¿¡å·åšå¤šç­–ç•¥é…ç½®
const top8Response = await fetch(`/api/okx-trading/get-bottom-signal-config/${account.id}/top8_long`);
const top8Data = await top8Response.json();
if (top8Data.success && top8Data.config) {
    document.getElementById('bottomSignalTop8LongSwitch').checked = top8Data.config.enabled || false;
    document.getElementById('bottomSignalTop8RsiThreshold').value = top8Data.config.rsi_threshold || 800;
    document.getElementById('bottomSignalTop8MaxOrder').value = top8Data.config.max_order_usdt || 5;
    updateBottomSignalTop8Display();
}

const bottom8Response = await fetch(`/api/okx-trading/get-bottom-signal-config/${account.id}/bottom8_long`);
const bottom8Data = await bottom8Response.json();
if (bottom8Data.success && bottom8Data.config) {
    document.getElementById('bottomSignalBottom8LongSwitch').checked = bottom8Data.config.enabled || false;
    document.getElementById('bottomSignalBottom8RsiThreshold').value = bottom8Data.config.rsi_threshold || 800;
    document.getElementById('bottomSignalBottom8MaxOrder').value = bottom8Data.config.max_order_usdt || 5;
    updateBottomSignalBottom8Display();
}
```

### åç«¯API
**æ–‡ä»¶ï¼š** `app.py`

#### 1. ä¿å­˜é…ç½®APIï¼ˆç¬¬17046-17112è¡Œï¼‰

**è·¯ç”±ï¼š** `POST /api/okx-trading/save-bottom-signal-config/<account_id>/<strategy_type>`

**å‚æ•°ï¼š**
- `account_id`: è´¦æˆ·IDï¼ˆå¦‚ `account_main`ï¼‰
- `strategy_type`: ç­–ç•¥ç±»å‹ï¼ˆ`top8_long` æˆ– `bottom8_long`ï¼‰

**è¯·æ±‚ä½“ï¼š**
```json
{
    "enabled": true,
    "rsi_threshold": 800,
    "max_order_usdt": 5.0,
    "position_percent": 1.5,
    "leverage": 10
}
```

**å“åº”ï¼š**
```json
{
    "success": true,
    "message": "åº•éƒ¨ä¿¡å· top8_long é…ç½®å·²ä¿å­˜",
    "config": {
        "timestamp": "2026-02-21T12:00:00",
        "account_id": "account_main",
        "strategy_type": "top8_long",
        "enabled": true,
        "rsi_threshold": 800,
        "max_order_usdt": 5.0,
        "position_percent": 1.5,
        "leverage": 10
    }
}
```

#### 2. è·å–é…ç½®APIï¼ˆç¬¬17114è¡Œå¼€å§‹ï¼‰

**è·¯ç”±ï¼š** `GET /api/okx-trading/get-bottom-signal-config/<account_id>/<strategy_type>`

**å“åº”ï¼š**
```json
{
    "success": true,
    "config": {
        "enabled": false,
        "rsi_threshold": 800,
        "max_order_usdt": 5.0,
        "position_percent": 1.5,
        "leverage": 10
    },
    "message": "ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨ï¼‰"
}
```

### åç«¯ç›‘æ§è„šæœ¬
**æ–‡ä»¶ï¼š** `source_code/bottom_signal_long_monitor.py`

#### ä¸»è¦åŠŸèƒ½

1. **é…ç½®åŠ è½½**ï¼š
   ```python
   def load_strategy_config(account_id, strategy_type):
       """åŠ è½½ç­–ç•¥é…ç½®
       strategy_type: 'top8_long' æˆ– 'bottom8_long'
       """
       config_file = CONFIG_DIR / f"{account_id}_bottom_signal_{strategy_type}.jsonl"
       
       default_config = {
           'enabled': False,
           'rsi_threshold': 800,
           'max_order_usdt': 5.0,
           'position_percent': 1.5,
           'leverage': 10
       }
       
       if not config_file.exists():
           return default_config
       
       with open(config_file, 'r', encoding='utf-8') as f:
           lines = f.readlines()
           if lines:
               return json.loads(lines[-1].strip())
       
       return default_config
   ```

2. **æ£€æŸ¥æ‰§è¡Œè®¸å¯**ï¼š
   ```python
   def check_execution_allowed(account_id, strategy_type):
       """æ£€æŸ¥æ˜¯å¦å…è®¸æ‰§è¡Œï¼ˆ1å°æ—¶å†·å´ï¼‰"""
       execution_file = EXECUTION_DIR / f"{account_id}_bottom_signal_{strategy_type}_execution.jsonl"
       
       if not execution_file.exists():
           return True, "é¦–æ¬¡æ‰§è¡Œ"
       
       with open(execution_file, 'r', encoding='utf-8') as f:
           lines = f.readlines()
           if lines:
               last_record = json.loads(lines[0].strip())
               last_time = datetime.fromisoformat(last_record['timestamp'])
               
               if datetime.now() - last_time < timedelta(seconds=COOLDOWN_TIME):
                   return False, f"å†·å´ä¸­ï¼ˆè·ä¸Šæ¬¡æ‰§è¡Œ {int((datetime.now() - last_time).total_seconds() / 60)} åˆ†é’Ÿï¼‰"
       
       return True, "å†·å´ç»“æŸ"
   ```

3. **å¸‚åœºæƒ…ç»ªæ£€æŸ¥**ï¼š
   ```python
   def get_market_sentiment():
       """è·å–å¸‚åœºæƒ…ç»ª"""
       response = requests.get(f"{API_BASE}/api/market-sentiment/current", timeout=10)
       data = response.json()
       return {
           'sentiment': data.get('sentiment', ''),
           'rsi_sum': data.get('rsi_sum', 0),
           'is_bottom': data.get('sentiment') == 'ğŸ¯è§åº•ä¿¡å·'
       }
   ```

4. **æ‰§è¡Œåšå¤šç­–ç•¥**ï¼š
   ```python
   def execute_long_strategy(account, config, strategy_type, sentiment):
       """æ‰§è¡Œåšå¤šç­–ç•¥"""
       # è·å–å¸¸ç”¨15å¸æ¶¨å¹…æ’è¡Œ
       coins = get_top_15_coins()
       
       # æ ¹æ®ç­–ç•¥ç±»å‹é€‰æ‹©ç›®æ ‡å¸ç§
       if strategy_type == 'top8_long':
           target_coins = coins[:8]  # æ¶¨å¹…å‰8
       else:  # bottom8_long
           target_coins = coins[7:15]  # æ¶¨å¹…å8
       
       # è®¡ç®—ä»“ä½
       available_balance = get_available_balance(account)
       total_position = available_balance * config['position_percent'] / 100
       per_coin_amount = min(total_position / 8, config['max_order_usdt'])
       
       # å¼€å¤šå•
       for coin in target_coins:
           open_long_position(
               account=account,
               coin=coin,
               amount=per_coin_amount,
               leverage=config['leverage']
           )
       
       # è®°å½•æ‰§è¡Œ
       record_execution(account, strategy_type, sentiment)
       
       # å‘é€Telegramé€šçŸ¥
       send_telegram_notification(account, strategy_type, target_coins, per_coin_amount)
   ```

5. **ä¸»å¾ªç¯**ï¼š
   ```python
   def main():
       """ä¸»å¾ªç¯"""
       log("ğŸš€ è§åº•ä¿¡å·åšå¤šç›‘æ§å™¨å¯åŠ¨")
       
       while True:
           try:
               # è·å–æ‰€æœ‰è´¦æˆ·
               accounts = load_accounts()
               
               # è·å–å¸‚åœºæƒ…ç»ª
               sentiment = get_market_sentiment()
               
               for account in accounts:
                   # æ£€æŸ¥ä¸¤ä¸ªç­–ç•¥
                   for strategy_type in ['top8_long', 'bottom8_long']:
                       config = load_strategy_config(account['id'], strategy_type)
                       
                       if not config['enabled']:
                           continue
                       
                       # æ£€æŸ¥è§¦å‘æ¡ä»¶
                       if sentiment['is_bottom'] and sentiment['rsi_sum'] < config['rsi_threshold']:
                           allowed, reason = check_execution_allowed(account['id'], strategy_type)
                           
                           if allowed:
                               execute_long_strategy(account, config, strategy_type, sentiment)
                           else:
                               log(f"â³ [{account['id']}/{strategy_type}] {reason}")
               
               time.sleep(CHECK_INTERVAL)
               
           except Exception as e:
               log(f"âŒ ç›‘æ§å¾ªç¯å¼‚å¸¸: {e}")
               time.sleep(10)
   ```

---

## ğŸ“ æ•°æ®æ–‡ä»¶ç»“æ„

### JSONLé…ç½®æ–‡ä»¶
```
/home/user/webapp/data/okx_bottom_signal_strategies/
â”œâ”€â”€ account_main_bottom_signal_top8_long.jsonl
â”œâ”€â”€ account_main_bottom_signal_bottom8_long.jsonl
â”œâ”€â”€ account_fangfang12_bottom_signal_top8_long.jsonl
â”œâ”€â”€ account_fangfang12_bottom_signal_bottom8_long.jsonl
â”œâ”€â”€ account_poit_main_bottom_signal_top8_long.jsonl
â””â”€â”€ account_poit_main_bottom_signal_bottom8_long.jsonl
```

**é…ç½®æ–‡ä»¶æ ¼å¼ï¼š**
```jsonl
{"timestamp":"2026-02-21T12:00:00","time":"2026-02-21 12:00:00","account_id":"account_main","strategy_type":"top8_long","enabled":true,"rsi_threshold":800,"max_order_usdt":5.0,"position_percent":1.5,"leverage":10,"description":"è§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤šç­–ç•¥"}
```

### JSONLæ‰§è¡Œè®°å½•æ–‡ä»¶
```
/home/user/webapp/data/okx_bottom_signal_execution/
â”œâ”€â”€ account_main_bottom_signal_top8_long_execution.jsonl
â”œâ”€â”€ account_main_bottom_signal_bottom8_long_execution.jsonl
â””â”€â”€ ...
```

**æ‰§è¡Œè®°å½•æ ¼å¼ï¼š**
```jsonl
{"timestamp":"2026-02-21T12:05:30","account_id":"account_main","strategy_type":"top8_long","executed":true,"rsi_value":750,"sentiment":"ğŸ¯è§åº•ä¿¡å·","target_coins":["BTC-USDT-SWAP","ETH-USDT-SWAP","..."],"per_coin_amount":0.5,"total_amount":4.0,"leverage":10}
```

---

## ğŸ® ç”¨æˆ·æ“ä½œæµç¨‹

### 1ï¸âƒ£ å¯ç”¨ç­–ç•¥å¹¶é…ç½®å‚æ•°

1. è®¿é—® OKXäº¤æ˜“é¡µé¢
2. æ‰¾åˆ°é»„è‰²çš„"ğŸš€ RSIè‡ªåŠ¨å¼€ä»“ç­–ç•¥"å¡ç‰‡
3. å‘ä¸‹æ»šåŠ¨æ‰¾åˆ°ç»¿è‰²çš„"ğŸ¯ è§åº•ä¿¡å·+æ¶¨å¹…å‰8/å8åšå¤š"ç­–ç•¥
4. è®¾ç½®å‚æ•°ï¼š
   - **RSIé˜ˆå€¼**ï¼šé»˜è®¤800ï¼Œæ ¹æ®å¸‚åœºè°ƒæ•´ï¼ˆ300-1500ï¼‰
   - **å•å¸é™é¢**ï¼šé»˜è®¤5 USDTï¼Œæ ¹æ®é£é™©æ‰¿å—èƒ½åŠ›è°ƒæ•´ï¼ˆ1-100 USDTï¼‰
5. ç‚¹å‡»**ğŸ’¾ ä¿å­˜**æŒ‰é’®ä¿å­˜é…ç½®
6. æ‰“å¼€ç­–ç•¥å¼€å…³

### 2ï¸âƒ£ ç­–ç•¥è‡ªåŠ¨è¿è¡Œ

- åç«¯ç›‘æ§è„šæœ¬æ¯60ç§’æ£€æŸ¥å¸‚åœºæ¡ä»¶
- å½“æ»¡è¶³æ¡ä»¶æ—¶ï¼š
  - å‡ºç°è§åº•ä¿¡å·ï¼ˆåº•éƒ¨èƒŒç¦»ï¼‰
  - RSIæ€»å’Œ < è®¾å®šé˜ˆå€¼ï¼ˆå¦‚800ï¼‰
- è‡ªåŠ¨å¯¹ç›®æ ‡å¸ç§å¼€å¤šå•ï¼š
  - **ç­–ç•¥1**ï¼šæ¶¨å¹…å‰8åå¸ç§
  - **ç­–ç•¥2**ï¼šæ¶¨å¹…å8åå¸ç§
- **è§¦å‘å1å°æ—¶å†…ä¸é‡å¤æ‰§è¡Œ**

### 3ï¸âƒ£ æŸ¥çœ‹æ‰§è¡Œç»“æœ

æ‰§è¡Œåä¼šï¼š
1. è®°å½•åˆ°JSONLæ‰§è¡Œæ–‡ä»¶
2. å‘é€Telegramé€šçŸ¥
3. åœ¨1å°æ—¶å†·å´æœŸå†…ä¸ä¼šé‡å¤è§¦å‘

---

## ğŸ” èµ„é‡‘é…ç½®ä¸é£æ§

### ä»“ä½è®¡ç®—å…¬å¼

```
æ€»æŠ•å…¥ = å¯ç”¨ä½™é¢ Ã— 1.5%
å•å¸æŠ•å…¥ = æ€»æŠ•å…¥ Ã· 8
å®é™…å•å¸æŠ•å…¥ = min(å•å¸æŠ•å…¥, å•å¸é™é¢)
```

### è®¡ç®—ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šå°è´¦æˆ·ï¼ˆå¯ç”¨ä½™é¢ 200 USDTï¼‰
```
æ€»æŠ•å…¥ = 200 Ã— 1.5% = 3.0 USDT
å•å¸æŠ•å…¥ = 3.0 Ã· 8 = 0.375 USDT
å®é™…å•å¸æŠ•å…¥ = 0.375 USDTï¼ˆæœªè¾¾åˆ°5 USDTé™é¢ï¼‰
8ä¸ªå¸ç§æ€»æŠ•å…¥ = 0.375 Ã— 8 = 3.0 USDT
```

#### ç¤ºä¾‹2ï¼šå¤§è´¦æˆ·ï¼ˆå¯ç”¨ä½™é¢ 5000 USDTï¼‰
```
æ€»æŠ•å…¥ = 5000 Ã— 1.5% = 75 USDT
å•å¸æŠ•å…¥ = 75 Ã· 8 = 9.375 USDT
è§¦å‘å•å¸é™é¢ï¼å®é™…å•å¸æŠ•å…¥ = 5.0 USDT
8ä¸ªå¸ç§æ€»æŠ•å…¥ = 5.0 Ã— 8 = 40 USDT
```

### é£æ§æœºåˆ¶

- âœ… **ä»“ä½æ§åˆ¶**ï¼šå•æ¬¡æœ€å¤šæŠ•å…¥å¯ç”¨ä½™é¢çš„1.5%
- âœ… **å•å¸é™é¢**ï¼šæ¯ä¸ªå¸ç§æœ€å¤šæŠ•å…¥ç”¨æˆ·è®¾å®šçš„é™é¢ï¼ˆé»˜è®¤5 USDTï¼‰
- âœ… **æ æ†å›ºå®š**ï¼š10å€æ æ†ï¼Œå¹³è¡¡æ”¶ç›Šä¸é£é™©
- âœ… **æ—¶é—´å†·å´**ï¼šè§¦å‘å1å°æ—¶å†…ä¸é‡å¤ï¼Œé¿å…é¢‘ç¹äº¤æ˜“
- âœ… **åº•éƒ¨ä¿¡å·**ï¼šåªåœ¨å‡ºç°åº•éƒ¨èƒŒç¦»ä¿¡å·æ—¶è§¦å‘
- âœ… **RSIç¡®è®¤**ï¼šåªåœ¨RSIè¶³å¤Ÿä½æ—¶è§¦å‘ï¼Œé¿å…å‡ä¿¡å·
- âœ… **å¤šè´¦æˆ·æ”¯æŒ**ï¼šæ¯ä¸ªè´¦æˆ·ç‹¬ç«‹é…ç½®å’Œæ‰§è¡Œ

---

## ğŸ†š ä¸è§é¡¶ä¿¡å·åšç©ºç­–ç•¥çš„å¯¹ç§°è®¾è®¡

| ç‰¹æ€§ | è§é¡¶ä¿¡å·åšç©º âš ï¸ | è§åº•ä¿¡å·åšå¤š ğŸ¯ |
|------|----------------|----------------|
| **è§¦å‘ä¿¡å·** | è§é¡¶ä¿¡å·ï¼ˆé¡¶éƒ¨èƒŒç¦»ï¼‰ | è§åº•ä¿¡å·ï¼ˆåº•éƒ¨èƒŒç¦»ï¼‰ |
| **RSIæ¡ä»¶** | RSI > 1800ï¼ˆå›ºå®šï¼‰ | RSI < 800ï¼ˆå¯é…ç½®ï¼‰ |
| **äº¤æ˜“æ–¹å‘** | å¼€ç©ºå• | å¼€å¤šå• |
| **æ æ†** | 10å€ | 10å€ |
| **ç›®æ ‡å¸ç§** | æ¶¨å¹…å‰8/å8 | æ¶¨å¹…å‰8/å8 |
| **ä»“ä½é…ç½®** | 1.5% / 8 | 1.5% / 8 |
| **å•å¸é™é¢** | 5 USDTï¼ˆå›ºå®šï¼‰ | 5 USDTï¼ˆå¯é…ç½®ï¼‰ |
| **å†·å´æ—¶é—´** | 1å°æ—¶ | 1å°æ—¶ |
| **é…ç½®æ–‡ä»¶** | `okx_auto_strategy` | `okx_bottom_signal_strategies` |
| **æ‰§è¡Œè®°å½•** | `okx_auto_strategy` | `okx_bottom_signal_execution` |
| **ç›‘æ§è„šæœ¬** | âŒ æœªå®ç° | âœ… `bottom_signal_long_monitor.py` |
| **PM2æœåŠ¡** | âŒ æœªè¿è¡Œ | âœ… `bottom-signal-long-monitor` |

---

## ğŸ“Š ç³»ç»ŸçŠ¶æ€

### PM2æœåŠ¡çŠ¶æ€
```bash
$ pm2 list | grep bottom
â”‚ 28 â”‚ bottom-signal-long-monitor â”‚ online â”‚ 0% â”‚ 28.3mb â”‚
```

### æ•°æ®æ–‡ä»¶çŠ¶æ€
```bash
$ ls -lh data/okx_bottom_signal_strategies/
# é…ç½®æ–‡ä»¶ï¼ˆæ¯ä¸ªè´¦æˆ·æ¯ä¸ªç­–ç•¥ä¸€ä¸ªæ–‡ä»¶ï¼‰

$ ls -lh data/okx_bottom_signal_execution/
# æ‰§è¡Œè®°å½•æ–‡ä»¶ï¼ˆæ¯ä¸ªè´¦æˆ·æ¯ä¸ªç­–ç•¥ä¸€ä¸ªæ–‡ä»¶ï¼‰
```

### APIçŠ¶æ€
- âœ… `/api/okx-trading/save-bottom-signal-config/<account_id>/<strategy_type>` - ä¿å­˜é…ç½®
- âœ… `/api/okx-trading/get-bottom-signal-config/<account_id>/<strategy_type>` - è·å–é…ç½®
- âœ… å‰ç«¯UIæ­£å¸¸æ˜¾ç¤º
- âœ… JavaScriptå‡½æ•°æ­£å¸¸å·¥ä½œ
- âœ… ç›‘æ§è„šæœ¬æ­£å¸¸è¿è¡Œ

---

## ğŸš€ è®¿é—®é“¾æ¥

**OKXäº¤æ˜“ç³»ç»Ÿï¼š**
https://9002-iopxcqas7abbrajoi4k4x-2e77fc33.sandbox.novita.ai/okx-trading

**GitHubä»“åº“ï¼š**
https://github.com/jamesyidc/25669889956

---

## âœ… éªŒè¯æ¸…å•

- [x] å‰ç«¯UIæ˜¾ç¤ºå®Œæ•´ï¼ˆä¸¤ä¸ªç­–ç•¥å¡ç‰‡ï¼‰
- [x] å¼€å…³æŒ‰é’®å·¥ä½œæ­£å¸¸
- [x] RSIé˜ˆå€¼è¾“å…¥æ¡†ï¼ˆ300-1500ï¼Œé»˜è®¤800ï¼‰
- [x] å•å¸é™é¢è¾“å…¥æ¡†ï¼ˆ1-100 USDTï¼Œé»˜è®¤5ï¼‰
- [x] ğŸ’¾ ä¿å­˜æŒ‰é’®ç‚¹å‡»å“åº”
- [x] å®æ—¶æ›´æ–°æ˜¾ç¤ºå€¼ï¼ˆRSIé˜ˆå€¼å’Œå•å¸é™é¢ï¼‰
- [x] JavaScriptä¿å­˜å‡½æ•°å®ç°
- [x] JavaScriptåŠ è½½å‡½æ•°å®ç°ï¼ˆé›†æˆåœ¨è´¦æˆ·åˆ‡æ¢ä¸­ï¼‰
- [x] åç«¯ä¿å­˜é…ç½®APIå®ç°
- [x] åç«¯è·å–é…ç½®APIå®ç°
- [x] JSONLé…ç½®æ–‡ä»¶æ ¼å¼æ­£ç¡®
- [x] JSONLæ‰§è¡Œè®°å½•æ–‡ä»¶æ ¼å¼æ­£ç¡®
- [x] ç›‘æ§è„šæœ¬å®Œæ•´å®ç°
- [x] PM2æœåŠ¡æ­£å¸¸è¿è¡Œ
- [x] å¤šè´¦æˆ·æ”¯æŒ
- [x] ç‹¬ç«‹é…ç½®æ–‡ä»¶
- [x] 1å°æ—¶å†·å´æœºåˆ¶
- [x] Telegramé€šçŸ¥é›†æˆ
- [x] é”™è¯¯å¤„ç†å®Œå–„
- [x] å‚æ•°éªŒè¯å®Œæ•´

---

## ğŸ‰ æ€»ç»“

**è§åº•ä¿¡å·åšå¤šç­–ç•¥**å·²ç»å®Œæ•´å®ç°å¹¶æ­£å¸¸è¿è¡Œï¼

### æ ¸å¿ƒç‰¹ç‚¹

1. ğŸ¯ **å¯¹ç§°è®¾è®¡**ï¼šä¸è§é¡¶ä¿¡å·åšç©ºç­–ç•¥å®Œå…¨å¯¹ç§°
2. ğŸ”§ **çµæ´»é…ç½®**ï¼šRSIé˜ˆå€¼å’Œå•å¸é™é¢å¯ç‹¬ç«‹è®¾ç½®
3. ğŸ“Š **å¤šè´¦æˆ·æ”¯æŒ**ï¼šæ¯ä¸ªè´¦æˆ·ç‹¬ç«‹é…ç½®å’Œæ‰§è¡Œ
4. ğŸ” **é£æ§å®Œå–„**ï¼šä»“ä½æ§åˆ¶ã€å•å¸é™é¢ã€å†·å´æœºåˆ¶
5. ğŸ“ **JSONLæ ¼å¼**ï¼šé…ç½®å’Œæ‰§è¡Œè®°å½•æ¸…æ™°å¯è¿½æº¯
6. ğŸ¤– **è‡ªåŠ¨æ‰§è¡Œ**ï¼šåç«¯ç›‘æ§è„šæœ¬24/7è¿è¡Œ
7. ğŸ“± **Telegramé€šçŸ¥**ï¼šå®æ—¶æ¨é€æ‰§è¡Œç»“æœ
8. âœ… **å®Œæ•´éªŒè¯**ï¼šæ‰€æœ‰ç»„ä»¶å·²æµ‹è¯•é€šè¿‡

### ä½¿ç”¨å»ºè®®

1. **åˆå§‹é…ç½®**ï¼š
   - RSIé˜ˆå€¼ï¼š800ï¼ˆå¯æ ¹æ®å¸‚åœºæ³¢åŠ¨è°ƒæ•´ï¼‰
   - å•å¸é™é¢ï¼š5 USDTï¼ˆå¯æ ¹æ®é£é™©æ‰¿å—èƒ½åŠ›è°ƒæ•´ï¼‰

2. **ç­–ç•¥é€‰æ‹©**ï¼š
   - **æ¶¨å¹…å‰8åšå¤š**ï¼šé€‚åˆè¿½æ¶¨åå¼¹
   - **æ¶¨å¹…å8åšå¤š**ï¼šé€‚åˆæŠ„åº•è¡¥æ¶¨

3. **ç›‘æ§å»ºè®®**ï¼š
   - è§‚å¯Ÿç­–ç•¥æ‰§è¡Œæƒ…å†µ
   - æ ¹æ®ç›ˆäºè°ƒæ•´å‚æ•°
   - æ³¨æ„å¸‚åœºæƒ…ç»ªå˜åŒ–

4. **é£é™©æç¤º**ï¼š
   - 10å€æ æ†æœ‰è¾ƒé«˜é£é™©
   - å•å¸é™é¢æ§åˆ¶å•ç¬”é£é™©
   - å»ºè®®å°é¢æµ‹è¯•åå†å¢åŠ æŠ•å…¥

---

**ğŸŠ æ­å–œï¼è§åº•ä¿¡å·åšå¤šç­–ç•¥åŠŸèƒ½å·²å®Œç¾å®ç°å¹¶è¿è¡Œæ­£å¸¸ï¼**
